jQuery.ui||(function(h){var e=h.fn.remove,g=h.browser.mozilla&&(parseFloat(h.browser.version)<1.9);h.ui={version:"1.8a1",plugin:{add:function(k,l,n){var m=h.ui[k].prototype;for(var j in n){m.plugins[j]=m.plugins[j]||[];m.plugins[j].push([l,n[j]])}},call:function(j,l,k){var n=j.plugins[l];if(!n||!j.element[0].parentNode){return}for(var m=0;m<n.length;m++){if(j.options[n[m][0]]){n[m][1].apply(j.element,k)}}}},contains:function(j,i){return document.compareDocumentPosition?j.compareDocumentPosition(i)&16:j!==i&&j.contains(i)},hasScroll:function(l,j){if(h(l).css("overflow")=="hidden"){return false}var i=(j&&j=="left")?"scrollLeft":"scrollTop",k=false;if(l[i]>0){return true}l[i]=1;k=(l[i]>0);l[i]=0;return k},isOverAxis:function(j,i,k){return(j>i)&&(j<(i+k))},isOver:function(n,j,m,l,i,k){return h.ui.isOverAxis(n,m,i)&&h.ui.isOverAxis(j,l,k)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(g){var a=h.attr,d=h.fn.removeAttr,c="http://www.w3.org/2005/07/aaa",f=/^aria-/,b=/^wairole:/;h.attr=function(j,i,k){var l=k!==undefined;return(i=="role"?(l?a.call(this,j,i,"wairole:"+k):(a.apply(this,arguments)||"").replace(b,"")):(f.test(i)?(l?j.setAttributeNS(c,i.replace(f,"aaa:"),k):a.call(this,j,i.replace(f,"aaa:"))):a.apply(this,arguments)))};h.fn.removeAttr=function(i){return(f.test(i)?this.each(function(){this.removeAttributeNS(c,i.replace(f,""))}):d.call(this,i))}}h.fn.extend({_focus:h.fn.focus,focus:function(i,j){return typeof i==="number"?this.each(function(){var k=this;setTimeout(function(){h(k).focus();(j&&j.call(k))},i)}):this._focus.apply(this,arguments)},remove:function(){h("*",this).add(this).each(function(){h(this).triggerHandler("remove")});return e.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var i;if((h.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){i=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(h.curCSS(this,"position",1))&&(/(auto|scroll)/).test(h.curCSS(this,"overflow",1)+h.curCSS(this,"overflow-y",1)+h.curCSS(this,"overflow-x",1))}).eq(0)}else{i=this.parents().filter(function(){return(/(auto|scroll)/).test(h.curCSS(this,"overflow",1)+h.curCSS(this,"overflow-y",1)+h.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!i.length?h(document):i},zIndex:function(j){if(j!==undefined){return this.css("zIndex",j)}var i=this[0];while(i&&i.style){if(i.style.zIndex!==""&&i.style.zIndex!==0){return +i.style.zIndex}i=i.parentNode}return 0}});h.extend(h.expr[":"],{data:function(l,k,j){return !!h.data(l,j[3])},focusable:function(j){var k=j.nodeName.toLowerCase(),i=h.attr(j,"tabindex");return(/input|select|textarea|button|object/.test(k)?!j.disabled:"a"==k||"area"==k?j.href||!isNaN(i):!isNaN(i))&&!h(j)["area"==k?"parents":"closest"](":hidden").length},tabbable:function(j){var i=h.attr(j,"tabindex");return(isNaN(i)||i>=0)&&h(j).is(":focusable")}});h.widget=function(j,i){var k=j.split(".")[0],l;j=j.split(".")[1];l=k+"-"+j;h.expr[":"][l]=function(m){return !!h.data(m,j)};h.fn[j]=function(o){var m=(typeof o=="string"),n=Array.prototype.slice.call(arguments,1),p=this;if(m&&o.substring(0,1)=="_"){return p}(m?this.each(function(){var q=h.data(this,j),r=(q&&h.isFunction(q[o])?q[o].apply(q,n):q);if(r!==q&&r!==undefined){p=r;return false}}):this.each(function(){(h.data(this,j)||h.data(this,j,new h[k][j](this,o))._init())}));return p};h[k]=h[k]||{};h[k][j]=function(o,n){var m=this;this.namespace=k;this.widgetName=j;this.widgetEventPrefix=h[k][j].eventPrefix||j;this.widgetBaseClass=l;this.options=h.extend(true,{},h.widget.defaults,h[k][j].defaults,h.metadata&&h.metadata.get(o)[j],n);this.element=h(o).bind("setData."+j,function(q,p,r){if(q.target==o){return m._setData(p,r)}}).bind("getData."+j,function(q,p){if(q.target==o){return m._getData(p)}}).bind("remove",function(){return m.destroy()})};h[k][j].prototype=h.extend({},h.widget.prototype,i)};h.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled");return this},option:function(k,l){var j=k,i=this;if(typeof k=="string"){if(l===undefined){return this._getData(k)}j={};j[k]=l}h.each(j,function(m,n){i._setData(m,n)});return i},_getData:function(i){return this.options[i]},_setData:function(i,j){this.options[i]=j;if(i=="disabled"){this.element[j?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",j)}},enable:function(){this._setData("disabled",false);return this},disable:function(){this._setData("disabled",true);return this},_trigger:function(k,l,m){var o=this.options[k];l=h.Event(l);l.type=(k==this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase();m=m||{};if(l.originalEvent){for(var j=h.event.props.length,n;j;){n=h.event.props[--j];l[n]=l.originalEvent[n]}}this.element.trigger(l,m);return !(h.isFunction(o)&&o.call(this.element[0],l,m)===false||l.isDefaultPrevented())}};h.widget.defaults={disabled:false};h.ui.mouse={_mouseInit:function(){var i=this;this.element.bind("mousedown."+this.widgetName,function(j){return i._mouseDown(j)}).bind("click."+this.widgetName,function(j){if(i._preventClickEvent){i._preventClickEvent=false;j.stopImmediatePropagation();return false}});if(h.browser.msie){this._mouseUnselectable=this.element.attr("unselectable");this.element.attr("unselectable","on")}this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);(h.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable))},_mouseDown:function(k){k.originalEvent=k.originalEvent||{};if(k.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(k));this._mouseDownEvent=k;var j=this,l=(k.which==1),i=(typeof this.options.cancel=="string"?h(k.target).parents().add(k.target).filter(this.options.cancel).length:false);if(!l||i||!this._mouseCapture(k)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){j.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)){this._mouseStarted=(this._mouseStart(k)!==false);if(!this._mouseStarted){k.preventDefault();return true}}this._mouseMoveDelegate=function(m){return j._mouseMove(m)};this._mouseUpDelegate=function(m){return j._mouseUp(m)};h(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(h.browser.safari||k.preventDefault());k.originalEvent.mouseHandled=true;return true},_mouseMove:function(i){if(h.browser.msie&&!i.button){return this._mouseUp(i)}if(this._mouseStarted){this._mouseDrag(i);return i.preventDefault()}if(this._mouseDistanceMet(i)&&this._mouseDelayMet(i)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,i)!==false);(this._mouseStarted?this._mouseDrag(i):this._mouseUp(i))}return !this._mouseStarted},_mouseUp:function(i){h(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(i.target==this._mouseDownEvent.target);this._mouseStop(i)}return false},_mouseDistanceMet:function(i){return(Math.max(Math.abs(this._mouseDownEvent.pageX-i.pageX),Math.abs(this._mouseDownEvent.pageY-i.pageY))>=this.options.distance)},_mouseDelayMet:function(i){return this.mouseDelayMet},_mouseStart:function(i){},_mouseDrag:function(i){},_mouseStop:function(i){},_mouseCapture:function(i){return true}};h.ui.mouse.defaults={cancel:":input,option",distance:1,delay:0}})(jQuery);(function(a){a.widget("ui.watermark",{_init:function(){var f=this.options,c=this;var b=this.element;var e=a.isFunction(f.placeholder)?f.placeholder.apply(this.element[0]):f.placeholder;this.element.wrap("<span/>").parent().addClass("ui-watermark-container ui-watermark-"+b[0].tagName.toLowerCase());var d=(this.label=a('<label for="'+b.attr("id")+'">'+e+"</label>").insertBefore(b));d.addClass("ui-watermark-label");d.css({left:parseInt(b.css("borderLeftWidth"))+parseInt(b.css("paddingLeft")+1),top:parseInt(b.css("borderTopWidth"))+parseInt(b.css("paddingTop")-1)});if(b.val()){d.hide()}b.bind("focus."+this.widgetName,function(){if(!f.disabled&&!this.value){f.animate?d.fadeOut(20):d.hide()}}).bind("blur."+this.widgetName,function(){if(!f.disabled&&!this.value){f.animate?d.fadeIn(20):d.show()}})},destroy:function(){if(this.element.data("placeholder")){this.element.attr("placeholder",this.element.data("placeholder"))}this.element.parent().replaceWith(this.element);this.label.remove();a.widget.prototype.destroy.apply(this,arguments)}});a.extend(a.ui.watermark,{version:"@VERSION",defaults:{placeholder:function(){var b=a(this).attr("placeholder");a(this).data("placeholder",b);a(this).removeAttr("placeholder");return b},animate:true}})})(jQuery);$.fn.toEm=function(a){a=jQuery.extend({scope:"body"},a);var c=parseInt(this[0],10);var d=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(a.scope);var b=d.height();d.remove();return(c/b).toFixed(8)+"em"};$.fn.toPx=function(a){a=jQuery.extend({scope:"body"},a);var c=parseFloat(this[0]);var d=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(a.scope);var b=d.height();d.remove();return Math.round(c*b)+"px"};(function(a){jQuery.widget("ui.selectmenu",{_init:function(){var p=this,k,u=this.element,q=this.options,n=[],A,j,y,x=[],B,f,m=this.widgetBaseClass,w,l=function(e){x[this.find.slice(1)]=this.icon};k=Math.round(Math.random()*1000);this.ids=[u.attr("id")+"_button_"+k,u.attr("id")+"_menu_"+k];this._safemouseup=true;u.find("option").each(function(){w=jQuery(this);n.push({value:w.attr("value"),text:q.format?q.format(w[0].firstChild.nodeValue):w[0].firstChild.nodeValue,selected:w.attr("selected"),classes:w.attr("class"),parentOptGroup:(q.usesOptGroups)?w.parent("optgroup").attr("label"):false})});this.newelement=j=jQuery('<a tabindex="'+(u.attr("tabindex")||"0")+'" class="'+((q.style==="dropdown")?m+"-dropdown ":m+"-popup ")+this.widgetBaseClass+' ui-widget ui-state-default ui-corner-all" id="'+this.ids[0]+'" role="button" href="#" aria-haspopup="true" aria-owns="'+this.ids[1]+'" aria-expanded="false"></a>').prepend('<span class="'+m+'-status">'+n[this._selectedIndex()].text+'</span><span class="'+((q.style==="popup")?"ui-icon-triangle-2-n-s ":"ui-icon-triangle-1-s ")+m+'-icon ui-icon"></span>').insertAfter(u);j.data("selectelement",u);jQuery("label[for="+u.attr("id")+"]").attr("for",this.ids[0]).bind("click",function(){j.focus();return false});j.bind("mousedown",function(e){p._toggle(e);if(q.style==="popup"){p._safemouseup=false;setTimeout(function(){p._safemouseup=true},300)}return false}).bind("click",function(){return false}).keydown(function(e){switch(e.keyCode){case jQuery.ui.keyCode.ENTER:return false;case jQuery.ui.keyCode.SPACE:p._toggle(e);return false;case jQuery.ui.keyCode.UP:case jQuery.ui.keyCode.LEFT:p._moveSelection(-1);return false;case jQuery.ui.keyCode.DOWN:case jQuery.ui.keyCode.RIGHT:p._moveSelection(1);return false;default:p._typeAhead(e.keyCode,"mouseup");return false}return true}).bind("mouseover focus",function(){jQuery(this).addClass(m+"-focus ui-state-hover")}).bind("mouseout blur",function(){jQuery(this).removeClass(m+"-focus ui-state-hover")});jQuery(document).mousedown(function(e){p.close(e)});u.click(function(){this._refreshValue()}).focus(function(){j.focus()});this.list=jQuery('<ul class="'+((q.style==="dropdown")?m+"-menu-dropdown ":m+"-menu-popup ")+m+"-menu ui-widget ui-widget-content"+((q.style==="dropdown")?" ui-corner-bottom":" ui-corner-all")+'" aria-hidden="true" role="listbox" aria-multiselectable="false" aria-labelledby="'+this.ids[0]+'" id="'+this.ids[1]+'"></ul>');A=(q.style==="popup")?" ui-state-active":"";y=q.icons||[];if(y.length>0){jQuery.each(y,l)}for(var t=0,d=n.length;t<d;t++){var g,v,r=false,h,z,f=this.list,c=n[t];z=c.classes||"";h=c.parentOptGroup;if(z!==""){v='<span class="'+m+"-item-icon ui-icon "+x[z]+'">&nbsp;&nbsp;</span>';r=true}g=jQuery("<li "+((r)?'class="'+m+'-hasIcon"':"")+'><a class="'+z+'" role="option" aria-selected="false" href="#" tabindex="-1">'+((r)?v:"")+"&nbsp;"+c.text+"</a></li>").data("index",t).data("optionClasses",z);if(r){g.data("optionClasses",z+" "+m+"-hasIcon")}if(!h){f.append(g)}else{var b=m+"-group-"+h;if(f.find("li."+b).size()){f.find("li."+b+":last ul").append(g)}else{jQuery(f).append(jQuery('<li class="'+m+"-group "+b+'"><span class="'+m+'-group-label">'+h+"</span><ul></ul></li>")).find("ul").append(g)}}}this.list.bind("mouseover focus",function(i){var o=jQuery(i.target).closest("li");p._selectedOptionLi().addClass(A);p._focusedOptionLi().removeClass(m+"-item-focus ui-state-hover");o.removeClass("ui-state-active").addClass(m+"-item-focus ui-state-hover");return false}).bind("mouseout blur",function(i){var o=jQuery(i.target).closest("li");if(o.is(p._selectedOptionLi())){o.addClass(A)}o.removeClass(m+"-item-focus ui-state-hover");return false}).bind("mouseup",function(o){if(p._safemouseup&&o.target.nodeName!=="UL"){var i=jQuery(o.target).closest("li").data("index");p.value(i);p.select(o);if(i!==p._selectedIndex()){p.change(o)}p.close(o,true)}return false}).bind("click mousedown",function(i){return false});if(q.transferClasses){j.add(this.list).addClass(u.attr("class")||"")}B=u.width();j.width((q.width)?q.width:B);if(q.style==="dropdown"){this.list.width((q.menuWidth)?q.menuWidth:((q.width)?q.width:B))}else{this.list.width((q.menuWidth)?q.menuWidth:((q.width)?q.width-q.handleWidth:B-q.handleWidth))}if(q.maxHeight){this.list.css("max-height",q.maxHeight)}this._optionLis=this.list.find("li:not(."+m+"-group)");this.list.keydown(function(e){switch(e.keyCode){case jQuery.ui.keyCode.UP:case jQuery.ui.keyCode.LEFT:p._moveFocus(-1);return false;case jQuery.ui.keyCode.DOWN:case jQuery.ui.keyCode.RIGHT:p._moveFocus(1);return false;case jQuery.ui.keyCode.HOME:p._moveFocus(":first");return false;case jQuery.ui.keyCode.PAGE_UP:p._scrollPage("up");return false;case jQuery.ui.keyCode.PAGE_DOWN:p._scrollPage("down");return false;case jQuery.ui.keyCode.END:p._moveFocus(":last");return false;case jQuery.ui.keyCode.ENTER:case jQuery.ui.keyCode.SPACE:p.close(e,true);jQuery(e.target).parents("li:eq(0)").trigger("mouseup");return false;case jQuery.ui.keyCode.TAB:p.close(e);return true;case jQuery.ui.keyCode.ESCAPE:p.close(e,true);return false;default:p._typeAhead(e.keyCode,"focus");return false}return true});u.css("display","none");if(u.attr("disabled")===true){this.disable()}this.value(this._selectedIndex());jQuery("body").append(this.list)},destroy:function(){var b=this.element;b.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled");jQuery("label[for="+this.newelement.attr("id")+"]").attr("for",b.attr("id")).unbind("click");this.newelement.css("display","none").remove();this.list.css("display","none").remove();b.show()},_typeAhead:function(f,e){var b=this,h=String.fromCharCode(f),d=false,i,g=function(c,j){d=true;jQuery(c).trigger(e);b._prevChar[1]=j};if(!b._prevChar){b._prevChar=["",0]}i=h.toLowerCase();this.list.find("li a").each(function(j){var c=c,l=l,k;if(!d){k=jQuery(this).text();if(k.indexOf(l)===0||k.indexOf(i)===0){if(c._prevChar[0]==l){if(c._prevChar[1]<j){g(this,j)}}else{g(this,j)}}}});this._prevChar[0]=h},_uiHash:function(){return{value:this.value()}},open:function(b){this._refreshPosition();this._closeOthers(b);this.newelement.attr("aria-expanded",true).addClass("ui-state-active");this.list.appendTo("body").addClass(this.widgetBaseClass+"-open").attr("aria-hidden",false).find("li:not(."+this.widgetBaseClass+"-group):eq("+this._selectedIndex()+") a").focus();if(this.options.style=="dropdown"){this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top")}this._refreshPosition();this._trigger("open",b,this._uiHash())},close:function(c,b){if(this.newelement.is(".ui-state-active")){this.newelement.attr("aria-expanded",false).removeClass("ui-state-active");this.list.attr("aria-hidden",true).removeClass(this.widgetBaseClass+"-open");if(this.options.style=="dropdown"){this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all")}if(b){this.newelement.focus()}this._trigger("close",c,this._uiHash())}},change:function(b){this.element.trigger("change");this._trigger("change",b,this._uiHash())},select:function(b){this._trigger("select",b,this._uiHash())},_closeOthers:function(c){var b=function(){jQuery(this).data("selectelement").selectmenu("close",c)};jQuery("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(b);jQuery("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(c,b){if(this.list.is("."+this.widgetBaseClass+"-open")){this.close(c,b)}else{this.open(c)}},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(d){var c=parseInt(this._selectedOptionLi().data("index"),10);var b=c+d;return this._optionLis.eq(b).trigger("mouseup")},_moveFocus:function(d){var b;if(!isNaN(d)){var c=parseInt(this._focusedOptionLi().data("index"),10);b=c+d}else{b=parseInt(this._optionLis.filter(d).data("index"),10)}if(b<0){b=0}if(b>this._optionLis.size()-1){b=this._optionLis.size()-1}this._focusedOptionLi().find("a:eq(0)").blur();this._optionLis.eq(b).find("a:eq(0)").focus()},_scrollPage:function(c){var b=Math.floor(this.list.outerHeight()/this.list.find("li:first").outerHeight());b=(c=="up")?-b:b;this._moveFocus(b)},_setData:function(b,c){this.options[b]=c;if(b=="disabled"){this.element.add(this.newelement).add(this.list)[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",c)}},value:function(b){if(arguments.length){this.element[0].selectedIndex=b;this._refreshValue();this._refreshPosition()}return this.element[0].selectedIndex},_refreshValue:function(){var c=(this.options.style=="popup")?" ui-state-active":"";this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+c).find("a").attr("aria-selected","false");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+c).find("a").attr("aria-selected","true");var b=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"";var d=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(b).data("optionClasses",d).addClass(d).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html())},_refreshPosition:function(){if(this.options.openLeft){this.list.addClass("leftOpenMenu")}else{this.list.css("left",this.newelement.offset().left)}var b=this.newelement.offset().top,c=this.list[0].scrollTop;this.list.find("li:lt("+this._selectedIndex()+")").each(function(){c-=jQuery(this).outerHeight()});if(!this.newelement.is("."+this.widgetBaseClass+"-popup")){b+=this.newelement.height()}this.list.css("top",b)}});jQuery.extend(jQuery.ui.selectmenu,{getter:"value",version:"@VERSION",eventPrefix:"selectmenu",defaults:{transferClasses:true,style:"popup",width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,openLeft:false,usesOptGroups:false}})})(jQuery);(function(e){e.ui=e.ui||{};var b=/left|center|right/,d="center",c=/top|center|bottom/,f="center",a=e.fn.position;e.fn.position=function(h){if(!h||!h.of){return a.apply(this,arguments)}var k=e(h.of),m=(h.collision||"flip").split(" "),l=h.offset?h.offset.split(" "):[0,0],j,g,i;if(h.of==document){j=k.width();g=k.height();i={top:0,left:0}}else{if(h.of==window){j=k.width();g=k.height();i={top:k.scrollTop(),left:k.scrollLeft()}}else{if(h.of.preventDefault){h.at="left top";j=g=0;i={top:h.of.pageY,left:h.of.pageX}}else{j=k.outerWidth();g=k.outerHeight();i=k.offset()}}}e.each(["my","at"],function(){var n=(h[this]||"").split(" ");n=n.length==1?b.test(n[0])?n.concat([f]):c.test(n[0])?[d].concat(n):[d,f]:n;n[0]=b.test(n[0])?n[0]:d;n[1]=c.test(n[1])?n[1]:f;h[this]=n});if(m.length==1){m[1]=m[0]}l[0]=parseInt(l[0],10)||0;if(l.length==1){l[1]=l[0]}l[1]=parseInt(l[1],10)||0;switch(h.at[0]){case"right":i.left+=j;break;case d:i.left+=j/2;break}switch(h.at[1]){case"bottom":i.top+=g;break;case f:i.top+=g/2;break}i.left+=l[0];i.top+=l[1];return this.each(function(){var t=e(this),r=t.outerWidth(),q=t.outerHeight(),o=e.extend({},i),u,n,p;switch(h.my[0]){case"right":o.left-=r;break;case d:o.left-=r/2;break}switch(h.my[1]){case"bottom":o.top-=q;break;case f:o.top-=q/2;break}e.each(["left","top"],function(w,v){(e.ui.position[m[w]]&&e.ui.position[m[w]][v](o,{targetWidth:j,targetHeight:g,elemWidth:r,elemHeight:q,offset:l,my:h.my,at:h.at}))});(h.stackfix!==false&&e.fn.stackfix&&t.stackfix());(e.isFunction(h.by)?h.by.call(this,o):t.offset(o))})};e.ui.position={fit:{left:function(g,h){var i=g.left+h.elemWidth-e(window).width()-e(window).scrollLeft();g.left=i>0?g.left-i:Math.max(0,g.left)},top:function(g,h){var i=g.top+h.elemHeight-e(window).height()-e(window).scrollTop();g.top=i>0?g.top-i:Math.max(0,g.top)}},flip:{left:function(h,i){if(i.at[0]=="center"){return}var j=h.left+i.elemWidth-e(window).width()-e(window).scrollLeft(),g=i.my[0]=="left"?-i.elemWidth:i.my[0]=="right"?i.elemWidth:0,k=-2*i.offset[0];h.left+=h.left<0?g+i.targetWidth+k:j>0?g-i.targetWidth+k:0},top:function(h,j){if(j.at[1]=="center"){return}var k=h.top+j.elemHeight-e(window).height()-e(window).scrollTop(),g=j.my[1]=="top"?-j.elemHeight:j.my[1]=="bottom"?j.elemHeight:0,i=j.at[1]=="top"?j.targetHeight:-j.targetHeight,l=-2*j.offset[1];h.top+=h.top<0?g+j.targetHeight+l:k>0?g+i+l:0}}};e.fn.extend({_offset:e.fn.offset,offset:function(g){return !g?this._offset():this.each(function(){var j=e(this),i=/relative|static/.test(j.css("position")),h=j.css("display")=="none";(i&&j.css("position","relative"));(h&&j.show());var k=j.offset(),l={left:parseInt(j.css("left"),10),top:parseInt(j.css("top"),10)};l.left=!isNaN(l.left)?l.left:i?0:this.offsetLeft;l.top=!isNaN(l.top)?l.top:i?0:this.offsetTop;if(g.left||g.left===0){j.css("left",g.left-k.left+l.left)}if(g.top||g.top===0){j.css("top",g.top-k.top+l.top)}(h&&j.hide())})}})})(jQuery);(function(a){a.fn.stackfix=a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(c){c=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},c||{});var d=function(e){return e&&e.constructor==Number?e+"px":e},b='<iframe class="ui-stackfix" frameborder="0" tabindex="-1" src="'+c.src+'" style="display:block;position:absolute;z-index:-1;'+(c.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(c.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":d(c.top))+";left:"+(c.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":d(c.left))+";width:"+(c.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":d(c.width))+";height:"+(c.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":d(c.height))+';"/>';return this.each(function(){if(a("> iframe.ui-stackfix",this).length==0){this.insertBefore(document.createElement(b),this.firstChild)}})}:function(){return this}})(jQuery);(function(a){a.widget("ui.droppable",{_init:function(){var c=this.options,b=c.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(b)?b:function(e){return e.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[c.scope]=a.ui.ddmanager.droppables[c.scope]||[];a.ui.ddmanager.droppables[c.scope].push(this);(c.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++){if(b[c]==this){b.splice(c,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setData:function(b,c){if(b=="accept"){this.accept=a.isFunction(c)?c:function(e){return e.is(c)}}a.widget.prototype._setData.apply(this,arguments)},_activate:function(c){var b=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(b&&this._trigger("activate",c,this.ui(b)))},_deactivate:function(c){var b=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(b&&this._trigger("deactivate",c,this.ui(b)))},_over:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",c,this.ui(b))}},_out:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",c,this.ui(b))}},_drop:function(c,d){var b=d||a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return false}var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=a.data(this,"droppable");if(f.options.greedy&&a.ui.intersect(b,a.extend(f,{offset:f.element.offset()}),f.options.tolerance)){e=true;return false}});if(e){return false}if(this.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",c,this.ui(b));return this.element}return false},ui:function(b){return{draggable:(b.currentItem||b.element),helper:b.helper,position:b.position,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8a1",eventPrefix:"drop",defaults:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"}});a.ui.intersect=function(q,j,o){if(!j.offset){return false}var e=(q.positionAbs||q.position.absolute).left,d=e+q.helperProportions.width,n=(q.positionAbs||q.position.absolute).top,m=n+q.helperProportions.height;var g=j.offset.left,c=g+j.proportions.width,p=j.offset.top,k=p+j.proportions.height;switch(o){case"fit":return(g<e&&d<c&&p<n&&m<k);break;case"intersect":return(g<e+(q.helperProportions.width/2)&&d-(q.helperProportions.width/2)<c&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);break;case"pointer":var h=((q.positionAbs||q.position.absolute).left+(q.clickOffset||q.offset.click).left),i=((q.positionAbs||q.position.absolute).top+(q.clickOffset||q.offset.click).top),f=a.ui.isOver(i,h,p,g,j.proportions.height,j.proportions.width);return f;break;case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((e>=g&&e<=c)||(d>=g&&d<=c)||(e<g&&d>c));break;default:return false;break}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,g){var b=a.ui.ddmanager.droppables[e.options.scope];var f=g?g.type:null;var h=(e.currentItem||e.element).find(":data(droppable)").andSelf();droppablesLoop:for(var d=0;d<b.length;d++){if(b[d].options.disabled||(e&&!b[d].accept.call(b[d].element[0],(e.currentItem||e.element)))){continue}for(var c=0;c<h.length;c++){if(h[c]==b[d].element[0]){b[d].proportions.height=0;continue droppablesLoop}}b[d].visible=b[d].element.css("display")!="none";if(!b[d].visible){continue}b[d].offset=b[d].element.offset();b[d].proportions={width:b[d].element[0].offsetWidth,height:b[d].element[0].offsetHeight};if(f=="mousedown"){b[d]._activate.call(b[d],g)}}},drop:function(b,c){var d=false;a.each(a.ui.ddmanager.droppables[b.options.scope],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)){d=this._drop.call(this,c)}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(b.currentItem||b.element))){this.isout=1;this.isover=0;this._deactivate.call(this,c)}});return d},drag:function(b,c){if(b.options.refreshPositions){a.ui.ddmanager.prepareOffsets(b,c)}a.each(a.ui.ddmanager.droppables[b.options.scope],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var e=a.ui.intersect(b,this,this.options.tolerance);var g=!e&&this.isover==1?"isout":(e&&this.isover==0?"isover":null);if(!g){return}var f;if(this.options.greedy){var d=this.element.parents(":data(droppable):eq(0)");if(d.length){f=a.data(d[0],"droppable");f.greedyChild=(g=="isover"?1:0)}}if(f&&g=="isover"){f.isover=0;f.isout=1;f._out.call(f,c)}this[g]=1;this[g=="isout"?"isover":"isout"]=0;this[g=="isover"?"_over":"_out"].call(this,c);if(f&&g=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}})}}})(jQuery);(function(a){a.widget("ui.draggable",a.extend({},a.ui.mouse,{_init:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(b);if(!this.handle){return false}return true},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;(c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt));if(c.containment){this._setContainment()}this._trigger("start",b);this._cacheHelperProportions();if(a.ui.ddmanager&&!c.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b)}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var c=this._uiHash();this._trigger("drag",b,c);this.position=c.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,b)}return false},_mouseStop:function(c){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,c)}if(this.dropped){d=this.dropped;this.dropped=false}if((this.options.revert=="invalid"&&!d)||(this.options.revert=="valid"&&d)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d))){var b=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){b._trigger("stop",c);b._clear()})}else{this._trigger("stop",c);this._clear()}return false},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target){c=true}});return c},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c])):(d.helper=="clone"?this.element.clone():this.element);if(!b.parents("body").length){b.appendTo((d.appendTo=="parent"?this.element[0].parentNode:d.appendTo))}if(b[0]!=this.element[0]&&!(/(fixed|absolute)/).test(b.css("position"))){b.css("position","absolute")}return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(e.containment)&&e.containment.constructor!=Array){var c=a(e.containment)[0];if(!c){return}var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else{if(e.containment.constructor==Array){this.containment=e.containment}}},_convertPositionTo:function(f,h){if(!h){h=this.position}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))}},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);if(b=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,offset:this.positionAbs}}}));a.extend(a.ui.draggable,{version:"1.8a1",eventPrefix:"drag",defaults:a.extend({},a.ui.mouse.defaults,{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false})});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,e){var d=a(this).data("draggable"),f=d.options,b=a.extend({},e,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var g=a.data(this,"sortable");if(g&&!g.options.disabled){d.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",c,b)}})},stop:function(c,e){var d=a(this).data("draggable"),b=a.extend({},e,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(c);this.instance.options.helper=this.instance.options._helper;if(d.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",c,b)}})},drag:function(c,f){var e=a(this).data("draggable"),b=this;var d=function(i){var n=this.offset.click.top,m=this.offset.click.left;var g=this.positionAbs.top,k=this.positionAbs.left;var j=i.height,l=i.width;var p=i.top,h=i.left;return a.ui.isOver(g+n,k+m,p,h,j,l)};a.each(e.sortables,function(g){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(b).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};c.target=this.instance.currentItem[0];this.instance._mouseCapture(c,true);this.instance._mouseStart(c,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",c);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}if(this.instance.currentItem){this.instance._mouseDrag(c)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",c,this.instance._uiHash(this.instance));this.instance._mouseStop(c,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}e._trigger("fromSortable",c);e.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(c,d){var b=a("body"),e=a(this).data("draggable").options;if(b.css("cursor")){e._cursor=b.css("cursor")}b.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._cursor){a("body").css("cursor",d._cursor)}}});a.ui.plugin.add("draggable","iframeFix",{start:function(b,c){var d=a(this).data("draggable").options;a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},stop:function(b,c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("opacity")){e._opacity=b.css("opacity")}b.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._opacity){a(c.helper).css("opacity",d._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(c,d){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset()}},drag:function(d,e){var c=a(this).data("draggable"),f=c.options,b=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x"){if((c.overflowOffset.top+c.scrollParent[0].offsetHeight)-d.pageY<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop+f.scrollSpeed}else{if(d.pageY-c.overflowOffset.top<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop-f.scrollSpeed}}}if(!f.axis||f.axis!="y"){if((c.overflowOffset.left+c.scrollParent[0].offsetWidth)-d.pageX<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft+f.scrollSpeed}else{if(d.pageX-c.overflowOffset.left<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft-f.scrollSpeed}}}}else{if(!f.axis||f.axis!="x"){if(d.pageY-a(document).scrollTop()<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed)}else{if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed)}}}if(!f.axis||f.axis!="y"){if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed)}else{if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}}}}if(b!==false&&a.ui.ddmanager&&!f.dropBehaviour){a.ui.ddmanager.prepareOffsets(c,d)}}});a.ui.plugin.add("draggable","snap",{start:function(c,d){var b=a(this).data("draggable"),e=b.options;b.snapElements=[];a(e.snap.constructor!=String?(e.snap.items||":data(draggable)"):e.snap).each(function(){var g=a(this);var f=g.offset();if(this!=b.element[0]){b.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:f.top,left:f.left})}})},drag:function(v,p){var g=a(this).data("draggable"),q=g.options;var z=q.snapTolerance;var y=p.offset.left,x=y+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(var w=g.snapElements.length-1;w>=0;w--){var u=g.snapElements[w].left,n=u+g.snapElements[w].width,m=g.snapElements[w].top,B=m+g.snapElements[w].height;if(!((u-z<y&&y<n+z&&m-z<f&&f<B+z)||(u-z<y&&y<n+z&&m-z<e&&e<B+z)||(u-z<x&&x<n+z&&m-z<f&&f<B+z)||(u-z<x&&x<n+z&&m-z<e&&e<B+z))){if(g.snapElements[w].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,v,a.extend(g._uiHash(),{snapItem:g.snapElements[w].item})))}g.snapElements[w].snapping=false;continue}if(q.snapMode!="inner"){var c=Math.abs(m-e)<=z;var A=Math.abs(B-f)<=z;var j=Math.abs(u-x)<=z;var k=Math.abs(n-y)<=z;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(A){p.position.top=g._convertPositionTo("relative",{top:B,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:u-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}var h=(c||A||j||k);if(q.snapMode!="outer"){var c=Math.abs(m-f)<=z;var A=Math.abs(B-e)<=z;var j=Math.abs(u-y)<=z;var k=Math.abs(n-x)<=z;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(A){p.position.top=g._convertPositionTo("relative",{top:B-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:u}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[w].snapping&&(c||A||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,v,a.extend(g._uiHash(),{snapItem:g.snapElements[w].item})))}g.snapElements[w].snapping=(c||A||j||k||h)}}});a.ui.plugin.add("draggable","stack",{start:function(b,c){var e=a(this).data("draggable").options;var d=a.makeArray(a(e.stack.group)).sort(function(g,f){return(parseInt(a(g).css("zIndex"),10)||e.stack.min)-(parseInt(a(f).css("zIndex"),10)||e.stack.min)});a(d).each(function(f){this.style.zIndex=e.stack.min+f});this[0].style.zIndex=e.stack.min+d.length}});a.ui.plugin.add("draggable","zIndex",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("zIndex")){e._zIndex=b.css("zIndex")}b.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._zIndex){a(c.helper).css("zIndex",d._zIndex)}}})})(jQuery);(function(c){var b={maxHeight:"maxHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable"},a="ui-dialog ui-widget ui-widget-content ui-corner-all ";c.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var l=this,m=l.options,j=m.title||l.originalTitle||"&nbsp;",e=c.ui.dialog.getTitleId(l.element),k=(l.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass(a+m.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:m.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){(m.closeOnEscape&&n.keyCode&&n.keyCode==c.ui.keyCode.ESCAPE&&l.close(n))}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(n){l.moveToTop(false,n)}),g=l.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(k),f=(l.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(k),i=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).mousedown(function(n){n.stopPropagation()}).click(function(n){l.close(n);return false}).appendTo(f),h=(l.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(m.closeText).appendTo(i),d=c("<span></span>").addClass("ui-dialog-title").attr("id",e).html(j).prependTo(f);f.find("*").add(f).disableSelection();(m.draggable&&c.fn.draggable&&l._makeDraggable());(m.resizable&&c.fn.resizable&&l._makeResizable());l._createButtons(m.buttons);l._isOpen=false;(m.stackfix&&c.fn.stackfix&&k.stackfix());(m.autoOpen&&l.open())},destroy:function(){var d=this;(d.overlay&&d.overlay.destroy());d.uiDialog.hide();d.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");d.uiDialog.remove();(d.originalTitle&&d.element.attr("title",d.originalTitle));return d},close:function(f){var d=this;if(false===d._trigger("beforeClose",f)){return}(d.overlay&&d.overlay.destroy());d.uiDialog.unbind("keypress.ui-dialog");(d.options.hide?d.uiDialog.hide(d.options.hide,function(){d._trigger("close",f)}):d.uiDialog.hide()&&d._trigger("close",f));c.ui.dialog.overlay.resize();d._isOpen=false;if(d.options.modal){var e=0;c(".ui-dialog").each(function(){if(this!=d.uiDialog[0]){e=Math.max(e,c(this).css("z-index"))}});c.ui.dialog.maxZ=e}return d},isOpen:function(){return this._isOpen},moveToTop:function(h,g){var d=this,f=d.options;if((f.modal&&!h)||(!f.stack&&!f.modal)){return d._trigger("focus",g)}if(f.zIndex>c.ui.dialog.maxZ){c.ui.dialog.maxZ=f.zIndex}(d.overlay&&d.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=++c.ui.dialog.maxZ));var e={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")};d.uiDialog.css("z-index",++c.ui.dialog.maxZ);d.element.attr(e);d._trigger("focus",g);return d},open:function(){if(this._isOpen){return}var e=this,f=e.options,d=e.uiDialog;e.overlay=f.modal?new c.ui.dialog.overlay(e):null;(d.next().length&&d.appendTo("body"));e._size();e._position(f.position);d.show(f.show);e.moveToTop(true);(f.modal&&d.bind("keypress.ui-dialog",function(i){if(i.keyCode!=c.ui.keyCode.TAB){return}var h=c(":tabbable",this),j=h.filter(":first"),g=h.filter(":last");if(i.target==g[0]&&!i.shiftKey){j.focus(1);return false}else{if(i.target==j[0]&&i.shiftKey){g.focus(1);return false}}}));c([]).add(d.find(".ui-dialog-content :tabbable:first")).add(d.find(".ui-dialog-buttonpane :tabbable:first")).add(d).filter(":first").focus();e._trigger("open");e._isOpen=true;return e},_createButtons:function(g){var f=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");f.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof g=="object"&&g!==null&&c.each(g,function(){return !(d=true)}));if(d){c.each(g,function(h,i){c('<button type="button"></button>').addClass("ui-state-default ui-corner-all").text(h).click(function(){i.apply(f.element[0],arguments)}).hover(function(){c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).focus(function(){c(this).addClass("ui-state-focus")}).blur(function(){c(this).removeClass("ui-state-focus")}).appendTo(e)});e.appendTo(f.uiDialog)}},_makeDraggable:function(){var d=this,f=d.options,g=c(document),e;d.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(h){e=f.height;c(this).height(c(this).height()).addClass("ui-dialog-dragging");d._trigger("dragStart",h)},drag:function(h){d._trigger("drag",h)},stop:function(h,i){f.position=[i.position.left-g.scrollLeft(),i.position.top-g.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(e);d._trigger("dragStop",h);c.ui.dialog.overlay.resize()}})},_makeResizable:function(g){g=(g===undefined?this.options.resizable:g);var d=this,f=d.options,e=typeof g=="string"?g:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:d._minHeight(),handles:e,start:function(h){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",h)},resize:function(h){d._trigger("resize",h)},stop:function(h){c(this).removeClass("ui-dialog-resizing");f.height=c(this).height();f.width=c(this).width();d._trigger("resizeStop",h);c.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var d=this.options;return(d.height=="auto"?d.minHeight:Math.min(d.minHeight,d.height))},_position:function(d){var e=[],f=[0,0];if(typeof d=="string"||"0" in d){e=d.split?d.split(" "):[d[0],d[1]];if(e.length==1){e[1]=e[0]}c.each(["left","top"],function(h,g){if(+e[h]==e[h]){f[h]=e[h];e[h]=g}})}else{if("left" in d){e[0]="left";f[0]=d.left}else{if("right" in d){e[0]="right";f[0]=-d.right}}if("top" in d){e[1]="top";f[1]=d.top}else{if("bottom" in d){e[1]="bottom";f[1]=-d.bottom}}}this.uiDialog.position({my:e.join(" "),at:e.join(" "),offset:f.join(" "),of:window,collision:"fit"})},_setData:function(g,h){var e=this,d=e.uiDialog,f=false;(b[g]&&d.data(b[g],h));switch(g){case"buttons":e._createButtons(h);break;case"closeText":e.uiDialogTitlebarCloseText.text(h);break;case"dialogClass":d.removeClass(e.options.dialogClass).addClass(a+h);break;case"draggable":(h?e._makeDraggable():d.draggable("destroy"));break;case"height":f=true;break;case"minHeight":f=true;break;case"position":e._position(h);break;case"resizable":var i=d.is(":data(resizable)");(i&&!h&&d.resizable("destroy"));(i&&typeof h=="string"&&d.resizable("option","handles",h));(i||e._makeResizable(h));break;case"title":c(".ui-dialog-title",e.uiDialogTitlebar).html(h||"&nbsp;");break;case"width":f=true;break}c.widget.prototype._setData.apply(e,arguments);(f&&e._size())},_size:function(){var e=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var d=this.uiDialog.css({height:"auto",width:e.width}).height();this.element.css(e.height=="auto"?{minHeight:Math.max(e.minHeight-d,0),height:"auto"}:{height:Math.max(e.height-d,0)});(this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight()))}});c.extend(c.ui.dialog,{version:"1.8a1",defaults:{autoOpen:true,stackfix:false,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},uuid:0,maxZ:0,getTitleId:function(d){return"ui-dialog-title-"+(d.attr("id")||++this.uuid)},overlay:function(d){this.$el=c.ui.dialog.overlay.create(d)}});c.extend(c.ui.dialog.overlay,{instances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(d){return d+".dialog-overlay"}).join(" "),create:function(e){if(this.instances.length===0){setTimeout(function(){if(c.ui.dialog.overlay.instances.length){c(document).bind(c.ui.dialog.overlay.events,function(f){var g=c(f.target).parents(".ui-dialog").css("zIndex")||0;return(g>c.ui.dialog.overlay.maxZ)})}},1);c(document).bind("keydown.dialog-overlay",function(f){(e.options.closeOnEscape&&f.keyCode&&f.keyCode==c.ui.keyCode.ESCAPE&&e.close(f))});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var d=c("<div></div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});(e.options.stackfix&&c.fn.stackfix&&d.stackfix());this.instances.push(d);return d},destroy:function(d){this.instances.splice(c.inArray(this.instances,d),1);if(this.instances.length===0){c([document,window]).unbind(".dialog-overlay")}d.remove();var e=0;c.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});this.maxZ=e},height:function(){if(c.browser.msie&&c.browser.version<7){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(e<d){return c(window).height()+"px"}else{return e+"px"}}else{return c(document).height()+"px"}},width:function(){if(c.browser.msie&&c.browser.version<7){var d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);var e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(d<e){return c(window).width()+"px"}else{return d+"px"}}else{return c(document).width()+"px"}},resize:function(){var d=c([]);c.each(c.ui.dialog.overlay.instances,function(){d=d.add(this)});d.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);jQuery.effects||(function(d){d.effects={version:"1.8a1",save:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.data("ec.storage."+h[f],g[0].style[h[f]])}}},restore:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.css(h[f],g.data("ec.storage."+h[f]))}}},setMode:function(f,g){if(g=="toggle"){g=f.is(":hidden")?"show":"hide"}return g},getBaseline:function(g,h){var i,f;switch(g[0]){case"top":i=0;break;case"middle":i=0.5;break;case"bottom":i=1;break;default:i=g[0]/h.height}switch(g[1]){case"left":f=0;break;case"center":f=0.5;break;case"right":f=1;break;default:f=g[1]/h.width}return{x:f,y:i}},createWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent()}var g={width:f.outerWidth(true),height:f.outerHeight(true),"float":f.css("float")};f.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var j=f.parent();if(f.css("position")=="static"){j.css({position:"relative"});f.css({position:"relative"})}else{var i=f.css("top");if(isNaN(parseInt(i,10))){i="auto"}var h=f.css("left");if(isNaN(parseInt(h,10))){h="auto"}j.css({position:f.css("position"),top:i,left:h,zIndex:f.css("z-index")}).show();f.css({position:"relative",top:0,left:0})}j.css(g);return j},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(g,i,f,h){h=h||{};d.each(i,function(k,j){unit=g.cssUnit(j);if(unit[0]>0){h[j]=unit[0]*f+unit[1]}});return h},animateClass:function(h,i,k,j){var f=(typeof k=="function"?k:(j?j:null));var g=(typeof k=="string"?k:null);return this.each(function(){var q={};var o=d(this);var p=o.attr("style")||"";if(typeof p=="object"){p=p.cssText}if(h.toggle){o.hasClass(h.toggle)?h.remove=h.toggle:h.add=h.toggle}var l=d.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(h.add){o.addClass(h.add)}if(h.remove){o.removeClass(h.remove)}var m=d.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(h.add){o.removeClass(h.add)}if(h.remove){o.addClass(h.remove)}for(var r in m){if(typeof m[r]!="function"&&m[r]&&r.indexOf("Moz")==-1&&r.indexOf("length")==-1&&r.indexOf("scrollbar")==-1&&m[r]!=l[r]&&(r.match(/color/i)||(!r.match(/color/i)&&!isNaN(parseInt(m[r],10))))&&(l.position!="static"||(l.position=="static"&&!r.match(/left|top|bottom|right/)))){q[r]=m[r]}}o.animate(q,i,g,function(){if(typeof d(this).attr("style")=="object"){d(this).attr("style")["cssText"]="";d(this).attr("style")["cssText"]=p}else{d(this).attr("style",p)}if(h.add){d(this).addClass(h.add)}if(h.remove){d(this).removeClass(h.remove)}if(f){f.apply(this,arguments)}})})}};function c(g,f,h,i){if(typeof g=="object"){i=f;h=null;f=g;g=f.effect}if(d.isFunction(f)){i=f;h=null;f={}}if(typeof f=="number"){i=h;h=f;f={}}f=f||{};h=h||f.duration;h=d.fx.off?0:typeof h=="number"?h:d.fx.speeds[h]||d.fx.speeds._default;i=i||f.complete;return[g,f,h,i]}d.fn.extend({effect:function(i,h,k,l){var g=c.apply(this,arguments),j={options:g[1],duration:g[2],callback:g[3]},f=d.effects[i];return f&&!d.fx.off?f.call(this,j):this},_show:d.fn.show,show:function(g){if(!g||typeof g=="number"||d.fx.speeds[g]){return this._show.apply(this,arguments)}else{var f=c.apply(this,arguments);f[1].mode="show";return this.effect.apply(this,f)}},_hide:d.fn.hide,hide:function(g){if(!g||typeof g=="number"||d.fx.speeds[g]){return this._hide.apply(this,arguments)}else{var f=c.apply(this,arguments);f[1].mode="hide";return this.effect.apply(this,f)}},__toggle:d.fn.toggle,toggle:function(g){if(!g||typeof g=="number"||d.fx.speeds[g]||typeof g=="boolean"||d.isFunction(g)){return this.__toggle.apply(this,arguments)}else{var f=c.apply(this,arguments);f[1].mode="toggle";return this.effect.apply(this,f)}},_addClass:d.fn.addClass,addClass:function(g,f,i,h){return f?d.effects.animateClass.apply(this,[{add:g},f,i,h]):this._addClass(g)},_removeClass:d.fn.removeClass,removeClass:function(g,f,i,h){return f?d.effects.animateClass.apply(this,[{remove:g},f,i,h]):this._removeClass(g)},_toggleClass:d.fn.toggleClass,toggleClass:function(h,g,f,j,i){if(typeof g=="boolean"||g===undefined){if(!f){return this._toggleClass(h,g)}else{return d.effects.animateClass.apply(this,[(g?{add:h}:{remove:h}),f,j,i])}}else{return d.effects.animateClass.apply(this,[{toggle:h},g,f,j])}},switchClass:function(f,h,g,j,i){return d.effects.animateClass.apply(this,[{add:h,remove:f},g,j,i])},cssUnit:function(f){var g=this.css(f),h=[];d.each(["em","px","%","pt"],function(j,k){if(g.indexOf(k)>0){h=[parseFloat(g),k]}});return h}});d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(g,f){d.fx.step[f]=function(h){if(h.state===0){h.start=e(h.elem,f);h.end=b(h.end)}h.elem.style[f]="rgb("+Math.max(Math.min(parseInt((h.pos*(h.end[0]-h.start[0]))+h.start[0],10),255),0)+","+Math.max(Math.min(parseInt((h.pos*(h.end[1]-h.start[1]))+h.start[1],10),255),0)+","+Math.max(Math.min(parseInt((h.pos*(h.end[2]-h.start[2]))+h.start[2],10),255),0)+")"}});function b(g){var f;if(g&&g.constructor==Array&&g.length==3){return g}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(g)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(g)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(g)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(g)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(f=/rgba\(0, 0, 0, 0\)/.exec(g)){return a.transparent}return a[d.trim(g).toLowerCase()]}function e(h,f){var g;do{g=d.curCSS(h,f);if(g!=""&&g!="transparent"||d.nodeName(h,"body")){break}f="backgroundColor"}while(h=h.parentNode);return b(g)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};d.easing.jswing=d.easing.swing;d.extend(d.easing,{def:"easeOutQuad",swing:function(g,h,f,j,i){return d.easing[d.easing.def](g,h,f,j,i)},easeInQuad:function(g,h,f,j,i){return j*(h/=i)*h+f},easeOutQuad:function(g,h,f,j,i){return -j*(h/=i)*(h-2)+f},easeInOutQuad:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h+f}return -j/2*((--h)*(h-2)-1)+f},easeInCubic:function(g,h,f,j,i){return j*(h/=i)*h*h+f},easeOutCubic:function(g,h,f,j,i){return j*((h=h/i-1)*h*h+1)+f},easeInOutCubic:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h+f}return j/2*((h-=2)*h*h+2)+f},easeInQuart:function(g,h,f,j,i){return j*(h/=i)*h*h*h+f},easeOutQuart:function(g,h,f,j,i){return -j*((h=h/i-1)*h*h*h-1)+f},easeInOutQuart:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h+f}return -j/2*((h-=2)*h*h*h-2)+f},easeInQuint:function(g,h,f,j,i){return j*(h/=i)*h*h*h*h+f},easeOutQuint:function(g,h,f,j,i){return j*((h=h/i-1)*h*h*h*h+1)+f},easeInOutQuint:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h*h+f}return j/2*((h-=2)*h*h*h*h+2)+f},easeInSine:function(g,h,f,j,i){return -j*Math.cos(h/i*(Math.PI/2))+j+f},easeOutSine:function(g,h,f,j,i){return j*Math.sin(h/i*(Math.PI/2))+f},easeInOutSine:function(g,h,f,j,i){return -j/2*(Math.cos(Math.PI*h/i)-1)+f},easeInExpo:function(g,h,f,j,i){return(h==0)?f:j*Math.pow(2,10*(h/i-1))+f},easeOutExpo:function(g,h,f,j,i){return(h==i)?f+j:j*(-Math.pow(2,-10*h/i)+1)+f},easeInOutExpo:function(g,h,f,j,i){if(h==0){return f}if(h==i){return f+j}if((h/=i/2)<1){return j/2*Math.pow(2,10*(h-1))+f}return j/2*(-Math.pow(2,-10*--h)+2)+f},easeInCirc:function(g,h,f,j,i){return -j*(Math.sqrt(1-(h/=i)*h)-1)+f},easeOutCirc:function(g,h,f,j,i){return j*Math.sqrt(1-(h=h/i-1)*h)+f},easeInOutCirc:function(g,h,f,j,i){if((h/=i/2)<1){return -j/2*(Math.sqrt(1-h*h)-1)+f}return j/2*(Math.sqrt(1-(h-=2)*h)+1)+f},easeInElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return -(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f},easeOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return h*Math.pow(2,-10*i)*Math.sin((i*l-j)*(2*Math.PI)/k)+m+f},easeInOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l/2)==2){return f+m}if(!k){k=l*(0.3*1.5)}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}if(i<1){return -0.5*(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f}return h*Math.pow(2,-10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k)*0.5+m+f},easeInBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*(h/=j)*h*((i+1)*h-i)+f},easeOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*((h=h/j-1)*h*((i+1)*h+i)+1)+f},easeInOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}if((h/=j/2)<1){return k/2*(h*h*(((i*=(1.525))+1)*h-i))+f}return k/2*((h-=2)*h*(((i*=(1.525))+1)*h+i)+2)+f},easeInBounce:function(g,h,f,j,i){return j-d.easing.easeOutBounce(g,i-h,0,j,i)+f},easeOutBounce:function(g,h,f,j,i){if((h/=i)<(1/2.75)){return j*(7.5625*h*h)+f}else{if(h<(2/2.75)){return j*(7.5625*(h-=(1.5/2.75))*h+0.75)+f}else{if(h<(2.5/2.75)){return j*(7.5625*(h-=(2.25/2.75))*h+0.9375)+f}else{return j*(7.5625*(h-=(2.625/2.75))*h+0.984375)+f}}}},easeInOutBounce:function(g,h,f,j,i){if(h<i/2){return d.easing.easeInBounce(g,h*2,0,j,i)*0.5+f}return d.easing.easeOutBounce(g,h*2-i,0,j,i)*0.5+j*0.5+f}})})(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var d=a(this),c=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.options.mode||"show"),e={backgroundColor:d.css("backgroundColor")};if(f=="hide"){e.opacity=0}a.effects.save(d,c);d.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(e,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){(f=="hide"&&d.hide());a.effects.restore(d,c);(f=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"));(b.callback&&b.callback.apply(this,arguments));d.dequeue()}})})}})(jQuery);(function(c,b,d){function a(h){for(var f=0,e=b.length,j=h.target,g;f<e;f++){g=b[f];if(g!==j&&!(g.contains?g.contains(j):g.compareDocumentPosition?g.compareDocumentPosition(j)&16:1)){c.event.trigger(d,h,g)}}}c.event.special[d]={setup:function(){var e=b.length;if(!e){c.event.add(document,"click",a)}if(c.inArray(this,b)<0){b[e]=this}},teardown:function(){var e=c.inArray(this,b);if(e>=0){b.splice(e,1);if(!b.length){jQuery(this).unbind("click",a)}}}};c.fn[d]=function(e){return e?this.bind(d,e):this.trigger(d)}})(jQuery,[],"outerClick");(function(a){a.fn.autogrow=function(b){return this.each(function(){new a.autogrow(this,b)})};a.autogrow=function(b,c){this.options=c||{};this.dummy=null;this.interval=null;this.line_height=this.options.lineHeight||parseInt(a(b).css("line-height"),10);this.min_height=this.options.minHeight||parseInt(a(b).css("min-height"),10);this.max_height=this.options.maxHeight||parseInt(a(b).css("max-height"),10);this.textarea=a(b);this.expand_tolerance=(!isNaN(this.options.expandTolerance)&&this.options.expandTolerance>-1)?this.options.expandTolerance:4;if(isNaN(this.line_height)){this.line_height=0}if(isNaN(this.min_height)||this.min_height===0){this.min_height=this.textarea.height()}this.init()};a.autogrow.fn=a.autogrow.prototype={autogrow:"1.2.4"};a.autogrow.fn.extend=a.autogrow.extend=a.extend;a.autogrow.fn.extend({init:function(){var b=this;this.textarea.css({overflow:"hidden",display:"block"});this.textarea.bind("focus",function(){b.startExpand();b.checkExpand(0,true)}).bind("blur",function(){b.stopExpand()}).bind("update",function(){b.checkExpand(0,true)});b.checkExpand(0,true)},startExpand:function(){var b=this;this.checkExpand(this.line_height,true);this.interval=window.setInterval(function(){b.checkExpand(b.line_height,false)},400)},stopExpand:function(){clearInterval(this.interval);this.checkExpand(0,true)},checkExpand:function(d,c){if(this.dummy===null){this.dummy=a("<div></div>");this.dummy.css({"font-size":this.textarea.css("font-size"),"font-family":this.textarea.css("font-family"),width:this.textarea.css("width"),"padding-top":this.textarea.css("padding-top"),"padding-bottom":this.textarea.css("padding-bottom"),"padding-left":this.textarea.css("padding-left"),"padding-right":this.textarea.css("padding-right"),"line-height":this.line_height+"px","overflow-x":"hidden",position:"absolute",top:0,left:-9999}).appendTo("body")}else{this.dummy.show()}var b=this.textarea.val().toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;")+".";if(a.browser.msie){b=b.replace(/\n/g,"<BR>")}else{b=b.replace(/\n/g,"<br>")}if(c||this.dummy.html()!=b){this.dummy.html(b);if(this.max_height>0&&(this.dummy.height()+(this.expand_tolerance*this.line_height)>this.max_height)){this.textarea.css("overflow-y","auto");this.textarea.css("height",this.max_height);if(this.textarea.height()<this.max_height){this.textarea.animate({height:(this.max_height+(this.expand_tolerance*this.line_height))+"px"},100)}}else{this.textarea.css("overflow-y","hidden");if(this.textarea.height()<this.dummy.height()+(this.expand_tolerance*this.line_height)||(this.dummy.height()<this.textarea.height())){if(this.dummy.height()<this.min_height){this.textarea.animate({height:(this.min_height+(this.expand_tolerance*this.line_height))+"px"},100)}else{this.textarea.animate({height:(this.dummy.height()+(this.expand_tolerance*this.line_height))+"px"},100)}}}}this.dummy.hide()}})})(jQuery);(function(a){var b=function(c){var f=null,e=a("#"+c),d=a("input[name="+c+"]");if(e!==undefined){f=e}else{if(d!==undefined){f=d}}return f};a.fn.autotab_magic=function(c){for(var d=0;d<this.length;d++){var f=d+1,e=d-1;if(d>0&&f<this.length){a(this[d]).autotab({target:a(this[f]),previous:a(this[e])})}else{if(d>0){a(this[d]).autotab({previous:a(this[e])})}else{a(this[d]).autotab({target:a(this[f])})}}if(c!==null&&(isNaN(c)&&c==a(this[d]).attr("id"))||(!isNaN(c)&&c==d)){a(this[d]).focus()}}};a.fn.autotab_filter=function(c){var e={format:"all",uppercase:false,lowercase:false,nospace:false,pattern:null};if(typeof c=="string"||typeof c=="function"){e.format=c}else{a.extend(e,c)}for(var d=0;d<this.length;d++){a(this[d]).bind("keyup",function(g){var h=this.value,f;switch(e.format){case"text":f=new RegExp("[0-9]+","g");h=h.replace(f,"");break;case"alpha":f=new RegExp("[^a-zA-Z]+","g");h=h.replace(f,"");break;case"number":case"numeric":f=new RegExp("[^0-9]+","g");h=h.replace(f,"");break;case"alphanumeric":f=new RegExp("[^0-9a-zA-Z]+","g");h=h.replace(f,"");break;case"custom":f=new RegExp(e.pattern,"g");h=h.replace(f,"");break;default:if(typeof e.format=="function"){h=e.format(h)}break}if(e.nospace){f=new RegExp("[ ]+","g");h=h.replace(f,"")}if(e.uppercase){h=h.toUpperCase()}if(e.lowercase){h=h.toLowerCase()}if(h!=this.value){this.value=h}})}};a.fn.autotab=function(c){var f={format:"all",maxlength:2147483647,uppercase:false,lowercase:false,nospace:false,target:null,previous:null,pattern:null},d=a(this).attr("maxlength"),e=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];a.extend(f,c);if(typeof f.target=="string"){f.target=b(f.target)}if(typeof f.previous=="string"){f.previous=b(f.previous)}if(f.maxlength==2147483647&&d!=2147483647){f.maxlength=d}else{if(f.maxlength>0){a(this).attr("maxlength",f.maxlength)}else{f.target=null}}if(f.format!="all"){a(this).autotab_filter(f)}return a(this).bind("keydown",function(g){if(g.which==8&&this.value.length===0&&f.previous){f.previous.focus().val(f.previous.val())}}).bind("keyup",function(g){if(g.which!=8){var h=a(this).val();if(a.inArray(g.which,e)==-1&&h.length==f.maxlength&&f.target){f.target.focus()}}})}})(jQuery);jQuery.bt={};(function($){jQuery.fn.bt=function(content,options){var contentSelect=false;jQuery.bt.defaults={trigger:"hover",clickAnywhereToClose:true,closeWhenOthersOpen:false,shrinkToFit:false,width:"200px",padding:"10px",spikeGirth:10,spikeLength:15,overlap:0,overlay:false,killTitle:true,textzIndex:9999,boxzIndex:9998,wrapperzIndex:9997,offsetParent:null,positions:["most"],fill:"rgb(255, 255, 102)",windowMargin:10,strokeWidth:1,strokeStyle:"#000",cornerRadius:5,centerPointX:".5",centerPointY:".5",shadow:false,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"#000",shadowOverlap:false,noShadowOpts:{strokeStyle:"#999"},cssClass:"",cssStyles:{},activeClass:"bt-active",contentSelector:"$(this).attr('title')",ajaxPath:null,ajaxError:"<strong>ERROR:</strong> <em>%error</em>",ajaxLoading:"<blink>Loading...</blink>",ajaxData:{},ajaxType:"GET",ajaxCache:true,ajaxOpts:{},preBuild:function(){},preShow:function(box){},showTip:function(box){$(box).show()},postShow:function(box){},preHide:function(box){},hideTip:function(box,callback){$(box).hide();callback()},postHide:function(){},hoverIntentOpts:{interval:300,timeout:500}};jQuery.bt.options={};function numb(num){return parseInt(num,10)||0}if(typeof content!="string"){contentSelect=true;options=content;content=false}function shadowSupport(){try{var userAgent=navigator.userAgent.toLowerCase();if(/webkit/.test(userAgent)){return true}else{if(/gecko|mozilla/.test(userAgent)&&parseFloat(userAgent.match(/firefox\/(\d+(?:\.\d+)+)/)[1])>=3.1){return true}}}catch(err){}return false}function round5(num,strokeWidth){var ret;strokeWidth=numb(strokeWidth);if(strokeWidth%2){ret=num}else{ret=Math.round(num-0.5)+0.5}return ret}function arrayRemove(arr,elem){var x,newArr=[];for(x in arr){if(arr[x]!=elem){newArr.push(arr[x])}}return newArr}function canvasSupport(){var canvas_compatible=false;try{canvas_compatible=!!(document.createElement("canvas").getContext("2d"))}catch(e){canvas_compatible=!!(document.createElement("canvas").getContext)}return canvas_compatible}if(jQuery.fn.hoverIntent&&jQuery.bt.defaults.trigger=="hover"){jQuery.bt.defaults.trigger="hoverIntent"}return this.each(function(index){var opts=jQuery.extend(false,jQuery.bt.defaults,jQuery.bt.options,options),ajaxTimeout=false;opts.spikeLength=numb(opts.spikeLength);opts.spikeGirth=numb(opts.spikeGirth);opts.overlap=numb(opts.overlap);function drawIt(points,strokeWidth){this.moveTo(points[0].x,points[0].y);for(var i=1;i<points.length;i++){if(points[i-1].type=="arcStart"){this.quadraticCurveTo(round5(points[i].x,strokeWidth),round5(points[i].y,strokeWidth),round5(points[(i+1)%points.length].x,strokeWidth),round5(points[(i+1)%points.length].y,strokeWidth));i++}else{this.lineTo(round5(points[i].x,strokeWidth),round5(points[i].y,strokeWidth))}}}function betweenPoint(point1,point2,dist){var y,x;if(point1.x==point2.x){y=point1.y<point2.y?point1.y+dist:point1.y-dist;return{x:point1.x,y:y}}else{if(point1.y==point2.y){x=point1.x<point2.x?point1.x+dist:point1.x-dist;return{x:x,y:point1.y}}}}function centerPoint(arcStart,corner,arcEnd){var x=corner.x==arcStart.x?arcEnd.x:arcStart.x;var y=corner.y==arcStart.y?arcEnd.y:arcStart.y;var startAngle,endAngle;if(arcStart.x<arcEnd.x){if(arcStart.y>arcEnd.y){startAngle=(Math.PI/180)*180;endAngle=(Math.PI/180)*90}else{startAngle=(Math.PI/180)*90;endAngle=0}}else{if(arcStart.y>arcEnd.y){startAngle=(Math.PI/180)*270;endAngle=(Math.PI/180)*180}else{startAngle=0;endAngle=(Math.PI/180)*270}}return{x:x,y:y,type:"center",startAngle:startAngle,endAngle:endAngle}}function findIntersectY(r1x1,r1y1,r1x2,r1y2,x){if(r1y1==r1y2){return{x:x,y:r1y1}}var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var y=r1m*x+r1b;return{x:x,y:y}}function findIntersectX(r1x1,r1y1,r1x2,r1y2,y){if(r1x1==r1x2){return{x:r1x1,y:y}}var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var x=(y-r1b)/r1m;return{x:x,y:y}}function findIntersect(r1x1,r1y1,r1x2,r1y2,r2x1,r2y1,r2x2,r2y2){if(r2x1==r2x2){return findIntersectY(r1x1,r1y1,r1x2,r1y2,r2x1)}if(r2y1==r2y2){return findIntersectX(r1x1,r1y1,r1x2,r1y2,r2y1)}var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var r2m=(r2y1-r2y2)/(r2x1-r2x2);var r2b=r2y1-(r2m*r2x1);var x=(r2b-r1b)/(r1m-r2m);var y=r1m*x+r1b;return{x:x,y:y}}if(opts.killTitle){$(this).find("[title]").andSelf().each(function(){if(!$(this).attr("bt-xTitle")){$(this).attr("bt-xTitle",$(this).attr("title")).attr("title","")}})}if(typeof opts.trigger=="string"){opts.trigger=[opts.trigger]}if(opts.trigger[0]=="hoverIntent"){var hoverOpts=jQuery.extend(opts.hoverIntentOpts,{over:function(){this.btOn()},out:function(){this.btOff()}});$(this).hoverIntent(hoverOpts)}else{if(opts.trigger[0]=="hover"){$(this).hover(function(){this.btOn()},function(){this.btOff()})}else{if(opts.trigger[0]=="now"){if($(this).hasClass("bt-active")){this.btOff()}else{this.btOn()}}else{if(opts.trigger[0]=="none"){}else{if(opts.trigger.length>1&&opts.trigger[0]!=opts.trigger[1]){$(this).bind(opts.trigger[0],function(){this.btOn()}).bind(opts.trigger[1],function(){this.btOff()})}else{$(this).bind(opts.trigger[0],function(){if($(this).hasClass("bt-active")){this.btOff()}else{this.btOn()}})}}}}}this.btOn=function(){if(typeof $(this).data("bt-box")=="object"){this.btOff()}opts.preBuild.apply(this);$(jQuery.bt.vars.closeWhenOpenStack).btOff();$(this).addClass("bt-active "+opts.activeClass);if(contentSelect&&opts.ajaxPath===null){if(opts.killTitle){$(this).attr("title",$(this).attr("bt-xTitle"))}content=$.isFunction(opts.contentSelector)?opts.contentSelector.apply(this):eval(opts.contentSelector);if(opts.killTitle){$(this).attr("title","")}}if(opts.ajaxPath!==null&&content===false){var url="";if(typeof opts.ajaxPath=="object"){url=eval(opts.ajaxPath[0]);url+=opts.ajaxPath[1]?" "+opts.ajaxPath[1]:""}else{url=opts.ajaxPath}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var cacheData=opts.ajaxCache?$(document.body).data("btCache-"+url.replace(/\./g,"")):null;if(typeof cacheData=="string"){content=selector?$("<div/>").append(cacheData.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):cacheData}else{var target=this;var ajaxOpts=jQuery.extend(false,{type:opts.ajaxType,data:opts.ajaxData,cache:opts.ajaxCache,url:url,complete:function(XMLHttpRequest,textStatus){if(textStatus=="success"||textStatus=="notmodified"){if(opts.ajaxCache){$(document.body).data("btCache-"+url.replace(/\./g,""),XMLHttpRequest.responseText)}ajaxTimeout=false;content=selector?$("<div/>").append(XMLHttpRequest.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):XMLHttpRequest.responseText}else{if(textStatus=="timeout"){ajaxTimeout=true}content=opts.ajaxError.replace(/%error/g,XMLHttpRequest.statusText)}if($(target).hasClass("bt-active")){target.btOn()}}},opts.ajaxOpts);jQuery.ajax(ajaxOpts);content=opts.ajaxLoading}}var shadowMarginX=0;var shadowMarginY=0;var shadowShiftX=0;var shadowShiftY=0;if(opts.shadow&&!shadowSupport()){opts.shadow=false;jQuery.extend(opts,opts.noShadowOpts)}if(opts.shadow){if(opts.shadowBlur>Math.abs(opts.shadowOffsetX)){shadowMarginX=opts.shadowBlur*2}else{shadowMarginX=opts.shadowBlur+Math.abs(opts.shadowOffsetX)}shadowShiftX=(opts.shadowBlur-opts.shadowOffsetX)>0?opts.shadowBlur-opts.shadowOffsetX:0;if(opts.shadowBlur>Math.abs(opts.shadowOffsetY)){shadowMarginY=opts.shadowBlur*2}else{shadowMarginY=opts.shadowBlur+Math.abs(opts.shadowOffsetY)}shadowShiftY=(opts.shadowBlur-opts.shadowOffsetY)>0?opts.shadowBlur-opts.shadowOffsetY:0}var pos,top,left,offsetParent;if(opts.offsetParent){var offsetParentPos=offsetParent.offset();offsetParent=$(opts.offsetParent);pos=$(this).offset();top=numb(pos.top)-numb(offsetParentPos.top)+numb($(this).css("margin-top"))-shadowShiftY;left=numb(pos.left)-numb(offsetParentPos.left)+numb($(this).css("margin-left"))-shadowShiftX}else{offsetParent=($(this).css("position")=="absolute")?$(this).parents().eq(0).offsetParent():$(this).offsetParent();pos=$(this).btPosition();top=numb(pos.top)+numb($(this).css("margin-top"))-shadowShiftY;left=numb(pos.left)+numb($(this).css("margin-left"))-shadowShiftX}var width=$(this).btOuterWidth(),height=$(this).outerHeight();if(typeof content=="object"){var original=content;var clone=$(original).clone(true).show();var origClones=$(original).data("bt-clones")||[];origClones.push(clone);$(original).data("bt-clones",origClones);$(clone).data("bt-orig",original);$(this).data("bt-content-orig",{original:original,clone:clone});content=clone}if(typeof content==="null"||content===""){return}var $text=$('<div class="bt-content"></div>').append(content).css({padding:opts.padding,position:"absolute",width:(opts.shrinkToFit?"auto":opts.width),zIndex:opts.textzIndex,left:shadowShiftX,top:shadowShiftY}).css(opts.cssStyles);var $box=$('<div class="bt-wrapper"></div>').append($text).addClass(opts.cssClass).css({position:"absolute",width:opts.width,zIndex:opts.wrapperzIndex,visibility:"hidden"}).appendTo(offsetParent);if(jQuery.fn.bgiframe){$text.bgiframe();$box.bgiframe()}$(this).data("bt-box",$box);var scrollTop=numb($(document).scrollTop()),scrollLeft=numb($(document).scrollLeft()),docWidth=numb($(window).width()),docHeight=numb($(window).height()),winRight=scrollLeft+docWidth,winBottom=scrollTop+docHeight,space={},thisOffset=$(this).offset(),textOutHeight=numb($text.outerHeight()),textOutWidth=numb($text.btOuterWidth()),position;space.top=thisOffset.top-scrollTop;space.bottom=docHeight-((thisOffset+height)-scrollTop);space.left=thisOffset.left-scrollLeft;space.right=docWidth-((thisOffset.left+width)-scrollLeft);if(opts.positions.constructor==String){opts.positions=opts.positions.replace(/ /,"").split(",")}if(opts.positions[0]=="most"){position="top";for(var pig in space){position=space[pig]>space[position]?pig:position}}else{for(var x in opts.positions){position=opts.positions[x];if((position=="left"||position=="right")&&space[position]>textOutWidth+opts.spikeLength){break}else{if((position=="top"||position=="bottom")&&space[position]>textOutHeight+opts.spikeLength){break}}}}var horiz=left+((width-textOutWidth)*0.5),vert=top+((height-textOutHeight)*0.5),points=[],textTop,textLeft,textRight,textBottom,textTopSpace,textBottomSpace,textLeftSpace,textRightSpace,crossPoint,textCenter,spikePoint,yShift,xShift;switch(position){case"top":$text.css("margin-bottom",opts.spikeLength+"px");$box.css({top:(top-$text.outerHeight(true))+opts.overlap,left:horiz});textRightSpace=(winRight-opts.windowMargin)-($text.offset().left+$text.btOuterWidth(true));xShift=shadowShiftX;if(textRightSpace<0){$box.css("left",(numb($box.css("left"))+textRightSpace)+"px");xShift-=textRightSpace}textLeftSpace=($text.offset().left+numb($text.css("margin-left")))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css("left",(numb($box.css("left"))-textLeftSpace)+"px");xShift+=textLeftSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={y:textBottom+opts.spikeLength,x:((textRight-textLeft)*0.5)+xShift,type:"spike"};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textBottom);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>(textRight-opts.spikeGirth/2)-opts.cornerRadius?(textRight-opts.spikeGirth/2)-opts.CornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x-(opts.spikeGirth/2),y:textBottom,type:"join"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:crossPoint.x+(opts.spikeGirth/2),y:textBottom,type:"join"};points[points.length]=spikePoint;break;case"left":$text.css("margin-right",opts.spikeLength+"px");$box.css({top:vert+"px",left:((left-$text.btOuterWidth(true))+opts.overlap)+"px"});textBottomSpace=(winBottom-opts.windowMargin)-($text.offset().top+$text.outerHeight(true));yShift=shadowShiftY;if(textBottomSpace<0){$box.css("top",(numb($box.css("top"))+textBottomSpace)+"px");yShift-=textBottomSpace}textTopSpace=($text.offset().top+numb($text.css("margin-top")))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css("top",(numb($box.css("top"))-textTopSpace)+"px");yShift+=textTopSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:textRight+opts.spikeLength,y:((textBottom-textTop)*0.5)+yShift,type:"spike"};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textRight);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>(textBottom-opts.spikeGirth/2)-opts.cornerRadius?(textBottom-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.y;points[points.length]={x:textRight,y:crossPoint.y+opts.spikeGirth/2,type:"join"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:crossPoint.y-opts.spikeGirth/2,type:"join"};points[points.length]=spikePoint;break;case"bottom":$text.css("margin-top",opts.spikeLength+"px");$box.css({top:(top+height)-opts.overlap,left:horiz});textRightSpace=(winRight-opts.windowMargin)-($text.offset().left+$text.btOuterWidth(true));xShift=shadowShiftX;if(textRightSpace<0){$box.css("left",(numb($box.css("left"))+textRightSpace)+"px");xShift-=textRightSpace}textLeftSpace=($text.offset().left+numb($text.css("margin-left")))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css("left",(numb($box.css("left"))-textLeftSpace)+"px");xShift+=textLeftSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:((textRight-textLeft)*0.5)+xShift,y:shadowShiftY,type:"spike"};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textTop);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>(textRight-opts.spikeGirth/2)-opts.cornerRadius?(textRight-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textTop,type:"join"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:crossPoint.x-(opts.spikeGirth/2),y:textTop,type:"join"};points[points.length]=spikePoint;break;case"right":$text.css("margin-left",(opts.spikeLength+"px"));$box.css({top:vert+"px",left:((left+width)-opts.overlap)+"px"});textBottomSpace=(winBottom-opts.windowMargin)-($text.offset().top+$text.outerHeight(true));yShift=shadowShiftY;if(textBottomSpace<0){$box.css("top",(numb($box.css("top"))+textBottomSpace)+"px");yShift-=textBottomSpace}textTopSpace=($text.offset().top+numb($text.css("margin-top")))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css("top",(numb($box.css("top"))-textTopSpace)+"px");yShift+=textTopSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:shadowShiftX,y:((textBottom-textTop)*0.5)+yShift,type:"spike"};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textLeft);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>(textBottom-opts.spikeGirth/2)-opts.cornerRadius?(textBottom-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.y;points[points.length]={x:textLeft,y:crossPoint.y-opts.spikeGirth/2,type:"join"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:crossPoint.y+opts.spikeGirth/2,type:"join"};points[points.length]=spikePoint;break}var canvas=document.createElement("canvas");$(canvas).attr("width",(numb($text.btOuterWidth(true))+opts.strokeWidth*2+shadowMarginX)).attr("height",(numb($text.outerHeight(true))+opts.strokeWidth*2+shadowMarginY)).appendTo($box).css({position:"absolute",zIndex:opts.boxzIndex});if(typeof(G_vmlCanvasManager)!="undefined"){canvas=G_vmlCanvasManager.initElement(canvas)}if(opts.cornerRadius>0){var newPoints=[],newPoint;for(var i=0;i<points.length;i++){if(points[i].type=="corner"){newPoint=betweenPoint(points[i],points[(i-1)%points.length],opts.cornerRadius);newPoint.type="arcStart";newPoints[newPoints.length]=newPoint;newPoints[newPoints.length]=points[i];newPoint=betweenPoint(points[i],points[(i+1)%points.length],opts.cornerRadius);newPoint.type="arcEnd";newPoints[newPoints.length]=newPoint}else{newPoints[newPoints.length]=points[i]}}points=newPoints}var ctx=canvas.getContext("2d");if(opts.shadow&&opts.shadowOverlap!==true){var shadowOverlap=numb(opts.shadowOverlap);switch(position){case"top":if(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap>0){$box.css("top",(numb($box.css("top"))-(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap)))}break;case"right":if(shadowShiftX-shadowOverlap>0){$box.css("left",(numb($box.css("left"))+shadowShiftX-shadowOverlap))}break;case"bottom":if(shadowShiftY-shadowOverlap>0){$box.css("top",(numb($box.css("top"))+shadowShiftY-shadowOverlap))}break;case"left":if(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap>0){$box.css("left",(numb($box.css("left"))-(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap)))}break}}drawIt.apply(ctx,[points],opts.strokeWidth);ctx.fillStyle=opts.fill;if(opts.shadow){ctx.shadowOffsetX=opts.shadowOffsetX;ctx.shadowOffsetY=opts.shadowOffsetY;ctx.shadowBlur=opts.shadowBlur;ctx.shadowColor=opts.shadowColor}ctx.closePath();ctx.fill();if(opts.strokeWidth>0){ctx.shadowColor="rgba(0, 0, 0, 0)";ctx.lineWidth=opts.strokeWidth;ctx.strokeStyle=opts.strokeStyle;ctx.beginPath();drawIt.apply(ctx,[points],opts.strokeWidth);ctx.closePath();ctx.stroke()}opts.preShow.apply(this,[$box[0]]);$box.css({display:"none",visibility:"visible"});opts.showTip.apply(this,[$box[0]]);if(opts.overlay){var overlay=$('<div class="bt-overlay"></div>').css({position:"absolute",backgroundColor:"blue",top:top,left:left,width:width,height:height,opacity:".2"}).appendTo(offsetParent);$(this).data("overlay",overlay)}if((opts.ajaxPath!==null&&opts.ajaxCache===false)||ajaxTimeout){content=false}if(opts.clickAnywhereToClose){jQuery.bt.vars.clickAnywhereStack.push(this);$(document).click(jQuery.bt.docClick)}if(opts.closeWhenOthersOpen){jQuery.bt.vars.closeWhenOpenStack.push(this)}opts.postShow.apply(this,[$box[0]])};this.btOff=function(){var box=$(this).data("bt-box");opts.preHide.apply(this,[box]);var i=this;i.btCleanup=function(){var box=$(i).data("bt-box");var contentOrig=$(i).data("bt-content-orig");var overlay=$(i).data("bt-overlay");if(typeof box=="object"){$(box).remove();$(i).removeData("bt-box")}if(typeof contentOrig=="object"){var clones=$(contentOrig.original).data("bt-clones");$(contentOrig).data("bt-clones",arrayRemove(clones,contentOrig.clone))}if(typeof overlay=="object"){$(overlay).remove();$(i).removeData("bt-overlay")}jQuery.bt.vars.clickAnywhereStack=arrayRemove(jQuery.bt.vars.clickAnywhereStack,i);jQuery.bt.vars.closeWhenOpenStack=arrayRemove(jQuery.bt.vars.closeWhenOpenStack,i);$(i).removeClass("bt-active "+opts.activeClass);opts.postHide.apply(i)};opts.hideTip.apply(this,[box,i.btCleanup])};var refresh=this.btRefresh=function(){this.btOff();this.btOn()}})};jQuery.fn.btPosition=function(){function num(elem,prop){return elem[0]&&parseInt(jQuery.curCSS(elem[0],prop,true),10)||0}var left=0,top=0,results;if(this[0]){var offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].tagName)?{top:0,left:0}:offsetParent.offset();offset.top-=num(this,"marginTop");offset.left-=num(this,"marginLeft");parentOffset.top+=num(offsetParent,"borderTopWidth");parentOffset.left+=num(offsetParent,"borderLeftWidth");results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}}return results};jQuery.fn.btOuterWidth=function(margin){function num(elem,prop){return elem[0]&&parseInt(jQuery.curCSS(elem[0],prop,true),10)||0}return this.innerWidth()+num(this,"borderLeftWidth")+num(this,"borderRightWidth")+(margin?num(this,"marginLeft")+num(this,"marginRight"):0)};jQuery.fn.btOn=function(){console.log(this);return this.each(function(index){if(jQuery.isFunction(this.btOn)){this.btOn()}})};jQuery.fn.btOff=function(){return this.each(function(index){if(jQuery.isFunction(this.btOff)){this.btOff()}})};jQuery.bt.vars={clickAnywhereStack:[],closeWhenOpenStack:[]};jQuery.bt.docClick=function(e){if(typeof(e)==="undefined"){e=window.event}if(!$(e.target).parents().andSelf().filter(".bt-wrapper, .bt-active").length&&jQuery.bt.vars.clickAnywhereStack.length){$(jQuery.bt.vars.clickAnywhereStack).btOff();$(document).unbind("click",jQuery.bt.docClick)}}})(jQuery);(function(c){var e=(function(){if(!c.browser.msie){return false}var h=document.createElement("div");try{h.style.setExpression("width","0+0")}catch(g){return false}return true})();function d(g,h){return parseInt(c.css(g,h),10)||0}function b(g){g=parseInt(g,10).toString(16);return(g.length<2)?"0"+g:g}function f(i){for(;i&&i.nodeName.toLowerCase()!="html";i=i.parentNode){var g=c.css(i,"backgroundColor");if(g=="rgba(0, 0, 0, 0)"){continue}if(g.indexOf("rgb")>=0){var h=g.match(/\d+/g);return"#"+b(h[0])+b(h[1])+b(h[2])}if(g&&g!="transparent"){return g}}return"#ffffff"}function a(j,g,h){switch(j){case"round":return Math.round(h*(1-Math.cos(Math.asin(g/h))));case"cool":return Math.round(h*(1+Math.cos(Math.asin(g/h))));case"sharp":return Math.round(h*(1-Math.cos(Math.acos(g/h))));case"bite":return Math.round(h*(Math.cos(Math.asin((h-g-1)/h))));case"slide":return Math.round(h*(Math.atan2(g,h/g)));case"jut":return Math.round(h*(Math.atan2(h,(h-g-1))));case"curl":return Math.round(h*(Math.atan(g)));case"tear":return Math.round(h*(Math.cos(g)));case"wicked":return Math.round(h*(Math.tan(g)));case"long":return Math.round(h*(Math.sqrt(g)));case"sculpt":return Math.round(h*(Math.log((h-g-1),h)));case"dog":return(g&1)?(g+1):h;case"dog2":return(g&2)?(g+1):h;case"dog3":return(g&3)?(g+1):h;case"fray":return(g%2)*h;case"notch":return h;case"bevel":return g+1}}c.fn.corner=function(k){if(this.length===0){if(!c.isReady&&this.selector){var t=this.selector,p=this.context;c(function(){c(t,p).corner(k)})}return this}k=(k||"").toLowerCase();var h=/keep/.test(k),l=((k.match(/cc:(#[0-9a-f]+)/)||[])[1]),q=((k.match(/sc:(#[0-9a-f]+)/)||[])[1]),j=parseInt((k.match(/(\d+)px/)||[])[1],10)||10,r=/round|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dog/,m=((k.match(r)||["round"])[0]),n={T:0,B:1},g={TL:/top|tl/.test(k),TR:/top|tr/.test(k),BL:/bottom|bl/.test(k),BR:/bottom|br/.test(k)};if(!g.TL&&!g.TR&&!g.BL&&!g.BR){g={TL:1,TR:1,BL:1,BR:1}}var i=document.createElement("div");i.style.overflow="hidden";i.style.height="1px";i.style.backgroundColor=q||"transparent";i.style.borderStyle="solid";return this.each(function(y){var u={T:parseInt(c.css(this,"paddingTop"),10)||0,R:parseInt(c.css(this,"paddingRight"),10)||0,B:parseInt(c.css(this,"paddingBottom"),10)||0,L:parseInt(c.css(this,"paddingLeft"),10)||0},A=c.curCSS(this,"height");if(typeof(this.style.zoom)!=="undefined"){this.style.zoom=1}if(!h){this.style.border="none"}i.style.borderColor=l||f(this.parentNode);for(var v in n){var B=n[v];if((B&&(g.BL||g.BR))||(!B&&(g.TL||g.TR))){i.style.borderStyle="none "+(g[v+"R"]?"solid":"none")+" none "+(g[v+"L"]?"solid":"none");var C=document.createElement("div");c(C).addClass("jquery-corner");var o=C.style;B?this.appendChild(C):this.insertBefore(C,this.firstChild);if(B&&A!="auto"){if(c.css(this,"position")=="static"){this.style.position="relative"}o.position="absolute";o.bottom=o.left=o.padding=o.margin="0";if(e){o.setExpression("width","this.parentNode.offsetWidth")}else{o.width="100%"}}else{if(!B&&c.browser.msie){if(c.css(this,"position")=="static"){this.style.position="relative"}o.position="absolute";o.top=o.left=o.right=o.padding=o.margin="0";if(e){var D=d(this,"borderLeftWidth")+d(this,"borderRightWidth");o.setExpression("width","this.parentNode.offsetWidth - "+D+'+ "px"')}else{o.width="100%"}}else{o.margin=!B?"-"+u.T+"px -"+u.R+"px "+(u.T-j)+"px -"+u.L+"px":(u.B-j)+"px -"+u.R+"px -"+u.B+"px -"+u.L+"px"}}for(var x=0;x<j;x++){var E=Math.max(0,a(m,x,j)),z=i.cloneNode(false);z.style.borderWidth="0 "+(g[v+"R"]?E:0)+"px 0 "+(g[v+"L"]?E:0)+"px";B?C.appendChild(z):C.insertBefore(z,C.firstChild)}}}})};c.fn.uncorner=function(){c("div.jquery-corner",this).remove();return this}})(jQuery);(function(b){var a;b.fn.dropShadow=function(c){var d=b.extend({left:4,top:4,blur:2,opacity:".5",color:"black",swap:false},c);var e=b([]);this.not(".dropShadow").each(function(){a=parseInt(b(this).css("z-index"),10);var r=b(this),n=[],g=(d.blur<=0)?0:d.blur,q=(g===0)?d.opacity:d.opacity/(g*8),t=(d.swap)?a:a+1,f=(d.swap)?a+1:a,v;if(this.id){v=this.id+"_dropShadow"}else{v="ds"+(1+Math.floor(9999*Math.random()))}b.data(this,"shadowId",v);b.data(this,"shadowOptions",c);r.attr("shadowId",v).css("zIndex",t);if(r.css("position")!="absolute"){r.css({position:"relative",zoom:1})}var u=r.css("backgroundColor");if(u=="rgba(0, 0, 0, 0)"){u="transparent"}if(u!="transparent"||r.css("backgroundImage")!="none"||this.nodeName=="SELECT"||this.nodeName=="INPUT"||this.nodeName=="TEXTAREA"){n[0]=b("<div></div>").css("background",d.color)}else{n[0]=r.clone().removeAttr("id").removeAttr("name").removeAttr("shadowId").css("color",d.color)}n[0].addClass("dropShadow").css({height:r.outerHeight(),left:g,opacity:q,position:"absolute",top:g,width:r.outerWidth(),zIndex:f});var p=(8*g)+1;for(var o=1;o<p;o++){n[o]=n[0].clone()}var l=1,m=g;while(m>0){n[l].css({left:m*2,top:0});n[l+1].css({left:m*4,top:m*2});n[l+2].css({left:m*2,top:m*4});n[l+3].css({left:0,top:m*2});n[l+4].css({left:m*3,top:m});n[l+5].css({left:m*3,top:m*3});n[l+6].css({left:m,top:m*3});n[l+7].css({left:m,top:m});l+=8;m--}var h=b("<div></div>").attr("id",v).addClass("dropShadow").css({left:r.position().left+d.left-g,marginTop:r.css("marginTop"),marginRight:r.css("marginRight"),marginBottom:r.css("marginBottom"),marginLeft:r.css("marginLeft"),position:"absolute",top:r.position().top+d.top-g,zIndex:f});for(o=0;o<p;o++){h.append(n[o])}r.after(h);e=e.add(h);b(window).resize(function(){try{h.css({left:r.position().left+d.left-g,top:r.position().top+d.top-g})}catch(i){}});a+=2});return this.pushStack(e)};b.fn.redrawShadow=function(){this.removeShadow();return this.each(function(){var c=b.data(this,"shadowOptions");b(this).dropShadow(c)})};b.fn.removeShadow=function(){return this.each(function(){var c=b(this).shadowId();b("div#"+c).remove()})};b.fn.shadowId=function(){return b.data(this[0],"shadowId")};b(function(){var c="<style type='text/css' media='print'>";c+=".dropShadow{visibility:hidden;}</style>";b("head").append(c)})})(jQuery);$.extend(jQuery.fn,{count:function(a){console?console.count(this):"";return this},dir:function(a){console?console.dir(this):"";return this},log:function(a){console?console.log("%s: %o",a,this):"";return this},profile:function(a){console?console.profile(this):"";return this},time:function(b,a){if(console){if(a===true||a===false){console?(a?console.timeEnd(b):console.time(b)):""}else{console.timeEnd(b).time(a)}}return this},trace:function(a){console?console.trace(this):"";return this}});$.fn.makeFloatingDiv=function(a){$("#floatdiv").remove();var f=$(this).css("z-index"),d=$("<div></div>"),c=$("<div></div>"),b={backgroundColor:"#000",border:"none",color:"#000",position:"absolute",width:"20em",zIndex:(f<10||f=="auto")?10:(parseInt(f,10)+1)},e=function(h,g){if(typeof(h.shadowId())=="undefined"){h.dropShadow();if(g!==false){$("#"+h.shadowId()+" div").corner("round 6px").dropShadow()}}else{h.redrawShadow();$("#"+h.shadowId()+" div").redrawShadow()}};if(typeof(a.classes)!="undefined"){$.each(a.classes,function(){d.addClass(this)})}if(typeof(a.id)=="undefined"){a.id="floatdiv"}if(typeof(a.position)=="undefined"){a.position="bl"}d.attr("id",a.id);if(typeof(a.borderColor)!="undefined"){b.backgroundColor=a.borderColor}if(typeof(a.round)=="undefined"){a.round=true}if(typeof(a.shadow)=="undefined"){a.shadow=true}switch(a.position){case"bl":$.extend(b,{left:$(this).position().left+1,top:$(this).position().top+$(this).outerHeight()-1});break;case"tl":$.extend(b,{left:$(this).position().left+1,top:$(this).position().top});break;case"br":$.extend(b,{left:$(this).position().left+$(this).outerWidth(),top:$(this).position().top+$(this).outerHeight()-1});break;case"tr":$.extend(b,{left:$(this).position().left+$(this).outerWidth(),top:$(this).position().top});break}if(typeof(a.css)!="undefined"){$.extend(b,a.css)}d.css(b);if(typeof(a.after)!="undefined"){if(a.after){$(this).parent().after(d)}else{$(this).append(d)}}else{$(this).append(d)}c.css({backgroundColor:(typeof(a.background)=="undefined")?"#fff":a.background,height:"100%",margin:"1px",padding:(typeof(a.innerPad)=="undefined")?"7px":a.innerPad+"px",width:parseInt(d.width(),10)-((typeof(a.innerPad)=="undefined")?16:(a.innerPad*2)+2)});d.append(c);if(a.round!==false){d.corner("round 6px");c.corner("round 6px")}if(a.shadow!==false){e(d,a.round)}return d};(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(q){var o=(q.type=="mouseover"?q.fromElement:q.toElement)||q.relatedTarget;while(o&&o!=this){try{console.log(o);console.log(o.parentNode);o=o.parentNode}catch(q){o=this}}if(o==this){return false}var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseover"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);(function(a){a.fn.iff=function(c){var b=!c||a.isFunction(c)&&!c.apply(this,Array.prototype.slice.call(arguments,1))?[]:this;return this.pushStack(b,"iff",c)}})(jQuery);jQuery.fn.extend({if_:function(a){if(jQuery.isFunction(a)){a=a.call(this)}this.if_CondMet=!!a;return this.pushStack(a?this:[])},else_:function(a){var b=this.end();return b.if_CondMet?b.pushStack([]):b.if_(arguments.length?a:1)}});(function(b){function a(d){var c=2;b.each(d,function(e,f){if(b.isFunction(f)){c=e;return false}});return c}(function(){var c=document.compareDocumentPosition?function(j,i){return j.compareDocumentPosition(i)&16}:function(j,i){return j!==i&&(j.contains?j.contains(i):true)},e=b.fn.live,g=b.fn.die;function f(j,i){return jQuery.event.proxy(j,function(k){if(this!==k.relatedTarget&&k.relatedTarget&&!c(this,k.relatedTarget)){k.type=i;j.apply(this,arguments)}})}var d={mouseenter:"mouseover",mouseleave:"mouseout"};b.fn.live=function(k){var m=this,j=arguments,i=a(j),l=j[i];b.each(k.split(" "),function(o,p){var n=l;if(d[p]){n=f(n,p);p=d[p]}j[0]=p;j[i]=n;e.apply(m,j)});return this};b.fn.die=function(j,i){if(/mouseenter|mouseleave/.test(j)){if(j=="mouseenter"){j=j.replace(/mouseenter/g,"mouseover")}if(j=="mouseleave"){j=j.replace(/mouseleave/g,"mouseout")}}g.call(this,j,i);return this};function h(k,i,j){return jQuery.event.proxy(k,function(n){var m=this.parentNode,l=(d[n.type])?n.relatedTarget:undefined;k.apply(this,arguments);while(m&&m!==j&&m!==n.relatedTarget){if(b.multiFilter(i,[m])[0]){k.apply(m,arguments)}m=m.parentNode}})}b.fn.bubbleLive=function(){var j=arguments,i=a(j);j[i]=h(j[i],this.selector,this.context);b.fn.live.apply(this,j)};b.fn.liveHover=function(j,i){return this.live("mouseenter",j).live("mouseleave",i)}})();(function(){b.support.bubblingChange=!(b.browser.msie||b.browser.safari);if(!b.support.bubblingChange){var e=b.fn.live,f=b.fn.die,d=function(g){return b.event.proxy(g,function(k){var j=b(k.target);if((k.type!=="keydown"||k.keyCode===13)&&j.is("input, textarea, select")){var l=j.data("changeVal"),h=j.is(":checkbox, :radio"),i;if(h&&j.is(":enabled")&&k.type==="click"){i=j.is(":checked");if((k.target.type!=="radio"||i===true)&&k.type!=="change"&&l!==i){k.type="change";j.trigger(k)}}else{if(!h){i=j.val();if(l!==undefined&&l!==i){k.type="change";j.trigger(k)}}}if(i!==undefined){j.data("changeVal",i)}}})},c=function(g){return b.event.proxy(g,function(j){if(j.type==="change"){var i=b(j.target),h=(i.is(":checkbox, :radio"))?i.is(":checked"):i.val();if(h===i.data("changeVal")){return false}i.data("changeVal",h)}g.apply(this,arguments)})};b.fn.live=function(k,j){var l=this,h=arguments,g=a(h),i=h[g];if(k.indexOf("change")!=-1){b(this.context).bind("click focusin focusout keydown",d(i));i=c(i)}h[g]=i;e.apply(l,h);return this};b.fn.die=function(h,g){if(h.indexOf("change")!=-1){b(this.context).unbind("click focusin focusout keydown",g)}f.apply(this,arguments);return this}}})();(function(){b.support.focusInOut=!!(b.browser.msie);if(!b.support.focusInOut){b.each({focus:"focusin",blur:"focusout"},function(f,e){b.event.special[e]={setup:function(){if(!this.addEventListener){return false}this.addEventListener(f,b.event.special[e].handler,true)},teardown:function(){if(!this.removeEventListener){return false}this.removeEventListener(f,b.event.special[e].handler,true)},handler:function(g){arguments[0]=b.event.fix(g);arguments[0].type=e;return b.event.handle.apply(this,arguments)}}})}var d=null,c;b(document).bind("focusin",function(g){var f=g.realTarget||g.target;if(d&&d!==f){g.type="focusout";b(d).trigger(g);g.type="focusin";g.target=f}d=f}).bind("focusout",function(f){d=null})})()})(jQuery);$.fn.toEm=function(a){a=jQuery.extend({scope:"body"},a);var c=parseInt(this[0],10);var d=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(a.scope);var b=d.height();d.remove();return(c/b).toFixed(8)+"em"};$.fn.toPx=function(a){a=jQuery.extend({scope:"body"},a);var c=parseFloat(this[0]);var d=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(a.scope);var b=d.height();d.remove();return Math.round(c*b)+"px"};(function(a){a.fn.lorem=function(d){a.fn.lorem.defaults={type:"paragraphs",amount:"3",ptags:true};var g=a.extend({},a.fn.lorem.defaults,d);var b=1;var c=10;var i=c-b+1;var h=g.amount;var f=new Array(10);f[1]="Nam quis nulla. Integer malesuada. In in enim a arcu imperdiet malesuada. Sed vel lectus. Donec odio urna, tempus molestie, porttitor ut, iaculis quis, sem. Phasellus rhoncus. Aenean id metus id velit ullamcorper pulvinar. Vestibulum fermentum tortor id mi. Pellentesque ipsum. Nulla non arcu lacinia neque faucibus fringilla. Nulla non lectus sed nisl molestie malesuada. Proin in tellus sit amet nibh dignissim sagittis. Vivamus luctus egestas leo. Maecenas sollicitudin. Nullam rhoncus aliquam metus. Etiam egestas wisi a erat.";f[2]="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nullam feugiat, turpis at pulvinar vulputate, erat libero tristique tellus, nec bibendum odio risus sit amet ante. Aliquam erat volutpat. Nunc auctor. Mauris pretium quam et urna. Fusce nibh. Duis risus. Curabitur sagittis hendrerit ante. Aliquam erat volutpat. Vestibulum erat nulla, ullamcorper nec, rutrum non, nonummy ac, erat. Duis condimentum augue id magna semper rutrum. Nullam justo enim, consectetuer nec, ullamcorper ac, vestibulum in, elit. Proin pede metus, vulputate nec, fermentum fringilla, vehicula vitae, justo. Fusce consectetuer risus a nunc. Aliquam ornare wisi eu metus. Integer pellentesque quam vel velit. Duis pulvinar.";f[3]="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Morbi gravida libero nec velit. Morbi scelerisque luctus velit. Etiam dui sem, fermentum vitae, sagittis id, malesuada in, quam. Proin mattis lacinia justo. Vestibulum facilisis auctor urna. Aliquam in lorem sit amet leo accumsan lacinia. Integer rutrum, orci vestibulum ullamcorper ultricies, lacus quam ultricies odio, vitae placerat pede sem sit amet enim. Phasellus et lorem id felis nonummy placerat. Fusce dui leo, imperdiet in, aliquam sit amet, feugiat eu, orci. Aenean vel massa quis mauris vehicula lacinia. Quisque tincidunt scelerisque libero. Maecenas libero. Etiam dictum tincidunt diam. Donec ipsum massa, ullamcorper in, auctor et, scelerisque sed, est. Suspendisse nisl. Sed convallis magna eu sem. Cras pede libero, dapibus nec, pretium sit amet, tempor quis, urna.";f[4]="Etiam posuere quam ac quam. Maecenas aliquet accumsan leo. Nullam dapibus fermentum ipsum. Etiam quis quam. Integer lacinia. Nulla est. Nulla turpis magna, cursus sit amet, suscipit a, interdum id, felis. Integer vulputate sem a nibh rutrum consequat. Maecenas lorem. Pellentesque pretium lectus id turpis. Etiam sapien elit, consequat eget, tristique non, venenatis quis, ante. Fusce wisi. Phasellus faucibus molestie nisl. Fusce eget urna. Curabitur vitae diam non enim vestibulum interdum. Nulla quis diam. Ut tempus purus at lorem.";f[5]="In sem justo, commodo ut, suscipit at, pharetra vitae, orci. Duis sapien nunc, commodo et, interdum suscipit, sollicitudin et, dolor. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam id dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Mauris dictum facilisis augue. Fusce tellus. Pellentesque arcu. Maecenas fermentum, sem in pharetra pellentesque, velit turpis volutpat ante, in pharetra metus odio a lectus. Sed elit dui, pellentesque a, faucibus vel, interdum nec, diam. Mauris dolor felis, sagittis at, luctus sed, aliquam non, tellus. Etiam ligula pede, sagittis quis, interdum ultricies, scelerisque eu, urna. Nullam at arcu a est sollicitudin euismod. Praesent dapibus. Duis bibendum, lectus ut viverra rhoncus, dolor nunc faucibus libero, eget facilisis enim ipsum id lacus. Nam sed tellus id magna elementum tincidunt.";f[6]="Morbi a metus. Phasellus enim erat, vestibulum vel, aliquam a, posuere eu, velit. Nullam sapien sem, ornare ac, nonummy non, lobortis a, enim. Nunc tincidunt ante vitae massa. Duis ante orci, molestie vitae, vehicula venenatis, tincidunt ac, pede. Nulla accumsan, elit sit amet varius semper, nulla mauris mollis quam, tempor suscipit diam nulla vel leo. Etiam commodo dui eget wisi. Donec iaculis gravida nulla. Donec quis nibh at felis congue commodo. Etiam bibendum elit eget erat.";f[7]="Praesent in mauris eu tortor porttitor accumsan. Mauris suscipit, ligula sit amet pharetra semper, nibh ante cursus purus, vel sagittis velit mauris vel metus. Aenean fermentum risus id tortor. Integer imperdiet lectus quis justo. Integer tempor. Vivamus ac urna vel leo pretium faucibus. Mauris elementum mauris vitae tortor. In dapibus augue non sapien. Aliquam ante. Curabitur bibendum justo non orci.";f[8]="Morbi leo mi, nonummy eget, tristique non, rhoncus non, leo. Nullam faucibus mi quis velit. Integer in sapien. Fusce tellus odio, dapibus id, fermentum quis, suscipit id, erat. Fusce aliquam vestibulum ipsum. Aliquam erat volutpat. Pellentesque sapien. Cras elementum. Nulla pulvinar eleifend sem. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque porta. Vivamus porttitor turpis ac leo.";f[9]="Maecenas ipsum velit, consectetuer eu, lobortis ut, dictum at, dui. In rutrum. Sed ac dolor sit amet purus malesuada congue. In laoreet, magna id viverra tincidunt, sem odio bibendum justo, vel imperdiet sapien wisi sed libero. Suspendisse sagittis ultrices augue. Mauris metus. Nunc dapibus tortor vel mi dapibus sollicitudin. Etiam posuere lacus quis dolor. Praesent id justo in neque elementum ultrices. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. In convallis. Fusce suscipit libero eget elit. Praesent vitae arcu tempor neque lacinia pretium. Morbi imperdiet, mauris ac auctor dictum, nisl ligula egestas nulla, et sollicitudin sem purus in lacus.";f[10]="Aenean placerat. In vulputate urna eu arcu. Aliquam erat volutpat. Suspendisse potenti. Morbi mattis felis at nunc. Duis viverra diam non justo. In nisl. Nullam sit amet magna in magna gravida vehicula. Mauris tincidunt sem sed arcu. Nunc posuere. Nullam lectus justo, vulputate eget, mollis sed, tempor sed, magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam neque. Curabitur ligula sapien, pulvinar a, vestibulum quis, facilisis vel, sapien. Nullam eget nisl. Donec vitae arcu.";function e(){var n="";for(var m=0;m<h;m++){rnd_number=Math.floor(Math.random()*i+b);if(d.ptags==true){n+="<p>"}n+=f[rnd_number];if(g.ptags==true){n+="</p>"}n+="\n\n"}switch(g.type){case"words":var r=g.amount;r=parseInt(r);var o=new Array();var j=new Array();j=n.split(" ");var t=0;var p=0;while(o.length<r){if(p>j.length){p=0;t++;if(t+1>f.length){t=0}j=f[t].split(" ");j[0]="\n\n"+j[0]}o.push(j[p]);p++}n=o.join(" ");break;case"characters":var k="";var q=g.amount;q=parseInt(q);var l=f.join("\n\n");while(k.length<q){k+=l}n=k.substring(0,q);break;case"paragraphs":break}return n}return this.each(function(){$this=a(this);var j=e();$this.html(j)})}})(jQuery);(function($){$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;options={id:"",nameSpace:"",root:"",previewInWindow:"",previewAutoRefresh:true,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParserPath:"",previewParserVar:"data",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(a,tag){var miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1]}})}return this.each(function(){function localize(data,inText){if(inText){return data.replace(/("|')~\//g,"$1"+options.root)}return data.replace(/^~\//,options.root)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath);options.previewTemplatePath=localize(options.previewTemplatePath);function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$.each(markupSet,function(){var button=this,t="",title,li,j,title=(button.key)?(button.name||"")+" [Ctrl+"+button.key+"]":(button.name||""),key=(button.key)?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+(i)+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu",function(){return false}).click(function(){return false}).mouseup(function(){if(button.call){eval(button.call)()}markup(button);return false}).hover(function(){$("> ul",this).css("display","block");$(document).one("click",function(){$("ul ul",header).css("display","none")})},function(){$("> ul",this).css("display","none")}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu))}}});levels.pop();return ul}function init(){var id="",nameSpace="";if(options.id){id='id="'+options.id+'"'}else{if($$.attr("id")){id='id="markItUp'+($$.attr("id").substr(0,1).toUpperCase())+($$.attr("id").substr(1))+'"'}}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"'}$$.wrap("<div "+nameSpace+"></div>");$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$('<div class="markItUpHeader"></div>').insertBefore($$);$(dropMenus(options.markupSet)).appendTo(header);footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&$.browser.safari!==true){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(e){var h=$$.height(),y=e.clientY,mouseMove,mouseUp;mouseMove=function(e){$$.css("height",Math.max(20,e.clientY+h-y)+"px");return false};mouseUp=function(e){$("html").unbind("mousemove",mouseMove).unbind("mouseup",mouseUp);return false};$("html").bind("mousemove",mouseMove).bind("mouseup",mouseUp)});footer.append(resizeHandle)}$$.keydown(keyPressed).keyup(keyPressed);$$.bind("insertion",function(e,settings){if(settings.target!==false){get()}if(textarea===$.markItUp.focused){markup(settings)}});$$.focus(function(){$.markItUp.focused=this})}function magicMarkups(string){if(string){string=string.toString();string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");if(altKey===true){return(b[1]!==undefined)?b[1]:b[0]}else{return(b[1]===undefined)?"":b[0]}});string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");if(abort===true){return false}value=prompt(b[0],(b[1])?b[1]:"");if(value===null){abort=true}return value});return string}return""}function prepare(action){if($.isFunction(action)){action=action(hash)}return magicMarkups(action)}function build(string){openWith=prepare(clicked.openWith);placeHolder=prepare(clicked.placeHolder);replaceWith=prepare(clicked.replaceWith);closeWith=prepare(clicked.closeWith);if(replaceWith!==""){block=openWith+replaceWith+closeWith}else{if(selection===""&&placeHolder!==""){block=openWith+placeHolder+closeWith}else{block=openWith+(string||selection)+closeWith}}return{block:block,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith}}function markup(button){var len,j,n,i;hash=clicked=button;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:(selection||""),caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if(ctrlKey===true&&shiftKey===true){prepare(clicked.beforeMultiInsert)}$.extend(hash,{line:1});if(ctrlKey===true&&shiftKey===true){lines=selection.split(/\r?\n/);for(j=0,n=lines.length,i=0;i<n;i++){if($.trim(lines[i])!==""){$.extend(hash,{line:++j,selection:lines[i]});lines[i]=build(lines[i]).block}else{lines[i]=""}}string={block:lines.join("\n")};start=caretPosition;len=string.block.length+(($.browser.opera)?n:0)}else{if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;len-=fixIeBug(string.block)}else{if(shiftKey===true){string=build(selection);start=caretPosition;len=string.block.length;len-=fixIeBug(string.block)}else{string=build(selection);start=caretPosition+string.block.length;len=0;start-=fixIeBug(string.block)}}}if((selection===""&&string.replaceWith==="")){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,len)}else{caretOffset=-1}get();$.extend(hash,{line:"",selection:selection});if(ctrlKey===true&&shiftKey===true){prepare(clicked.afterMultiInsert)}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview()}shiftKey=altKey=ctrlKey=abort=false}function fixOperaBug(string){if($.browser.opera){return string.length-string.replace(/\n*/g,"").length}return 0}function fixIeBug(string){if($.browser.msie){return string.length-string.replace(/\r*/g,"").length}return 0}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block}else{$$.val($$.val().substring(0,caretPosition)+block+$$.val().substring(caretPosition+selection.length,$$.val().length))}}function set(start,len){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&len===0){return false}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",len);range.select()}else{if(textarea.setSelectionRange){textarea.setSelectionRange(start,start+len)}}textarea.scrollTop=scrollPosition;textarea.focus()}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if($.browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();rangeCopy.moveToElementText(textarea);caretPosition=-1;while(rangeCopy.inRange(range)){rangeCopy.moveStart("character");caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart;selection=$$.val().substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow)}else{iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>');if(options.previewPosition=="after"){iFrame.insertAfter(footer)}else{iFrame.insertBefore(header)}previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]}}else{if(altKey===true){if(iFrame){iFrame.remove()}previewWindow.close();previewWindow=iFrame=false}}if(!options.previewAutoRefresh){refreshPreview()}}function refreshPreview(){if(previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open();previewWindow.document.write(renderPreview());previewWindow.document.close();previewWindow.document.documentElement.scrollTop=sp}if(options.previewInWindow){previewWindow.focus()}}function renderPreview(){phtml="<html><head></head><body>"+$$.val()+"</body></html>";return phtml}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=(!(e.altKey&&e.ctrlKey))?e.ctrlKey:false;if(e.type==="keydown"){if(ctrlKey===true){li=$("a[accesskey="+String.fromCharCode(e.keyCode)+"]",header).parent("li");if(li.length!==0){ctrlKey=false;li.triggerHandler("mouseup");return false}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault}else{if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault}else{markup(options.onEnter);return options.onEnter.keepDefault}}}if(e.keyCode===9){if(shiftKey===true||ctrlKey===true||altKey===true){return false}if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false}else{markup(options.onTab);return options.onTab.keepDefault}}}}init()})};$.fn.markItUpRemove=function(){return this.each(function(){$$=$(this).unbind().removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$)})};$.markItUp=function(settings){var options={target:false};$.extend(options,settings);if(options.target){return $(options.target).each(function(){$(this).focus();$(this).trigger("insertion",[options])})}else{$("textarea").trigger("insertion",[options])}}})(jQuery);$.fn.outerHTML=function(){if(this.find("script").length===0){var b=this[0]?this[0].ownerDocument:document;return $("<div>",b).append(this.eq(0).clone()).html()}else{var a=document.createElement("p");var d=this.eq(0).clone();a.appendChild(d[0]);return(s)?this.before(s).remove():a.innerHTML}};(function(c){var a=c.scrollTo=function(f,e,d){c(window).scrollTo(f,e,d)},b=function(d){return typeof d=="object"?d:{top:d,left:d}};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var e=this,d=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d){return e}var f=(e.contentWindow||e).document||e.ownerDocument||e;return c.browser.safari||f.compatMode=="BackCompat"?f.body:f.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:"settings"}}if(f=="max"){f="9e9"}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var l=this,j=c(l),k=f,i,g={},m=j.is("html,body"),h=function(n){j.animate(g,e,d.easing,n&&function(){n.call(this,f,d)})};switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}k=c(k,this);case"object":if(k.is||k.style){i=(k=c(k)).offset()}}c.each(d.axis.split(""),function(q,r){var t=r=="x"?"Left":"Top",v=t.toLowerCase(),p="scroll"+t,o=l[p],n=a.max(l,r);if(i){g[p]=i[v]+(m?0:o-j.offset()[v]);if(d.margin){g[p]-=parseInt(k.css("margin"+t),10)||0;g[p]-=parseInt(k.css("border"+t+"Width"),10)||0}g[p]+=d.offset[v]||0;if(d.over[v]){g[p]+=k[r=="x"?"width":"height"]()*d.over[v]}}else{var u=k[v];g[p]=u.slice&&u.slice(-1)=="%"?parseFloat(u)/100*n:u}if(/^\d+$/.test(g[p])){g[p]=g[p]<=0?0:Math.min(g[p],n)}if(!q&&d.queue){if(o!=g[p]){h(d.onAfterFirst)}delete g[p]}});h(d.onAfter)}).end()};a.max=function(j,i){var h=i=="x"?"Width":"Height",e="scroll"+h;if(!c(j).is("html,body")){return j[e]-c(j)[h.toLowerCase()]()}var g="client"+h,f=j.ownerDocument.documentElement,d=j.ownerDocument.body;return Math.max(f[e],d[e])-Math.min(f[g],d[g])}})(jQuery);(function(a){a.fn.addOption=function(){var h=function(l,r,u,p){var n,q=true;if(!l.cache){l.cache={}}var k=l.options,j=k.length;for(var m=0;m<j;m++){if(!l.cache[k[m].value]){l.cache[k[m].value]=m}if(k[m].value==r){n=k[m];q=false}}if(typeof n=="undefined"){n=document.createElement("option");n.value=r}n.text=u;if(typeof l.cache[r]=="undefined"){l.cache[r]=j}if(q){l.options[l.cache[r]]=n}if(p){n.selected=true}};var c=arguments;if(c.length===0){return this}var g=true,b=false,e,d,f;if(typeof(c[0])=="object"){b=true;e=c[0]}if(c.length>=2){if(typeof(c[1])=="boolean"){g=c[1]}else{if(typeof(c[2])=="boolean"){g=c[2]}}if(!b){d=c[0];f=c[1]}}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}if(b){for(var i in e){h(this,i,e[i],g)}}else{h(this,d,f,g)}});return this};a.fn.ajaxAddOption=function(d,f,b,e,c){if(typeof(d)!="string"){return this}if(typeof(f)!="object"){f={}}if(typeof(b)!="boolean"){b=true}this.each(function(){var g=this;a.getJSON(d,f,function(h){a(g).addOption(h,b);if(typeof e=="function"){if(typeof c=="object"){e.apply(g,c)}else{e.call(g)}}})});return this};a.fn.removeOption=function(){var c=arguments;if(c.length===0){return this}var e=typeof(c[0]),d,f;if(e=="string"||e=="object"||e=="function"){d=c[0];if(d.constructor==Array){var b=d.length;for(var g=0;g<b;g++){this.removeOption(d[g],c[1])}return this}}else{if(e=="number"){f=c[0]}else{return this}}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}if(this.cache){this.cache=null}var h=false,l=this.options;if(!!d){var j=l.length;for(var k=j-1;k>=0;k--){if(d.constructor==RegExp){if(l[k].value.match(d)){h=true}}else{if(l[k].value==d){h=true}}if(h&&c[1]===true){h=l[k].selected}if(h){l[k]=null}h=false}}else{if(c[1]===true){h=l[f].selected}else{h=true}if(h){this.remove(f)}}});return this};a.fn.sortOptions=function(c){var d=a(this).selectedValues();var b=typeof(c)=="undefined"?true:!!c;this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}var h=this.options,e=h.length,k=[];for(var g=0;g<e;g++){k[g]={v:h[g].value,t:h[g].text}}k.sort(function(l,j){var m=l.t.toLowerCase(),i=j.t.toLowerCase();if(m==i){return 0}if(b){return m<i?-1:1}else{return m>i?-1:1}});for(var f=0;f<e;f++){h[f].text=k[f].t;h[f].value=k[f].v}}).selectOptions(d,true);return this};a.fn.selectOptions=function(e,b){var d=e,g=typeof(e);if(g=="object"&&d.constructor==Array){var f=this;a.each(d,function(){f.selectOptions(this,b)})}var h=b||false;if(g!="string"&&g!="function"&&g!="object"){return this}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return this}var k=this.options,c=k.length;for(var j=0;j<c;j++){if(d.constructor==RegExp){if(k[j].value.match(d)){k[j].selected=true}else{if(h){k[j].selected=false}}}else{if(k[j].value==d){k[j].selected=true}else{if(h){k[j].selected=false}}}}});return this};a.fn.copyOptions=function(d,c){var b=c||"selected";if(a(d).size()===0){return this}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return this}var g=this.options,e=g.length;for(var f=0;f<e;f++){if(b=="all"||(b=="selected"&&g[f].selected)){a(d).addOption(g[f].value,g[f].text)}}});return this};a.fn.containsOption=function(e,c){var d=false,b=e,f=typeof(b),g=typeof(c);if(f!="string"&&f!="function"&&f!="object"){return g=="function"?this:d}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return this}if(d&&g!="function"){return false}var k=this.options,h=k.length;for(var j=0;j<h;j++){if(b.constructor==RegExp){if(k[j].value.match(b)){d=true;if(g=="function"){c.call(k[j],j)}}}else{if(k[j].value==b){d=true;if(g=="function"){c.call(k[j],j)}}}}});return g=="function"?this:d};a.fn.selectedValues=function(){var b=[];this.selectedOptions().each(function(){b[b.length]=this.value});return b};a.fn.selectedTexts=function(){var b=[];this.selectedOptions().each(function(){b[b.length]=this.text});return b};a.fn.selectedOptions=function(){return this.find("option:selected")}})(jQuery);jQuery.fn.swap=function(e){e=jQuery(e)[0];var f=this[0],d=f.cloneNode(true),g=e.cloneNode(true),c=this;f.parentNode.replaceChild(g,f);e.parentNode.replaceChild(d,e);c[0]=d;return this.pushStack(c)};jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(a){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},a||{});jQuery.tableDnD.makeDraggable(this)});jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",jQuery.tableDnD.mouseup);return this},makeDraggable:function(c){var b=c.tableDnDConfig;if(c.tableDnDConfig.dragHandle){var a=jQuery("td."+c.tableDnDConfig.dragHandle,c);a.each(function(){jQuery(this).mousedown(function(e){jQuery.tableDnD.dragObject=this.parentNode;jQuery.tableDnD.currentTable=c;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,e);if(b.onDragStart){b.onDragStart(c,this)}return false})})}else{var d=jQuery("tr",c);d.each(function(){var e=jQuery(this);if(!e.hasClass("nodrag")){e.mousedown(function(f){if(f.target.tagName=="TD"){jQuery.tableDnD.dragObject=this;jQuery.tableDnD.currentTable=c;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,f);if(b.onDragStart){b.onDragStart(c,this)}return false}}).css("cursor","move")}})}},updateTables:function(){this.each(function(){if(this.tableDnDConfig){jQuery.tableDnD.makeDraggable(this)}})},mouseCoords:function(a){if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}return{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(d,c){c=c||window.event;var b=this.getPosition(d);var a=this.mouseCoords(c);return{x:a.x-b.x,y:a.y-b.y}},getPosition:function(c){var b=0;var a=0;if(c.offsetHeight===0){c=c.firstChild}while(c.offsetParent){b+=c.offsetLeft;a+=c.offsetTop;c=c.offsetParent}b+=c.offsetLeft;a+=c.offsetTop;return{x:b,y:a}},mousemove:function(g){if(jQuery.tableDnD.dragObject===null){return}var d=jQuery(jQuery.tableDnD.dragObject);var b=jQuery.tableDnD.currentTable.tableDnDConfig;var i=jQuery.tableDnD.mouseCoords(g);var f=i.y-jQuery.tableDnD.mouseOffset.y;var c=window.pageYOffset;if(document.all){if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){c=document.documentElement.scrollTop}else{if(typeof document.body!="undefined"){c=document.body.scrollTop}}}if(i.y-c<b.scrollAmount){window.scrollBy(0,-b.scrollAmount)}else{var a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(a-(i.y-c)<b.scrollAmount){window.scrollBy(0,b.scrollAmount)}}if(f!=jQuery.tableDnD.oldY){var e=f>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=f;if(b.onDragClass){d.addClass(b.onDragClass)}else{d.css(b.onDragStyle)}var h=jQuery.tableDnD.findDropTargetRow(d,f);if(h){if(e&&jQuery.tableDnD.dragObject!=h){h.parentNode.insertBefore(jQuery.tableDnD.dragObject,h.nextSibling)}else{if(!e&&jQuery.tableDnD.dragObject!=h){h.parentNode.insertBefore(jQuery.tableDnD.dragObject,h)}}}}return false},findDropTargetRow:function(f,g){var j=jQuery.tableDnD.currentTable.rows;for(var e=0;e<j.length;e++){var h=j[e];var b=this.getPosition(h).y;var a=parseInt(h.offsetHeight,10)/2;if(h.offsetHeight===0){b=this.getPosition(h.firstChild).y;a=parseInt(h.firstChild.offsetHeight,10)/2}if((g>b-a)&&(g<(b+a))){if(h==f){return null}var c=jQuery.tableDnD.currentTable.tableDnDConfig;if(c.onAllowDrop){if(c.onAllowDrop(f,h)){return h}else{return null}}else{var d=jQuery(h).hasClass("nodrop");if(!d){return h}else{return null}}return h}}return null},mouseup:function(c){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var b=jQuery.tableDnD.dragObject;var a=jQuery.tableDnD.currentTable.tableDnDConfig;if(a.onDragClass){jQuery(b).removeClass(a.onDragClass)}else{jQuery(b).css(a.onDropStyle)}jQuery.tableDnD.dragObject=null;if(a.onDrop){a.onDrop(jQuery.tableDnD.currentTable,b)}jQuery.tableDnD.currentTable=null}},serialize:function(){if(jQuery.tableDnD.currentTable){return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable)}else{return"Error: No Table id set, you need to set an id on your table and every row"}},serializeTable:function(d){var a="";var c=d.id;var e=d.rows;for(var b=0;b<e.length;b++){if(a.length>0){a+="&"}var f=e[b].id;if(f&&f&&d.tableDnDConfig&&d.tableDnDConfig.serializeRegexp){f=f.match(d.tableDnDConfig.serializeRegexp)[0]}a+=c+"[]="+f}return a},serializeTables:function(){var a="";this.each(function(){a+=jQuery.tableDnD.serializeTable(this)});return a}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables});function convertToMarkup(h){var d=0,a="",c=0,f=[];function g(k){switch(k){case"<p>":case"</p>":case"\n</p>":case"\n<p>":return"\n";case"<em>":return"''";case"\n<em>":return"\n''";case"\n</em>":return"\n''";case"</em>":return"''";case"<strong>":return"'''";case"\n<strong>":return"\n'''";case"\n</strong>":return"\n'''";case"</strong>":return"'''";case"\n<h1>":return"\n= ";case"</h1>":return" =";case"\n<h2>":return"\n== ";case"</h2>":return" ==";case"\n<h3>":return"\n=== ";case"</h3>":return" ===";case"\n<h4>":return"\n==== ";case"</h4>":return" ====";case"\n<h5>":return"\n===== ";case"</h5>":return" =====";case"\n<h6>":return"\n====== ";case"</h6>":return" ======";case"</a>":case"\n</a>":return"]";case"\n<hr>":return"\n----";case"<hr>":return"----\n";case"\n<ul>":case"<ul>":c++;f[c]="ul";return"";case"\n<ol>":case"<ol>":c++;f[c]="ol";return"";case"\n<br>":return"\n";case"\n</ol>":case"</ol>":case"\n</ul>":case"</ul>":c--;return"";case"\n</li>":case"</li>":return"";case"<br>":case"<code>":return"";case"</pre>":case"</code>":case"\n</code>":return"\n";case"\n<li>":case"<li>":a="";for(var j=0;j<c;j++){a=a+"    "}if(f[c]=="ol"){return"\n"+a+"a. "}else{return"\n"+a+"* "}break;case"\n<pre>":return"\n        ";default:a="";if(k.slice(0,4)=="\n<li"||k.slice(0,4)=="<li "){for(j=0;j<c;j++){a=a+"    "}return"\n"+a+k.split('"')[1]+". "}else{return k}}}function b(i){a=i.slice(1,i.length);return"\n["+a+"|"+a+"]"}function e(i){switch(i){case"</ol><ol>":case"</ol>\n<ol>":return"";case"</ul><ul>":case"</ul>\n<ul>":return"";case"</ul></li></ul>":case"</ul></li></ol>":return"</ul>";case"</ol></li></ol>":case"</ul></li></ol>":return"</ol>";default:return i}}if(h.length>0){h=h.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;");a=h.split(/<a href=\"/);h=a[0];if(a.length>1){for(d=1;d<a.length;d++){a[d]=a[d].replace(/">/,"|");h=h+"["+a[d]}}h=h.replace("<p>","").replace(/<\/strong><\/em><strong>/g,"''").replace(/<\/em><\/strong><em>/g,"'''").replace(/<\/p><.?l>/g,"\n<ol>").replace(/<\/p><ul>/g,"\n<ul>").replace(/\n */g,"\n").replace(/\n?<.*?>/g,g).replace(/ /g," ").replace(/\n\b((ftp|https?):\/\/\S*)/g,b).replace(/\n\n\n/g,"\n\n");while(h.length>0&&h.charAt(h.length-1).match(/\s/)){h=h.slice(0,h.length-1)}}return h}function convertToHTML(h){var v=0;var n=0;var o="";var m=[];var t=0;var z=false;function e(F,E,i){var D=0;while((F.length-4)%4>0){F=F.slice(1,F.length)}if(F.match(/\s{8}[^   ..|\* ..|\d\d?\. ?.]/)!==null){F="<pre><code>"+F.slice(F.length-4,F.length);return F}t=F.split("    ").length-1;var G="";if(F.split("    ")[t].slice(0,1)){if(t==n){if(o=="ol"){G="</ol><ul>"}else{if(o===""){G="<ul>"}}}else{if(t>n){G="<ul>";m[m.length]="ul>";n=t}else{if(t<n){for(D=n;D>t;D--){G=G+"</"+m.pop()}}}}G=G+"<li>"+F.slice(F.length-2);o="ul"}else{if(t==n){if(o=="ul"){G="</ul><ol>"}else{if(o===""){G="<ol>"}}}else{if(t>n){m[m.length]="ol>";G="<ol>";n=t}else{if(t<n){for(D=n;D>t;D--){G=G+"</"+m.pop()}}}}var x=F.slice(F.length-3).split(" ")[1];if(typeof(x)=="undefined"){x=""}G=G+"<li>"+x;o="ol"}return G}function u(y){function i(x){switch(x){case"\n=":case"<p>=":case"=</p>":case"=":return"h1>";case"\n==":case"<p>==":case"==</p>":case"==":return"h2>";case"\n===":case"<p>===":case"===</p>":case"===":return"h3>";case"\n====":case"<p>====":case"====</p>":case"====":return"h4>";case"\n=====":case"<p>=====":case"=====</p>":case"=====":return"h5>";case"\n======":case"<p>======":case"======</p>":case"======":return"h6>"}}var d=y.split(" ");d[0]="<"+i(d[0]);d[(d.length-1)]="</"+i(d[(d.length-1)]);y=d.join("");return y}function c(i){var d=i.slice(0,7);var D=i.slice(7,i.length-4);D=D.replace(/></g,">\n<");switch(d){case"<p><ul>":d="<ul>\n";break;case"<p><ol>":d="<ol>\n";break;case"</ol><p>":d="</ol>";break;case"</ul><p>":d="</ul>";break}d=d+D;return d}function A(d){return d+"\n"}function q(x){var i=x.slice(0,5);i=i+"\n<p>";var d=x.slice(5,x.length-6);var D=x.slice(x.length-1);if(D=="\n"){x=i+d+"</p>"+D}else{x=i+d+"<br>"+D}return x}function f(d){return"\n<p>"+d.slice(5,d.length)}function C(d){return d.slice(0,1)+"<br>\n"}function w(d){return"<hr>\n<p>"+d.slice(9,d.length-4)+"</p>"}function a(d){return"</p>"+d.slice(8,d.length)}function r(d){switch(d){case"<li>\n":return"<li>";case"<p>\n":return"<p>"}}function b(d){return d.slice(0,1)+"\n<li"}if(h.length>0){h=h.replace(/.<li/g,b);var k=h.split("\n");h="";for(v=0;v<k.length;v++){if(k[v].split(/\s{4}\s*..../).length==1){if(z===true){for(var B=m.length;B>0;B--){if(B==1){k[v]="</"+m.shift()+"\n\n"+k[v]}else{k[v]="</"+m.shift()+k[v]}}n=0}}else{k[v]=k[v].replace(/\s{4}\s*..../g,e);z=true}switch(k[v].slice(0,4)){case"<pre":k[v]="\n"+k[v]+"</code></pre>";break;case"<li>":case"<ol>":case"<ul>":case"</ol":case"</ul":case"<li ":k[v]=k[v]+"</li>";break;default:}if(v<k.length-1&&k[v].match(/^[\w|"|']/)!==null&&k[v].match(/^[\w|"|']/)!==null&&k[v].length>0&&k[v+1].length>0){h=h+k[v]+"<br>"}else{if(v<k.length-1&&k[v].match(/>$/)!==null&&k[v].match(/^</)!==null){h=h+k[v]}else{if(k[v].match(/-{4}/)!==null){h=h+"<hr>"}else{h=h+k[v]+"\n"}}}}h=h.replace(/\n\n/g,"</p>\n<p>");h=h.replace(/\n/g,"<br>");h="<p>"+h+"</p>";var l=h.split(/\[/);if(l.length>1){h=l[0];for(v=1;v<l.length;v++){if(l[v].indexOf("|")>-1){var j=l[v].split(/\|/);l[v]='<a href="'+j[0]+'">'+j[1].replace(/\]/,"</a>")}else{l[v]='<a href="'+l[v]+'">'+l[v]+"</a>"}h=h+l[v]}}var p=false;var g=false;for(v=0;v<h.length;v++){if(h.charAt(v)=="'"){if(h.charAt(v+1)=="'"){if(h.charAt(v+2)=="'"){if(p===false){h=h.slice(0,v)+"<strong><X>"+h.slice((v+3));v+=3;p=true}else{h=h.slice(0,v)+"</strong><X>"+h.slice((v+3));v+=3;p=false}}else{if(g===false){h=h.slice(0,v)+"<em><X>"+h.slice((v+2));v+=2;g=true}else{h=h.slice(0,v)+"</em><X>"+h.slice((v+2));v+=2;g=false}}}}}while(h.length>0&&h.charAt(h.length-1).match(/\s/)){h=h.slice(0,h.length-1)}h=h.replace(/<p><\/p>\n<p>/g,"<p>").replace(/<\/h\d>/g,A).replace(/.<br>/g,C).replace(/\n?<X>\n?/g,"").replace(/\n<ol>/g,"<ol>").replace(/\n<ul>/g,"<ul>").replace(/<\/p>\n?<br>/g,"</p>").replace(/<p>\n<hr>/g,"<hr>").replace(/\n<br>.*<\/p>/g,f).replace(/\n<br>/g,"<br>\n").replace(/<hr><br>\n.*<br>/g,w).replace(/<br>\n\n/g,"<br>\n").replace(/<\/p>\n<p><(o|u)l>\n<li>/g,a).replace(/<(li|p)>\n/g,r).replace(/<\/p>\n\n/g,"</p>\n").slice(0,h.length-5).replace(/\n?<p>\n?<br>\n?<pre>\n?/g,"\n<pre>").replace(/\n?<\/pre>\n?<br>\n?<\/ol>\n?(<\/li>)?\n?/g,"</pre>\n").replace(/<\/pre>\n<br>/g,"</pre>").replace(/\=<br>/g,"=\n").replace(/<p>=/g,"=").replace(/\=<\/p>/g,"=").replace(/(<p>={1,6}\s.+=\s{1,6}<\/p>)|(^={1,6}\s.+\s={1,6}$)/gm,u).replace(/<\/p><ul>/g,"</p>\n<ul>").replace(/<\/p><ol>/g,"</p>\n<ol>")}return h};