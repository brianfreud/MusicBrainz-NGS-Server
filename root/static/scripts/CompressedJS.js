(function(a){a.fn.autogrow=function(b){return this.each(function(){new a.autogrow(this,b)})};a.autogrow=function(b,c){this.options=c||{};this.dummy=null;this.interval=null;this.line_height=this.options.lineHeight||parseInt(a(b).css("line-height"),10);this.min_height=this.options.minHeight||parseInt(a(b).css("min-height"),10);this.max_height=this.options.maxHeight||parseInt(a(b).css("max-height"),10);this.textarea=a(b);this.expand_tolerance=(!isNaN(this.options.expandTolerance)&&this.options.expandTolerance>-1)?this.options.expandTolerance:4;if(isNaN(this.line_height)){this.line_height=0}if(isNaN(this.min_height)||this.min_height===0){this.min_height=this.textarea.height()}this.init()};a.autogrow.fn=a.autogrow.prototype={autogrow:"1.2.4"};a.autogrow.fn.extend=a.autogrow.extend=a.extend;a.autogrow.fn.extend({init:function(){var b=this;this.textarea.css({overflow:"hidden",display:"block"});this.textarea.bind("focus",function(){b.startExpand()}).bind("blur",function(){b.stopExpand()}).bind("update",function(){b.checkExpand(0,true)});this.checkExpand(0,true)},startExpand:function(){var b=this;this.checkExpand(this.line_height,true);this.interval=window.setInterval(function(){b.checkExpand(b.line_height,false)},400)},stopExpand:function(){clearInterval(this.interval);this.checkExpand(0,true)},checkExpand:function(d,c){if(this.dummy===null){this.dummy=a("<div></div>");this.dummy.css({"font-size":this.textarea.css("font-size"),"font-family":this.textarea.css("font-family"),width:this.textarea.css("width"),"padding-top":this.textarea.css("padding-top"),"padding-bottom":this.textarea.css("padding-bottom"),"padding-left":this.textarea.css("padding-left"),"padding-right":this.textarea.css("padding-right"),"line-height":this.line_height+"px","overflow-x":"hidden",position:"absolute",top:0,left:-9999}).appendTo("body")}else{this.dummy.show()}var b=this.textarea.val().toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;")+".";if(a.browser.msie){b=b.replace(/\n/g,"<BR>")}else{b=b.replace(/\n/g,"<br>")}if(c||this.dummy.html()!=b){this.dummy.html(b);if(this.max_height>0&&(this.dummy.height()+(this.expand_tolerance*this.line_height)>this.max_height)){this.textarea.css("overflow-y","auto");this.textarea.css("height",this.max_height);if(this.textarea.height()<this.max_height){this.textarea.animate({height:(this.max_height+(this.expand_tolerance*this.line_height))+"px"},100)}}else{this.textarea.css("overflow-y","hidden");if(this.textarea.height()<this.dummy.height()+(this.expand_tolerance*this.line_height)||(this.dummy.height()<this.textarea.height())){if(this.dummy.height()<this.min_height){this.textarea.animate({height:(this.min_height+(this.expand_tolerance*this.line_height))+"px"},100)}else{this.textarea.animate({height:(this.dummy.height()+(this.expand_tolerance*this.line_height))+"px"},100)}}}}this.dummy.hide()}})})(jQuery);(function(a){var b=function(c){var f=null,e=a("#"+c),d=a("input[name="+c+"]");if(e!==undefined){f=e}else{if(d!==undefined){f=d}}return f};a.fn.autotab_magic=function(c){for(var d=0;d<this.length;d++){var f=d+1,e=d-1;if(d>0&&f<this.length){a(this[d]).autotab({target:a(this[f]),previous:a(this[e])})}else{if(d>0){a(this[d]).autotab({previous:a(this[e])})}else{a(this[d]).autotab({target:a(this[f])})}}if(c!==null&&(isNaN(c)&&c==a(this[d]).attr("id"))||(!isNaN(c)&&c==d)){a(this[d]).focus()}}};a.fn.autotab_filter=function(c){var e={format:"all",uppercase:false,lowercase:false,nospace:false,pattern:null};if(typeof c=="string"||typeof c=="function"){e.format=c}else{a.extend(e,c)}for(var d=0;d<this.length;d++){a(this[d]).bind("keyup",function(g){var h=this.value,f;switch(e.format){case"text":f=new RegExp("[0-9]+","g");h=h.replace(f,"");break;case"alpha":f=new RegExp("[^a-zA-Z]+","g");h=h.replace(f,"");break;case"number":case"numeric":f=new RegExp("[^0-9]+","g");h=h.replace(f,"");break;case"alphanumeric":f=new RegExp("[^0-9a-zA-Z]+","g");h=h.replace(f,"");break;case"custom":f=new RegExp(e.pattern,"g");h=h.replace(f,"");break;default:if(typeof e.format=="function"){h=e.format(h)}break}if(e.nospace){f=new RegExp("[ ]+","g");h=h.replace(f,"")}if(e.uppercase){h=h.toUpperCase()}if(e.lowercase){h=h.toLowerCase()}if(h!=this.value){this.value=h}})}};a.fn.autotab=function(c){var f={format:"all",maxlength:2147483647,uppercase:false,lowercase:false,nospace:false,target:null,previous:null,pattern:null},d=a(this).attr("maxlength"),e=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];a.extend(f,c);if(typeof f.target=="string"){f.target=b(f.target)}if(typeof f.previous=="string"){f.previous=b(f.previous)}if(f.maxlength==2147483647&&d!=2147483647){f.maxlength=d}else{if(f.maxlength>0){a(this).attr("maxlength",f.maxlength)}else{f.target=null}}if(f.format!="all"){a(this).autotab_filter(f)}return a(this).bind("keydown",function(g){if(g.which==8&&this.value.length===0&&f.previous){f.previous.focus().val(f.previous.val())}}).bind("keyup",function(g){if(g.which!=8){var h=a(this).val();if(a.inArray(g.which,e)==-1&&h.length==f.maxlength&&f.target){f.target.focus()}}})}})(jQuery);jQuery.bt={version:"0.9.5-rc1"};(function($){jQuery.fn.bt=function(content,options){var contentSelect=false;jQuery.bt.defaults={trigger:"hover",clickAnywhereToClose:true,closeWhenOthersOpen:false,shrinkToFit:false,width:"200px",padding:"10px",spikeGirth:10,spikeLength:15,overlap:0,overlay:false,killTitle:true,textzIndex:9999,boxzIndex:9998,wrapperzIndex:9997,offsetParent:null,positions:["most"],fill:"rgb(255, 255, 102)",windowMargin:10,strokeWidth:1,strokeStyle:"#000",cornerRadius:5,centerPointX:".5",centerPointY:".5",shadow:false,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"#000",shadowOverlap:false,noShadowOpts:{strokeStyle:"#999"},cssClass:"",cssStyles:{},activeClass:"bt-active",contentSelector:"$(this).attr('title')",ajaxPath:null,ajaxError:"<strong>ERROR:</strong> <em>%error</em>",ajaxLoading:"<blink>Loading...</blink>",ajaxData:{},ajaxType:"GET",ajaxCache:true,ajaxOpts:{},preBuild:function(){},preShow:function(box){},showTip:function(box){$(box).show()},postShow:function(box){},preHide:function(box){},hideTip:function(box,callback){$(box).hide();callback()},postHide:function(){},hoverIntentOpts:{interval:300,timeout:500}};jQuery.bt.options={};function numb(num){return parseInt(num,10)||0}if(typeof content!="string"){contentSelect=true;options=content;content=false}function shadowSupport(){try{var userAgent=navigator.userAgent.toLowerCase();if(/webkit/.test(userAgent)){return true}else{if(/gecko|mozilla/.test(userAgent)&&parseFloat(userAgent.match(/firefox\/(\d+(?:\.\d+)+)/)[1])>=3.1){return true}}}catch(err){}return false}function round5(num,strokeWidth){var ret;strokeWidth=numb(strokeWidth);if(strokeWidth%2){ret=num}else{ret=Math.round(num-0.5)+0.5}return ret}function arrayRemove(arr,elem){var x,newArr=[];for(x in arr){if(arr[x]!=elem){newArr.push(arr[x])}}return newArr}function canvasSupport(){var canvas_compatible=false;try{canvas_compatible=!!(document.createElement("canvas").getContext("2d"))}catch(e){canvas_compatible=!!(document.createElement("canvas").getContext)}return canvas_compatible}if(jQuery.fn.hoverIntent&&jQuery.bt.defaults.trigger=="hover"){jQuery.bt.defaults.trigger="hoverIntent"}return this.each(function(index){var opts=jQuery.extend(false,jQuery.bt.defaults,jQuery.bt.options,options),ajaxTimeout=false;opts.spikeLength=numb(opts.spikeLength);opts.spikeGirth=numb(opts.spikeGirth);opts.overlap=numb(opts.overlap);function drawIt(points,strokeWidth){this.moveTo(points[0].x,points[0].y);for(var i=1;i<points.length;i++){if(points[i-1].type=="arcStart"){this.quadraticCurveTo(round5(points[i].x,strokeWidth),round5(points[i].y,strokeWidth),round5(points[(i+1)%points.length].x,strokeWidth),round5(points[(i+1)%points.length].y,strokeWidth));i++}else{this.lineTo(round5(points[i].x,strokeWidth),round5(points[i].y,strokeWidth))}}}function betweenPoint(point1,point2,dist){var y,x;if(point1.x==point2.x){y=point1.y<point2.y?point1.y+dist:point1.y-dist;return{x:point1.x,y:y}}else{if(point1.y==point2.y){x=point1.x<point2.x?point1.x+dist:point1.x-dist;return{x:x,y:point1.y}}}}function centerPoint(arcStart,corner,arcEnd){var x=corner.x==arcStart.x?arcEnd.x:arcStart.x;var y=corner.y==arcStart.y?arcEnd.y:arcStart.y;var startAngle,endAngle;if(arcStart.x<arcEnd.x){if(arcStart.y>arcEnd.y){startAngle=(Math.PI/180)*180;endAngle=(Math.PI/180)*90}else{startAngle=(Math.PI/180)*90;endAngle=0}}else{if(arcStart.y>arcEnd.y){startAngle=(Math.PI/180)*270;endAngle=(Math.PI/180)*180}else{startAngle=0;endAngle=(Math.PI/180)*270}}return{x:x,y:y,type:"center",startAngle:startAngle,endAngle:endAngle}}function findIntersectY(r1x1,r1y1,r1x2,r1y2,x){if(r1y1==r1y2){return{x:x,y:r1y1}}var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var y=r1m*x+r1b;return{x:x,y:y}}function findIntersectX(r1x1,r1y1,r1x2,r1y2,y){if(r1x1==r1x2){return{x:r1x1,y:y}}var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var x=(y-r1b)/r1m;return{x:x,y:y}}function findIntersect(r1x1,r1y1,r1x2,r1y2,r2x1,r2y1,r2x2,r2y2){if(r2x1==r2x2){return findIntersectY(r1x1,r1y1,r1x2,r1y2,r2x1)}if(r2y1==r2y2){return findIntersectX(r1x1,r1y1,r1x2,r1y2,r2y1)}var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var r2m=(r2y1-r2y2)/(r2x1-r2x2);var r2b=r2y1-(r2m*r2x1);var x=(r2b-r1b)/(r1m-r2m);var y=r1m*x+r1b;return{x:x,y:y}}if(opts.killTitle){$(this).find("[title]").andSelf().each(function(){if(!$(this).attr("bt-xTitle")){$(this).attr("bt-xTitle",$(this).attr("title")).attr("title","")}})}if(typeof opts.trigger=="string"){opts.trigger=[opts.trigger]}if(opts.trigger[0]=="hoverIntent"){var hoverOpts=jQuery.extend(opts.hoverIntentOpts,{over:function(){this.btOn()},out:function(){this.btOff()}});$(this).hoverIntent(hoverOpts)}else{if(opts.trigger[0]=="hover"){$(this).hover(function(){this.btOn()},function(){this.btOff()})}else{if(opts.trigger[0]=="now"){if($(this).hasClass("bt-active")){this.btOff()}else{this.btOn()}}else{if(opts.trigger[0]=="none"){}else{if(opts.trigger.length>1&&opts.trigger[0]!=opts.trigger[1]){$(this).bind(opts.trigger[0],function(){this.btOn()}).bind(opts.trigger[1],function(){this.btOff()})}else{$(this).bind(opts.trigger[0],function(){if($(this).hasClass("bt-active")){this.btOff()}else{this.btOn()}})}}}}}this.btOn=function(){if(typeof $(this).data("bt-box")=="object"){this.btOff()}opts.preBuild.apply(this);$(jQuery.bt.vars.closeWhenOpenStack).btOff();$(this).addClass("bt-active "+opts.activeClass);if(contentSelect&&opts.ajaxPath===null){if(opts.killTitle){$(this).attr("title",$(this).attr("bt-xTitle"))}content=$.isFunction(opts.contentSelector)?opts.contentSelector.apply(this):eval(opts.contentSelector);if(opts.killTitle){$(this).attr("title","")}}if(opts.ajaxPath!==null&&content===false){var url="";if(typeof opts.ajaxPath=="object"){url=eval(opts.ajaxPath[0]);url+=opts.ajaxPath[1]?" "+opts.ajaxPath[1]:""}else{url=opts.ajaxPath}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var cacheData=opts.ajaxCache?$(document.body).data("btCache-"+url.replace(/\./g,"")):null;if(typeof cacheData=="string"){content=selector?$("<div/>").append(cacheData.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):cacheData}else{var target=this;var ajaxOpts=jQuery.extend(false,{type:opts.ajaxType,data:opts.ajaxData,cache:opts.ajaxCache,url:url,complete:function(XMLHttpRequest,textStatus){if(textStatus=="success"||textStatus=="notmodified"){if(opts.ajaxCache){$(document.body).data("btCache-"+url.replace(/\./g,""),XMLHttpRequest.responseText)}ajaxTimeout=false;content=selector?$("<div/>").append(XMLHttpRequest.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):XMLHttpRequest.responseText}else{if(textStatus=="timeout"){ajaxTimeout=true}content=opts.ajaxError.replace(/%error/g,XMLHttpRequest.statusText)}if($(target).hasClass("bt-active")){target.btOn()}}},opts.ajaxOpts);jQuery.ajax(ajaxOpts);content=opts.ajaxLoading}}var shadowMarginX=0;var shadowMarginY=0;var shadowShiftX=0;var shadowShiftY=0;if(opts.shadow&&!shadowSupport()){opts.shadow=false;jQuery.extend(opts,opts.noShadowOpts)}if(opts.shadow){if(opts.shadowBlur>Math.abs(opts.shadowOffsetX)){shadowMarginX=opts.shadowBlur*2}else{shadowMarginX=opts.shadowBlur+Math.abs(opts.shadowOffsetX)}shadowShiftX=(opts.shadowBlur-opts.shadowOffsetX)>0?opts.shadowBlur-opts.shadowOffsetX:0;if(opts.shadowBlur>Math.abs(opts.shadowOffsetY)){shadowMarginY=opts.shadowBlur*2}else{shadowMarginY=opts.shadowBlur+Math.abs(opts.shadowOffsetY)}shadowShiftY=(opts.shadowBlur-opts.shadowOffsetY)>0?opts.shadowBlur-opts.shadowOffsetY:0}var pos,top,left,offsetParent;if(opts.offsetParent){var offsetParentPos=offsetParent.offset();offsetParent=$(opts.offsetParent);pos=$(this).offset();top=numb(pos.top)-numb(offsetParentPos.top)+numb($(this).css("margin-top"))-shadowShiftY;left=numb(pos.left)-numb(offsetParentPos.left)+numb($(this).css("margin-left"))-shadowShiftX}else{offsetParent=($(this).css("position")=="absolute")?$(this).parents().eq(0).offsetParent():$(this).offsetParent();pos=$(this).btPosition();top=numb(pos.top)+numb($(this).css("margin-top"))-shadowShiftY;left=numb(pos.left)+numb($(this).css("margin-left"))-shadowShiftX}var width=$(this).btOuterWidth(),height=$(this).outerHeight();if(typeof content=="object"){var original=content;var clone=$(original).clone(true).show();var origClones=$(original).data("bt-clones")||[];origClones.push(clone);$(original).data("bt-clones",origClones);$(clone).data("bt-orig",original);$(this).data("bt-content-orig",{original:original,clone:clone});content=clone}if(typeof content==="null"||content===""){return}var $text=$('<div class="bt-content"></div>').append(content).css({padding:opts.padding,position:"absolute",width:(opts.shrinkToFit?"auto":opts.width),zIndex:opts.textzIndex,left:shadowShiftX,top:shadowShiftY}).css(opts.cssStyles);var $box=$('<div class="bt-wrapper"></div>').append($text).addClass(opts.cssClass).css({position:"absolute",width:opts.width,zIndex:opts.wrapperzIndex,visibility:"hidden"}).appendTo(offsetParent);if(jQuery.fn.bgiframe){$text.bgiframe();$box.bgiframe()}$(this).data("bt-box",$box);var scrollTop=numb($(document).scrollTop()),scrollLeft=numb($(document).scrollLeft()),docWidth=numb($(window).width()),docHeight=numb($(window).height()),winRight=scrollLeft+docWidth,winBottom=scrollTop+docHeight,space={},thisOffset=$(this).offset(),textOutHeight=numb($text.outerHeight()),textOutWidth=numb($text.btOuterWidth()),position;space.top=thisOffset.top-scrollTop;space.bottom=docHeight-((thisOffset+height)-scrollTop);space.left=thisOffset.left-scrollLeft;space.right=docWidth-((thisOffset.left+width)-scrollLeft);if(opts.positions.constructor==String){opts.positions=opts.positions.replace(/ /,"").split(",")}if(opts.positions[0]=="most"){position="top";for(var pig in space){position=space[pig]>space[position]?pig:position}}else{for(var x in opts.positions){position=opts.positions[x];if((position=="left"||position=="right")&&space[position]>textOutWidth+opts.spikeLength){break}else{if((position=="top"||position=="bottom")&&space[position]>textOutHeight+opts.spikeLength){break}}}}var horiz=left+((width-textOutWidth)*0.5),vert=top+((height-textOutHeight)*0.5),points=[],textTop,textLeft,textRight,textBottom,textTopSpace,textBottomSpace,textLeftSpace,textRightSpace,crossPoint,textCenter,spikePoint,yShift,xShift;switch(position){case"top":$text.css("margin-bottom",opts.spikeLength+"px");$box.css({top:(top-$text.outerHeight(true))+opts.overlap,left:horiz});textRightSpace=(winRight-opts.windowMargin)-($text.offset().left+$text.btOuterWidth(true));xShift=shadowShiftX;if(textRightSpace<0){$box.css("left",(numb($box.css("left"))+textRightSpace)+"px");xShift-=textRightSpace}textLeftSpace=($text.offset().left+numb($text.css("margin-left")))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css("left",(numb($box.css("left"))-textLeftSpace)+"px");xShift+=textLeftSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={y:textBottom+opts.spikeLength,x:((textRight-textLeft)*0.5)+xShift,type:"spike"};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textBottom);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>(textRight-opts.spikeGirth/2)-opts.cornerRadius?(textRight-opts.spikeGirth/2)-opts.CornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x-(opts.spikeGirth/2),y:textBottom,type:"join"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:crossPoint.x+(opts.spikeGirth/2),y:textBottom,type:"join"};points[points.length]=spikePoint;break;case"left":$text.css("margin-right",opts.spikeLength+"px");$box.css({top:vert+"px",left:((left-$text.btOuterWidth(true))+opts.overlap)+"px"});textBottomSpace=(winBottom-opts.windowMargin)-($text.offset().top+$text.outerHeight(true));yShift=shadowShiftY;if(textBottomSpace<0){$box.css("top",(numb($box.css("top"))+textBottomSpace)+"px");yShift-=textBottomSpace}textTopSpace=($text.offset().top+numb($text.css("margin-top")))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css("top",(numb($box.css("top"))-textTopSpace)+"px");yShift+=textTopSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:textRight+opts.spikeLength,y:((textBottom-textTop)*0.5)+yShift,type:"spike"};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textRight);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>(textBottom-opts.spikeGirth/2)-opts.cornerRadius?(textBottom-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.y;points[points.length]={x:textRight,y:crossPoint.y+opts.spikeGirth/2,type:"join"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:crossPoint.y-opts.spikeGirth/2,type:"join"};points[points.length]=spikePoint;break;case"bottom":$text.css("margin-top",opts.spikeLength+"px");$box.css({top:(top+height)-opts.overlap,left:horiz});textRightSpace=(winRight-opts.windowMargin)-($text.offset().left+$text.btOuterWidth(true));xShift=shadowShiftX;if(textRightSpace<0){$box.css("left",(numb($box.css("left"))+textRightSpace)+"px");xShift-=textRightSpace}textLeftSpace=($text.offset().left+numb($text.css("margin-left")))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css("left",(numb($box.css("left"))-textLeftSpace)+"px");xShift+=textLeftSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:((textRight-textLeft)*0.5)+xShift,y:shadowShiftY,type:"spike"};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textTop);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>(textRight-opts.spikeGirth/2)-opts.cornerRadius?(textRight-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textTop,type:"join"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:crossPoint.x-(opts.spikeGirth/2),y:textTop,type:"join"};points[points.length]=spikePoint;break;case"right":$text.css("margin-left",(opts.spikeLength+"px"));$box.css({top:vert+"px",left:((left+width)-opts.overlap)+"px"});textBottomSpace=(winBottom-opts.windowMargin)-($text.offset().top+$text.outerHeight(true));yShift=shadowShiftY;if(textBottomSpace<0){$box.css("top",(numb($box.css("top"))+textBottomSpace)+"px");yShift-=textBottomSpace}textTopSpace=($text.offset().top+numb($text.css("margin-top")))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css("top",(numb($box.css("top"))-textTopSpace)+"px");yShift+=textTopSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:shadowShiftX,y:((textBottom-textTop)*0.5)+yShift,type:"spike"};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textLeft);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>(textBottom-opts.spikeGirth/2)-opts.cornerRadius?(textBottom-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.y;points[points.length]={x:textLeft,y:crossPoint.y-opts.spikeGirth/2,type:"join"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:crossPoint.y+opts.spikeGirth/2,type:"join"};points[points.length]=spikePoint;break}var canvas=document.createElement("canvas");$(canvas).attr("width",(numb($text.btOuterWidth(true))+opts.strokeWidth*2+shadowMarginX)).attr("height",(numb($text.outerHeight(true))+opts.strokeWidth*2+shadowMarginY)).appendTo($box).css({position:"absolute",zIndex:opts.boxzIndex});if(typeof(G_vmlCanvasManager)!="undefined"){canvas=G_vmlCanvasManager.initElement(canvas)}if(opts.cornerRadius>0){var newPoints=[],newPoint;for(var i=0;i<points.length;i++){if(points[i].type=="corner"){newPoint=betweenPoint(points[i],points[(i-1)%points.length],opts.cornerRadius);newPoint.type="arcStart";newPoints[newPoints.length]=newPoint;newPoints[newPoints.length]=points[i];newPoint=betweenPoint(points[i],points[(i+1)%points.length],opts.cornerRadius);newPoint.type="arcEnd";newPoints[newPoints.length]=newPoint}else{newPoints[newPoints.length]=points[i]}}points=newPoints}var ctx=canvas.getContext("2d");if(opts.shadow&&opts.shadowOverlap!==true){var shadowOverlap=numb(opts.shadowOverlap);switch(position){case"top":if(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap>0){$box.css("top",(numb($box.css("top"))-(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap)))}break;case"right":if(shadowShiftX-shadowOverlap>0){$box.css("left",(numb($box.css("left"))+shadowShiftX-shadowOverlap))}break;case"bottom":if(shadowShiftY-shadowOverlap>0){$box.css("top",(numb($box.css("top"))+shadowShiftY-shadowOverlap))}break;case"left":if(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap>0){$box.css("left",(numb($box.css("left"))-(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap)))}break}}drawIt.apply(ctx,[points],opts.strokeWidth);ctx.fillStyle=opts.fill;if(opts.shadow){ctx.shadowOffsetX=opts.shadowOffsetX;ctx.shadowOffsetY=opts.shadowOffsetY;ctx.shadowBlur=opts.shadowBlur;ctx.shadowColor=opts.shadowColor}ctx.closePath();ctx.fill();if(opts.strokeWidth>0){ctx.shadowColor="rgba(0, 0, 0, 0)";ctx.lineWidth=opts.strokeWidth;ctx.strokeStyle=opts.strokeStyle;ctx.beginPath();drawIt.apply(ctx,[points],opts.strokeWidth);ctx.closePath();ctx.stroke()}opts.preShow.apply(this,[$box[0]]);$box.css({display:"none",visibility:"visible"});opts.showTip.apply(this,[$box[0]]);if(opts.overlay){var overlay=$('<div class="bt-overlay"></div>').css({position:"absolute",backgroundColor:"blue",top:top,left:left,width:width,height:height,opacity:".2"}).appendTo(offsetParent);$(this).data("overlay",overlay)}if((opts.ajaxPath!==null&&opts.ajaxCache===false)||ajaxTimeout){content=false}if(opts.clickAnywhereToClose){jQuery.bt.vars.clickAnywhereStack.push(this);$(document).click(jQuery.bt.docClick)}if(opts.closeWhenOthersOpen){jQuery.bt.vars.closeWhenOpenStack.push(this)}opts.postShow.apply(this,[$box[0]])};this.btOff=function(){var box=$(this).data("bt-box");opts.preHide.apply(this,[box]);var i=this;i.btCleanup=function(){var box=$(i).data("bt-box");var contentOrig=$(i).data("bt-content-orig");var overlay=$(i).data("bt-overlay");if(typeof box=="object"){$(box).remove();$(i).removeData("bt-box")}if(typeof contentOrig=="object"){var clones=$(contentOrig.original).data("bt-clones");$(contentOrig).data("bt-clones",arrayRemove(clones,contentOrig.clone))}if(typeof overlay=="object"){$(overlay).remove();$(i).removeData("bt-overlay")}jQuery.bt.vars.clickAnywhereStack=arrayRemove(jQuery.bt.vars.clickAnywhereStack,i);jQuery.bt.vars.closeWhenOpenStack=arrayRemove(jQuery.bt.vars.closeWhenOpenStack,i);$(i).removeClass("bt-active "+opts.activeClass);opts.postHide.apply(i)};opts.hideTip.apply(this,[box,i.btCleanup])};var refresh=this.btRefresh=function(){this.btOff();this.btOn()}})};jQuery.fn.btPosition=function(){function num(elem,prop){return elem[0]&&parseInt(jQuery.curCSS(elem[0],prop,true),10)||0}var left=0,top=0,results;if(this[0]){var offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].tagName)?{top:0,left:0}:offsetParent.offset();offset.top-=num(this,"marginTop");offset.left-=num(this,"marginLeft");parentOffset.top+=num(offsetParent,"borderTopWidth");parentOffset.left+=num(offsetParent,"borderLeftWidth");results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}}return results};jQuery.fn.btOuterWidth=function(margin){function num(elem,prop){return elem[0]&&parseInt(jQuery.curCSS(elem[0],prop,true),10)||0}return this.innerWidth()+num(this,"borderLeftWidth")+num(this,"borderRightWidth")+(margin?num(this,"marginLeft")+num(this,"marginRight"):0)};jQuery.fn.btOn=function(){return this.each(function(index){if(jQuery.isFunction(this.btOn)){this.btOn()}})};jQuery.fn.btOff=function(){return this.each(function(index){if(jQuery.isFunction(this.btOff)){this.btOff()}})};jQuery.bt.vars={clickAnywhereStack:[],closeWhenOpenStack:[]};jQuery.bt.docClick=function(e){if(typeof(e)==="undefined"){e=window.event}if(!$(e.target).parents().andSelf().filter(".bt-wrapper, .bt-active").length&&jQuery.bt.vars.clickAnywhereStack.length){$(jQuery.bt.vars.clickAnywhereStack).btOff();$(document).unbind("click",jQuery.bt.docClick)}}})(jQuery);(function(c){var e=(function(){if(!c.browser.msie){return false}var h=document.createElement("div");try{h.style.setExpression("width","0+0")}catch(g){return false}return true})();function d(g,h){return parseInt(c.css(g,h),10)||0}function b(g){g=parseInt(g,10).toString(16);return(g.length<2)?"0"+g:g}function f(i){for(;i&&i.nodeName.toLowerCase()!="html";i=i.parentNode){var g=c.css(i,"backgroundColor");if(g=="rgba(0, 0, 0, 0)"){continue}if(g.indexOf("rgb")>=0){var h=g.match(/\d+/g);return"#"+b(h[0])+b(h[1])+b(h[2])}if(g&&g!="transparent"){return g}}return"#ffffff"}function a(j,g,h){switch(j){case"round":return Math.round(h*(1-Math.cos(Math.asin(g/h))));case"cool":return Math.round(h*(1+Math.cos(Math.asin(g/h))));case"sharp":return Math.round(h*(1-Math.cos(Math.acos(g/h))));case"bite":return Math.round(h*(Math.cos(Math.asin((h-g-1)/h))));case"slide":return Math.round(h*(Math.atan2(g,h/g)));case"jut":return Math.round(h*(Math.atan2(h,(h-g-1))));case"curl":return Math.round(h*(Math.atan(g)));case"tear":return Math.round(h*(Math.cos(g)));case"wicked":return Math.round(h*(Math.tan(g)));case"long":return Math.round(h*(Math.sqrt(g)));case"sculpt":return Math.round(h*(Math.log((h-g-1),h)));case"dog":return(g&1)?(g+1):h;case"dog2":return(g&2)?(g+1):h;case"dog3":return(g&3)?(g+1):h;case"fray":return(g%2)*h;case"notch":return h;case"bevel":return g+1}}c.fn.corner=function(k){if(this.length===0){if(!c.isReady&&this.selector){var t=this.selector,p=this.context;c(function(){c(t,p).corner(k)})}return this}k=(k||"").toLowerCase();var h=/keep/.test(k),l=((k.match(/cc:(#[0-9a-f]+)/)||[])[1]),q=((k.match(/sc:(#[0-9a-f]+)/)||[])[1]),j=parseInt((k.match(/(\d+)px/)||[])[1],10)||10,r=/round|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dog/,m=((k.match(r)||["round"])[0]),n={T:0,B:1},g={TL:/top|tl/.test(k),TR:/top|tr/.test(k),BL:/bottom|bl/.test(k),BR:/bottom|br/.test(k)};if(!g.TL&&!g.TR&&!g.BL&&!g.BR){g={TL:1,TR:1,BL:1,BR:1}}var i=document.createElement("div");i.style.overflow="hidden";i.style.height="1px";i.style.backgroundColor=q||"transparent";i.style.borderStyle="solid";return this.each(function(y){var u={T:parseInt(c.css(this,"paddingTop"),10)||0,R:parseInt(c.css(this,"paddingRight"),10)||0,B:parseInt(c.css(this,"paddingBottom"),10)||0,L:parseInt(c.css(this,"paddingLeft"),10)||0},A=c.curCSS(this,"height");if(typeof(this.style.zoom)!=="undefined"){this.style.zoom=1}if(!h){this.style.border="none"}i.style.borderColor=l||f(this.parentNode);for(var v in n){var B=n[v];if((B&&(g.BL||g.BR))||(!B&&(g.TL||g.TR))){i.style.borderStyle="none "+(g[v+"R"]?"solid":"none")+" none "+(g[v+"L"]?"solid":"none");var C=document.createElement("div");c(C).addClass("jquery-corner");var o=C.style;B?this.appendChild(C):this.insertBefore(C,this.firstChild);if(B&&A!="auto"){if(c.css(this,"position")=="static"){this.style.position="relative"}o.position="absolute";o.bottom=o.left=o.padding=o.margin="0";if(e){o.setExpression("width","this.parentNode.offsetWidth")}else{o.width="100%"}}else{if(!B&&c.browser.msie){if(c.css(this,"position")=="static"){this.style.position="relative"}o.position="absolute";o.top=o.left=o.right=o.padding=o.margin="0";if(e){var D=d(this,"borderLeftWidth")+d(this,"borderRightWidth");o.setExpression("width","this.parentNode.offsetWidth - "+D+'+ "px"')}else{o.width="100%"}}else{o.margin=!B?"-"+u.T+"px -"+u.R+"px "+(u.T-j)+"px -"+u.L+"px":(u.B-j)+"px -"+u.R+"px -"+u.B+"px -"+u.L+"px"}}for(var x=0;x<j;x++){var E=Math.max(0,a(m,x,j)),z=i.cloneNode(false);z.style.borderWidth="0 "+(g[v+"R"]?E:0)+"px 0 "+(g[v+"L"]?E:0)+"px";B?C.appendChild(z):C.insertBefore(z,C.firstChild)}}}})};c.fn.uncorner=function(){c("div.jquery-corner",this).remove();return this}})(jQuery);(function(b){var a;b.fn.dropShadow=function(c){var d=b.extend({left:4,top:4,blur:2,opacity:".5",color:"black",swap:false},c);var e=b([]);this.not(".dropShadow").each(function(){a=parseInt(b(this).css("z-index"),10);var r=b(this),n=[],g=(d.blur<=0)?0:d.blur,q=(g===0)?d.opacity:d.opacity/(g*8),t=(d.swap)?a:a+1,f=(d.swap)?a+1:a,v;if(this.id){v=this.id+"_dropShadow"}else{v="ds"+(1+Math.floor(9999*Math.random()))}b.data(this,"shadowId",v);b.data(this,"shadowOptions",c);r.attr("shadowId",v).css("zIndex",t);if(r.css("position")!="absolute"){r.css({position:"relative",zoom:1})}var u=r.css("backgroundColor");if(u=="rgba(0, 0, 0, 0)"){u="transparent"}if(u!="transparent"||r.css("backgroundImage")!="none"||this.nodeName=="SELECT"||this.nodeName=="INPUT"||this.nodeName=="TEXTAREA"){n[0]=b("<div></div>").css("background",d.color)}else{n[0]=r.clone().removeAttr("id").removeAttr("name").removeAttr("shadowId").css("color",d.color)}n[0].addClass("dropShadow").css({height:r.outerHeight(),left:g,opacity:q,position:"absolute",top:g,width:r.outerWidth(),zIndex:f});var p=(8*g)+1;for(var o=1;o<p;o++){n[o]=n[0].clone()}var l=1,m=g;while(m>0){n[l].css({left:m*2,top:0});n[l+1].css({left:m*4,top:m*2});n[l+2].css({left:m*2,top:m*4});n[l+3].css({left:0,top:m*2});n[l+4].css({left:m*3,top:m});n[l+5].css({left:m*3,top:m*3});n[l+6].css({left:m,top:m*3});n[l+7].css({left:m,top:m});l+=8;m--}var h=b("<div></div>").attr("id",v).addClass("dropShadow").css({left:r.position().left+d.left-g,marginTop:r.css("marginTop"),marginRight:r.css("marginRight"),marginBottom:r.css("marginBottom"),marginLeft:r.css("marginLeft"),position:"absolute",top:r.position().top+d.top-g,zIndex:f});for(o=0;o<p;o++){h.append(n[o])}r.after(h);e=e.add(h);b(window).resize(function(){try{h.css({left:r.position().left+d.left-g,top:r.position().top+d.top-g})}catch(i){}});a+=2});return this.pushStack(e)};b.fn.redrawShadow=function(){this.removeShadow();return this.each(function(){var c=b.data(this,"shadowOptions");b(this).dropShadow(c)})};b.fn.removeShadow=function(){return this.each(function(){var c=b(this).shadowId();b("div#"+c).remove()})};b.fn.shadowId=function(){return b.data(this[0],"shadowId")};b(function(){var c="<style type='text/css' media='print'>";c+=".dropShadow{visibility:hidden;}</style>";b("head").append(c)})})(jQuery);$.extend(jQuery.fn,{count:function(a){console?console.count(this):"";return this},dir:function(a){console?console.dir(this):"";return this},log:function(a){console?console.log("%s: %o",a,this):"";return this},profile:function(a){console?console.profile(this):"";return this},time:function(b,a){if(console){if(a==true||a==false){console?(a?console.timeEnd(b):console.time(b)):""}else{console.timeEnd(b).time(a)}}return this},trace:function(a){console?console.trace(this):"";return this}});$.fn.makeFloatingDiv=function(a){$("#floatdiv").remove();var f=$(this).css("z-index"),d=$("<div></div>"),c=$("<div></div>"),b={backgroundColor:"#000",border:"none",color:"#000",position:"absolute",width:"20em",zIndex:(f<10||f=="auto")?10:(parseInt(f,10)+1)},e=function(h,g){if(typeof(h.shadowId())=="undefined"){h.dropShadow();if(g!==false){$("#"+h.shadowId()+" div").corner("round 6px").dropShadow()}}else{h.redrawShadow();$("#"+h.shadowId()+" div").redrawShadow()}};if(typeof(a.classes)!="undefined"){$.each(a.classes,function(){d.addClass(this)})}if(typeof(a.id)=="undefined"){a.id="floatdiv"}if(typeof(a.position)=="undefined"){a.position="bl"}d.attr("id",a.id);if(typeof(a.borderColor)!="undefined"){b.backgroundColor=a.borderColor}if(typeof(a.round)=="undefined"){a.round=true}if(typeof(a.shadow)=="undefined"){a.shadow=true}switch(a.position){case"bl":$.extend(b,{left:$(this).position().left+1,top:$(this).position().top+$(this).outerHeight()-1});break;case"tl":$.extend(b,{left:$(this).position().left+1,top:$(this).position().top});break;case"br":$.extend(b,{left:$(this).position().left+$(this).outerWidth(),top:$(this).position().top+$(this).outerHeight()-1});break;case"tr":$.extend(b,{left:$(this).position().left+$(this).outerWidth(),top:$(this).position().top});break}if(typeof(a.css)!="undefined"){$.extend(b,a.css)}d.css(b);if(typeof(a.after)!="undefined"){if(a.after){$(this).parent().after(d)}else{$(this).append(d)}}else{$(this).append(d)}c.css({backgroundColor:(typeof(a.background)=="undefined")?"#fff":a.background,height:"100%",margin:"1px",padding:(typeof(a.innerPad)=="undefined")?"7px":a.innerPad+"px",width:parseInt(d.width(),10)-((typeof(a.innerPad)=="undefined")?16:(a.innerPad*2)+2)});d.append(c);if(a.round!==false){d.corner("round 6px");c.corner("round 6px")}if(a.shadow!==false){e(d,a.round)}return d};(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(q){var o=(q.type=="mouseover"?q.fromElement:q.toElement)||q.relatedTarget;while(o&&o!=this){try{o=o.parentNode}catch(q){o=this}}if(o==this){return false}var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseover"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);(function(a){a.fn.iff=function(c){var b=!c||a.isFunction(c)&&!c.apply(this,Array.prototype.slice.call(arguments,1))?[]:this;return this.pushStack(b,"iff",c)}})(jQuery);jQuery.fn.extend({if_:function(a){if(jQuery.isFunction(a)){a=a.call(this)}this.if_CondMet=!!a;return this.pushStack(a?this:[])},else_:function(a){var b=this.end();return b.if_CondMet?b.pushStack([]):b.if_(arguments.length?a:1)}});(function(b){function a(d){var c=2;b.each(d,function(e,f){if(b.isFunction(f)){c=e;return false}});return c}(function(){var c=document.compareDocumentPosition?function(j,i){return j.compareDocumentPosition(i)&16}:function(j,i){return j!==i&&(j.contains?j.contains(i):true)},e=b.fn.live,g=b.fn.die;function f(j,i){return jQuery.event.proxy(j,function(k){if(this!==k.relatedTarget&&k.relatedTarget&&!c(this,k.relatedTarget)){k.type=i;j.apply(this,arguments)}})}var d={mouseenter:"mouseover",mouseleave:"mouseout"};b.fn.live=function(k){var m=this,j=arguments,i=a(j),l=j[i];b.each(k.split(" "),function(o,p){var n=l;if(d[p]){n=f(n,p);p=d[p]}j[0]=p;j[i]=n;e.apply(m,j)});return this};b.fn.die=function(j,i){if(/mouseenter|mouseleave/.test(j)){if(j=="mouseenter"){j=j.replace(/mouseenter/g,"mouseover")}if(j=="mouseleave"){j=j.replace(/mouseleave/g,"mouseout")}}g.call(this,j,i);return this};function h(k,i,j){return jQuery.event.proxy(k,function(n){var m=this.parentNode,l=(d[n.type])?n.relatedTarget:undefined;k.apply(this,arguments);while(m&&m!==j&&m!==n.relatedTarget){if(b.multiFilter(i,[m])[0]){k.apply(m,arguments)}m=m.parentNode}})}b.fn.bubbleLive=function(){var j=arguments,i=a(j);j[i]=h(j[i],this.selector,this.context);b.fn.live.apply(this,j)};b.fn.liveHover=function(j,i){return this.live("mouseenter",j).live("mouseleave",i)}})();(function(){b.support.bubblingChange=!(b.browser.msie||b.browser.safari);if(!b.support.bubblingChange){var e=b.fn.live,f=b.fn.die,d=function(g){return b.event.proxy(g,function(k){var j=b(k.target);if((k.type!=="keydown"||k.keyCode===13)&&j.is("input, textarea, select")){var l=j.data("changeVal"),h=j.is(":checkbox, :radio"),i;if(h&&j.is(":enabled")&&k.type==="click"){i=j.is(":checked");if((k.target.type!=="radio"||i===true)&&k.type!=="change"&&l!==i){k.type="change";j.trigger(k)}}else{if(!h){i=j.val();if(l!==undefined&&l!==i){k.type="change";j.trigger(k)}}}if(i!==undefined){j.data("changeVal",i)}}})},c=function(g){return b.event.proxy(g,function(j){if(j.type==="change"){var i=b(j.target),h=(i.is(":checkbox, :radio"))?i.is(":checked"):i.val();if(h===i.data("changeVal")){return false}i.data("changeVal",h)}g.apply(this,arguments)})};b.fn.live=function(k,j){var l=this,h=arguments,g=a(h),i=h[g];if(k.indexOf("change")!=-1){b(this.context).bind("click focusin focusout keydown",d(i));i=c(i)}h[g]=i;e.apply(l,h);return this};b.fn.die=function(h,g){if(h.indexOf("change")!=-1){b(this.context).unbind("click focusin focusout keydown",g)}f.apply(this,arguments);return this}}})();(function(){b.support.focusInOut=!!(b.browser.msie);if(!b.support.focusInOut){b.each({focus:"focusin",blur:"focusout"},function(f,e){b.event.special[e]={setup:function(){if(!this.addEventListener){return false}this.addEventListener(f,b.event.special[e].handler,true)},teardown:function(){if(!this.removeEventListener){return false}this.removeEventListener(f,b.event.special[e].handler,true)},handler:function(g){arguments[0]=b.event.fix(g);arguments[0].type=e;return b.event.handle.apply(this,arguments)}}})}var d=null,c;b(document).bind("focusin",function(g){var f=g.realTarget||g.target;if(d&&d!==f){g.type="focusout";b(d).trigger(g);g.type="focusin";g.target=f}d=f}).bind("focusout",function(f){d=null})})()})(jQuery);(function(a){a.fn.lorem=function(d){a.fn.lorem.defaults={type:"paragraphs",amount:"3",ptags:true};var g=a.extend({},a.fn.lorem.defaults,d);var b=1;var c=10;var i=c-b+1;var h=g.amount;var f=new Array(10);f[1]="Nam quis nulla. Integer malesuada. In in enim a arcu imperdiet malesuada. Sed vel lectus. Donec odio urna, tempus molestie, porttitor ut, iaculis quis, sem. Phasellus rhoncus. Aenean id metus id velit ullamcorper pulvinar. Vestibulum fermentum tortor id mi. Pellentesque ipsum. Nulla non arcu lacinia neque faucibus fringilla. Nulla non lectus sed nisl molestie malesuada. Proin in tellus sit amet nibh dignissim sagittis. Vivamus luctus egestas leo. Maecenas sollicitudin. Nullam rhoncus aliquam metus. Etiam egestas wisi a erat.";f[2]="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nullam feugiat, turpis at pulvinar vulputate, erat libero tristique tellus, nec bibendum odio risus sit amet ante. Aliquam erat volutpat. Nunc auctor. Mauris pretium quam et urna. Fusce nibh. Duis risus. Curabitur sagittis hendrerit ante. Aliquam erat volutpat. Vestibulum erat nulla, ullamcorper nec, rutrum non, nonummy ac, erat. Duis condimentum augue id magna semper rutrum. Nullam justo enim, consectetuer nec, ullamcorper ac, vestibulum in, elit. Proin pede metus, vulputate nec, fermentum fringilla, vehicula vitae, justo. Fusce consectetuer risus a nunc. Aliquam ornare wisi eu metus. Integer pellentesque quam vel velit. Duis pulvinar.";f[3]="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Morbi gravida libero nec velit. Morbi scelerisque luctus velit. Etiam dui sem, fermentum vitae, sagittis id, malesuada in, quam. Proin mattis lacinia justo. Vestibulum facilisis auctor urna. Aliquam in lorem sit amet leo accumsan lacinia. Integer rutrum, orci vestibulum ullamcorper ultricies, lacus quam ultricies odio, vitae placerat pede sem sit amet enim. Phasellus et lorem id felis nonummy placerat. Fusce dui leo, imperdiet in, aliquam sit amet, feugiat eu, orci. Aenean vel massa quis mauris vehicula lacinia. Quisque tincidunt scelerisque libero. Maecenas libero. Etiam dictum tincidunt diam. Donec ipsum massa, ullamcorper in, auctor et, scelerisque sed, est. Suspendisse nisl. Sed convallis magna eu sem. Cras pede libero, dapibus nec, pretium sit amet, tempor quis, urna.";f[4]="Etiam posuere quam ac quam. Maecenas aliquet accumsan leo. Nullam dapibus fermentum ipsum. Etiam quis quam. Integer lacinia. Nulla est. Nulla turpis magna, cursus sit amet, suscipit a, interdum id, felis. Integer vulputate sem a nibh rutrum consequat. Maecenas lorem. Pellentesque pretium lectus id turpis. Etiam sapien elit, consequat eget, tristique non, venenatis quis, ante. Fusce wisi. Phasellus faucibus molestie nisl. Fusce eget urna. Curabitur vitae diam non enim vestibulum interdum. Nulla quis diam. Ut tempus purus at lorem.";f[5]="In sem justo, commodo ut, suscipit at, pharetra vitae, orci. Duis sapien nunc, commodo et, interdum suscipit, sollicitudin et, dolor. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam id dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Mauris dictum facilisis augue. Fusce tellus. Pellentesque arcu. Maecenas fermentum, sem in pharetra pellentesque, velit turpis volutpat ante, in pharetra metus odio a lectus. Sed elit dui, pellentesque a, faucibus vel, interdum nec, diam. Mauris dolor felis, sagittis at, luctus sed, aliquam non, tellus. Etiam ligula pede, sagittis quis, interdum ultricies, scelerisque eu, urna. Nullam at arcu a est sollicitudin euismod. Praesent dapibus. Duis bibendum, lectus ut viverra rhoncus, dolor nunc faucibus libero, eget facilisis enim ipsum id lacus. Nam sed tellus id magna elementum tincidunt.";f[6]="Morbi a metus. Phasellus enim erat, vestibulum vel, aliquam a, posuere eu, velit. Nullam sapien sem, ornare ac, nonummy non, lobortis a, enim. Nunc tincidunt ante vitae massa. Duis ante orci, molestie vitae, vehicula venenatis, tincidunt ac, pede. Nulla accumsan, elit sit amet varius semper, nulla mauris mollis quam, tempor suscipit diam nulla vel leo. Etiam commodo dui eget wisi. Donec iaculis gravida nulla. Donec quis nibh at felis congue commodo. Etiam bibendum elit eget erat.";f[7]="Praesent in mauris eu tortor porttitor accumsan. Mauris suscipit, ligula sit amet pharetra semper, nibh ante cursus purus, vel sagittis velit mauris vel metus. Aenean fermentum risus id tortor. Integer imperdiet lectus quis justo. Integer tempor. Vivamus ac urna vel leo pretium faucibus. Mauris elementum mauris vitae tortor. In dapibus augue non sapien. Aliquam ante. Curabitur bibendum justo non orci.";f[8]="Morbi leo mi, nonummy eget, tristique non, rhoncus non, leo. Nullam faucibus mi quis velit. Integer in sapien. Fusce tellus odio, dapibus id, fermentum quis, suscipit id, erat. Fusce aliquam vestibulum ipsum. Aliquam erat volutpat. Pellentesque sapien. Cras elementum. Nulla pulvinar eleifend sem. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque porta. Vivamus porttitor turpis ac leo.";f[9]="Maecenas ipsum velit, consectetuer eu, lobortis ut, dictum at, dui. In rutrum. Sed ac dolor sit amet purus malesuada congue. In laoreet, magna id viverra tincidunt, sem odio bibendum justo, vel imperdiet sapien wisi sed libero. Suspendisse sagittis ultrices augue. Mauris metus. Nunc dapibus tortor vel mi dapibus sollicitudin. Etiam posuere lacus quis dolor. Praesent id justo in neque elementum ultrices. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. In convallis. Fusce suscipit libero eget elit. Praesent vitae arcu tempor neque lacinia pretium. Morbi imperdiet, mauris ac auctor dictum, nisl ligula egestas nulla, et sollicitudin sem purus in lacus.";f[10]="Aenean placerat. In vulputate urna eu arcu. Aliquam erat volutpat. Suspendisse potenti. Morbi mattis felis at nunc. Duis viverra diam non justo. In nisl. Nullam sit amet magna in magna gravida vehicula. Mauris tincidunt sem sed arcu. Nunc posuere. Nullam lectus justo, vulputate eget, mollis sed, tempor sed, magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam neque. Curabitur ligula sapien, pulvinar a, vestibulum quis, facilisis vel, sapien. Nullam eget nisl. Donec vitae arcu.";function e(){var n="";for(var m=0;m<h;m++){rnd_number=Math.floor(Math.random()*i+b);if(d.ptags==true){n+="<p>"}n+=f[rnd_number];if(g.ptags==true){n+="</p>"}n+="\n\n"}switch(g.type){case"words":var r=g.amount;r=parseInt(r);var o=new Array();var j=new Array();j=n.split(" ");var t=0;var p=0;while(o.length<r){if(p>j.length){p=0;t++;if(t+1>f.length){t=0}j=f[t].split(" ");j[0]="\n\n"+j[0]}o.push(j[p]);p++}n=o.join(" ");break;case"characters":var k="";var q=g.amount;q=parseInt(q);var l=f.join("\n\n");while(k.length<q){k+=l}n=k.substring(0,q);break;case"paragraphs":break}return n}return this.each(function(){$this=a(this);var j=e();$this.html(j)})}})(jQuery);(function($){$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;options={id:"",nameSpace:"",root:"",previewInWindow:"",previewAutoRefresh:true,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParserPath:"",previewParserVar:"data",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(a,tag){var miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1]}})}return this.each(function(){function localize(data,inText){if(inText){return data.replace(/("|')~\//g,"$1"+options.root)}return data.replace(/^~\//,options.root)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath);options.previewTemplatePath=localize(options.previewTemplatePath);function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$.each(markupSet,function(){var button=this,t="",title,li,j,title=(button.key)?(button.name||"")+" [Ctrl+"+button.key+"]":(button.name||""),key=(button.key)?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+(i)+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu",function(){return false}).click(function(){return false}).mouseup(function(){if(button.call){eval(button.call)()}markup(button);return false}).hover(function(){$("> ul",this).css("display","block");$(document).one("click",function(){$("ul ul",header).css("display","none")})},function(){$("> ul",this).css("display","none")}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu))}}});levels.pop();return ul}function init(){var id="",nameSpace="";if(options.id){id='id="'+options.id+'"'}else{if($$.attr("id")){id='id="markItUp'+($$.attr("id").substr(0,1).toUpperCase())+($$.attr("id").substr(1))+'"'}}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"'}$$.wrap("<div "+nameSpace+"></div>");$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$('<div class="markItUpHeader"></div>').insertBefore($$);$(dropMenus(options.markupSet)).appendTo(header);footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&$.browser.safari!==true){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(e){var h=$$.height(),y=e.clientY,mouseMove,mouseUp;mouseMove=function(e){$$.css("height",Math.max(20,e.clientY+h-y)+"px");return false};mouseUp=function(e){$("html").unbind("mousemove",mouseMove).unbind("mouseup",mouseUp);return false};$("html").bind("mousemove",mouseMove).bind("mouseup",mouseUp)});footer.append(resizeHandle)}$$.keydown(keyPressed).keyup(keyPressed);$$.bind("insertion",function(e,settings){if(settings.target!==false){get()}if(textarea===$.markItUp.focused){markup(settings)}});$$.focus(function(){$.markItUp.focused=this})}function magicMarkups(string){if(string){string=string.toString();string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");if(altKey===true){return(b[1]!==undefined)?b[1]:b[0]}else{return(b[1]===undefined)?"":b[0]}});string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");if(abort===true){return false}value=prompt(b[0],(b[1])?b[1]:"");if(value===null){abort=true}return value});return string}return""}function prepare(action){if($.isFunction(action)){action=action(hash)}return magicMarkups(action)}function build(string){openWith=prepare(clicked.openWith);placeHolder=prepare(clicked.placeHolder);replaceWith=prepare(clicked.replaceWith);closeWith=prepare(clicked.closeWith);if(replaceWith!==""){block=openWith+replaceWith+closeWith}else{if(selection===""&&placeHolder!==""){block=openWith+placeHolder+closeWith}else{block=openWith+(string||selection)+closeWith}}return{block:block,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith}}function markup(button){var len,j,n,i;hash=clicked=button;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:(selection||""),caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if(ctrlKey===true&&shiftKey===true){prepare(clicked.beforeMultiInsert)}$.extend(hash,{line:1});if(ctrlKey===true&&shiftKey===true){lines=selection.split(/\r?\n/);for(j=0,n=lines.length,i=0;i<n;i++){if($.trim(lines[i])!==""){$.extend(hash,{line:++j,selection:lines[i]});lines[i]=build(lines[i]).block}else{lines[i]=""}}string={block:lines.join("\n")};start=caretPosition;len=string.block.length+(($.browser.opera)?n:0)}else{if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;len-=fixIeBug(string.block)}else{if(shiftKey===true){string=build(selection);start=caretPosition;len=string.block.length;len-=fixIeBug(string.block)}else{string=build(selection);start=caretPosition+string.block.length;len=0;start-=fixIeBug(string.block)}}}if((selection===""&&string.replaceWith==="")){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,len)}else{caretOffset=-1}get();$.extend(hash,{line:"",selection:selection});if(ctrlKey===true&&shiftKey===true){prepare(clicked.afterMultiInsert)}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview()}shiftKey=altKey=ctrlKey=abort=false}function fixOperaBug(string){if($.browser.opera){return string.length-string.replace(/\n*/g,"").length}return 0}function fixIeBug(string){if($.browser.msie){return string.length-string.replace(/\r*/g,"").length}return 0}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block}else{$$.val($$.val().substring(0,caretPosition)+block+$$.val().substring(caretPosition+selection.length,$$.val().length))}}function set(start,len){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&len===0){return false}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",len);range.select()}else{if(textarea.setSelectionRange){textarea.setSelectionRange(start,start+len)}}textarea.scrollTop=scrollPosition;textarea.focus()}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if($.browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();rangeCopy.moveToElementText(textarea);caretPosition=-1;while(rangeCopy.inRange(range)){rangeCopy.moveStart("character");caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart;selection=$$.val().substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow)}else{iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>');if(options.previewPosition=="after"){iFrame.insertAfter(footer)}else{iFrame.insertBefore(header)}previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]}}else{if(altKey===true){if(iFrame){iFrame.remove()}previewWindow.close();previewWindow=iFrame=false}}if(!options.previewAutoRefresh){refreshPreview()}}function refreshPreview(){if(previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open();previewWindow.document.write(renderPreview());previewWindow.document.close();previewWindow.document.documentElement.scrollTop=sp}if(options.previewInWindow){previewWindow.focus()}}function renderPreview(){phtml="<html><head></head><body>"+$$.val()+"</body></html>";return phtml}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=(!(e.altKey&&e.ctrlKey))?e.ctrlKey:false;if(e.type==="keydown"){if(ctrlKey===true){li=$("a[accesskey="+String.fromCharCode(e.keyCode)+"]",header).parent("li");if(li.length!==0){ctrlKey=false;li.triggerHandler("mouseup");return false}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault}else{if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault}else{markup(options.onEnter);return options.onEnter.keepDefault}}}if(e.keyCode===9){if(shiftKey===true||ctrlKey===true||altKey===true){return false}if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false}else{markup(options.onTab);return options.onTab.keepDefault}}}}init()})};$.fn.markItUpRemove=function(){return this.each(function(){$$=$(this).unbind().removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$)})};$.markItUp=function(settings){var options={target:false};$.extend(options,settings);if(options.target){return $(options.target).each(function(){$(this).focus();$(this).trigger("insertion",[options])})}else{$("textarea").trigger("insertion",[options])}}})(jQuery);$.fn.outerHTML=function(){if(this.find("script").length===0){var b=this[0]?this[0].ownerDocument:document;return $("<div>",b).append(this.eq(0).clone()).html()}else{var a=document.createElement("p");var d=this.eq(0).clone();a.appendChild(d[0]);return(s)?this.before(s).remove():a.innerHTML}};jQuery.fn.replace=function(){var a=[];return this.domManip(arguments,true,1,function(b){this.parentNode.replaceChild(b,this);a.push(b)}).pushStack(a)};(function(c){var a=c.scrollTo=function(f,e,d){c(window).scrollTo(f,e,d)},b=function(d){return typeof d=="object"?d:{top:d,left:d}};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var e=this,d=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d){return e}var f=(e.contentWindow||e).document||e.ownerDocument||e;return c.browser.safari||f.compatMode=="BackCompat"?f.body:f.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:"settings"}}if(f=="max"){f="9e9"}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var l=this,j=c(l),k=f,i,g={},m=j.is("html,body"),h=function(n){j.animate(g,e,d.easing,n&&function(){n.call(this,f,d)})};switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}k=c(k,this);case"object":if(k.is||k.style){i=(k=c(k)).offset()}}c.each(d.axis.split(""),function(q,r){var t=r=="x"?"Left":"Top",v=t.toLowerCase(),p="scroll"+t,o=l[p],n=a.max(l,r);if(i){g[p]=i[v]+(m?0:o-j.offset()[v]);if(d.margin){g[p]-=parseInt(k.css("margin"+t),10)||0;g[p]-=parseInt(k.css("border"+t+"Width"),10)||0}g[p]+=d.offset[v]||0;if(d.over[v]){g[p]+=k[r=="x"?"width":"height"]()*d.over[v]}}else{var u=k[v];g[p]=u.slice&&u.slice(-1)=="%"?parseFloat(u)/100*n:u}if(/^\d+$/.test(g[p])){g[p]=g[p]<=0?0:Math.min(g[p],n)}if(!q&&d.queue){if(o!=g[p]){h(d.onAfterFirst)}delete g[p]}});h(d.onAfter)}).end()};a.max=function(j,i){var h=i=="x"?"Width":"Height",e="scroll"+h;if(!c(j).is("html,body")){return j[e]-c(j)[h.toLowerCase()]()}var g="client"+h,f=j.ownerDocument.documentElement,d=j.ownerDocument.body;return Math.max(f[e],d[e])-Math.min(f[g],d[g])}})(jQuery);(function(a){a.fn.addOption=function(){var h=function(l,r,u,p){var n,q=true;if(!l.cache){l.cache={}}var k=l.options,j=k.length;for(var m=0;m<j;m++){if(!l.cache[k[m].value]){l.cache[k[m].value]=m}if(k[m].value==r){n=k[m];q=false}}if(typeof n=="undefined"){n=document.createElement("option");n.value=r}n.text=u;if(typeof l.cache[r]=="undefined"){l.cache[r]=j}if(q){l.options[l.cache[r]]=n}if(p){n.selected=true}};var c=arguments;if(c.length===0){return this}var g=true,b=false,e,d,f;if(typeof(c[0])=="object"){b=true;e=c[0]}if(c.length>=2){if(typeof(c[1])=="boolean"){g=c[1]}else{if(typeof(c[2])=="boolean"){g=c[2]}}if(!b){d=c[0];f=c[1]}}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}if(b){for(var i in e){h(this,i,e[i],g)}}else{h(this,d,f,g)}});return this};a.fn.ajaxAddOption=function(d,f,b,e,c){if(typeof(d)!="string"){return this}if(typeof(f)!="object"){f={}}if(typeof(b)!="boolean"){b=true}this.each(function(){var g=this;a.getJSON(d,f,function(h){a(g).addOption(h,b);if(typeof e=="function"){if(typeof c=="object"){e.apply(g,c)}else{e.call(g)}}})});return this};a.fn.removeOption=function(){var c=arguments;if(c.length===0){return this}var e=typeof(c[0]),d,f;if(e=="string"||e=="object"||e=="function"){d=c[0];if(d.constructor==Array){var b=d.length;for(var g=0;g<b;g++){this.removeOption(d[g],c[1])}return this}}else{if(e=="number"){f=c[0]}else{return this}}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}if(this.cache){this.cache=null}var h=false,l=this.options;if(!!d){var j=l.length;for(var k=j-1;k>=0;k--){if(d.constructor==RegExp){if(l[k].value.match(d)){h=true}}else{if(l[k].value==d){h=true}}if(h&&c[1]===true){h=l[k].selected}if(h){l[k]=null}h=false}}else{if(c[1]===true){h=l[f].selected}else{h=true}if(h){this.remove(f)}}});return this};a.fn.sortOptions=function(c){var d=a(this).selectedValues();var b=typeof(c)=="undefined"?true:!!c;this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}var h=this.options,e=h.length,k=[];for(var g=0;g<e;g++){k[g]={v:h[g].value,t:h[g].text}}k.sort(function(l,j){var m=l.t.toLowerCase(),i=j.t.toLowerCase();if(m==i){return 0}if(b){return m<i?-1:1}else{return m>i?-1:1}});for(var f=0;f<e;f++){h[f].text=k[f].t;h[f].value=k[f].v}}).selectOptions(d,true);return this};a.fn.selectOptions=function(e,b){var d=e,g=typeof(e);if(g=="object"&&d.constructor==Array){var f=this;a.each(d,function(){f.selectOptions(this,b)})}var h=b||false;if(g!="string"&&g!="function"&&g!="object"){return this}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return this}var k=this.options,c=k.length;for(var j=0;j<c;j++){if(d.constructor==RegExp){if(k[j].value.match(d)){k[j].selected=true}else{if(h){k[j].selected=false}}}else{if(k[j].value==d){k[j].selected=true}else{if(h){k[j].selected=false}}}}});return this};a.fn.copyOptions=function(d,c){var b=c||"selected";if(a(d).size()===0){return this}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return this}var g=this.options,e=g.length;for(var f=0;f<e;f++){if(b=="all"||(b=="selected"&&g[f].selected)){a(d).addOption(g[f].value,g[f].text)}}});return this};a.fn.containsOption=function(e,c){var d=false,b=e,f=typeof(b),g=typeof(c);if(f!="string"&&f!="function"&&f!="object"){return g=="function"?this:d}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return this}if(d&&g!="function"){return false}var k=this.options,h=k.length;for(var j=0;j<h;j++){if(b.constructor==RegExp){if(k[j].value.match(b)){d=true;if(g=="function"){c.call(k[j],j)}}}else{if(k[j].value==b){d=true;if(g=="function"){c.call(k[j],j)}}}}});return g=="function"?this:d};a.fn.selectedValues=function(){var b=[];this.selectedOptions().each(function(){b[b.length]=this.value});return b};a.fn.selectedTexts=function(){var b=[];this.selectedOptions().each(function(){b[b.length]=this.text});return b};a.fn.selectedOptions=function(){return this.find("option:selected")}})(jQuery);jQuery.fn.swap=function(e){e=jQuery(e)[0];var f=this[0],d=f.cloneNode(true),g=e.cloneNode(true),c=this;f.parentNode.replaceChild(g,f);e.parentNode.replaceChild(d,e);c[0]=d;return this.pushStack(c)};jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(a){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},a||{});jQuery.tableDnD.makeDraggable(this)});jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",jQuery.tableDnD.mouseup);return this},makeDraggable:function(c){var b=c.tableDnDConfig;if(c.tableDnDConfig.dragHandle){var a=jQuery("td."+c.tableDnDConfig.dragHandle,c);a.each(function(){jQuery(this).mousedown(function(e){jQuery.tableDnD.dragObject=this.parentNode;jQuery.tableDnD.currentTable=c;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,e);if(b.onDragStart){b.onDragStart(c,this)}return false})})}else{var d=jQuery("tr",c);d.each(function(){var e=jQuery(this);if(!e.hasClass("nodrag")){e.mousedown(function(f){if(f.target.tagName=="TD"){jQuery.tableDnD.dragObject=this;jQuery.tableDnD.currentTable=c;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,f);if(b.onDragStart){b.onDragStart(c,this)}return false}}).css("cursor","move")}})}},updateTables:function(){this.each(function(){if(this.tableDnDConfig){jQuery.tableDnD.makeDraggable(this)}})},mouseCoords:function(a){if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}return{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(d,c){c=c||window.event;var b=this.getPosition(d);var a=this.mouseCoords(c);return{x:a.x-b.x,y:a.y-b.y}},getPosition:function(c){var b=0;var a=0;if(c.offsetHeight===0){c=c.firstChild}while(c.offsetParent){b+=c.offsetLeft;a+=c.offsetTop;c=c.offsetParent}b+=c.offsetLeft;a+=c.offsetTop;return{x:b,y:a}},mousemove:function(g){if(jQuery.tableDnD.dragObject===null){return}var d=jQuery(jQuery.tableDnD.dragObject);var b=jQuery.tableDnD.currentTable.tableDnDConfig;var i=jQuery.tableDnD.mouseCoords(g);var f=i.y-jQuery.tableDnD.mouseOffset.y;var c=window.pageYOffset;if(document.all){if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){c=document.documentElement.scrollTop}else{if(typeof document.body!="undefined"){c=document.body.scrollTop}}}if(i.y-c<b.scrollAmount){window.scrollBy(0,-b.scrollAmount)}else{var a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(a-(i.y-c)<b.scrollAmount){window.scrollBy(0,b.scrollAmount)}}if(f!=jQuery.tableDnD.oldY){var e=f>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=f;if(b.onDragClass){d.addClass(b.onDragClass)}else{d.css(b.onDragStyle)}var h=jQuery.tableDnD.findDropTargetRow(d,f);if(h){if(e&&jQuery.tableDnD.dragObject!=h){h.parentNode.insertBefore(jQuery.tableDnD.dragObject,h.nextSibling)}else{if(!e&&jQuery.tableDnD.dragObject!=h){h.parentNode.insertBefore(jQuery.tableDnD.dragObject,h)}}}}return false},findDropTargetRow:function(f,g){var j=jQuery.tableDnD.currentTable.rows;for(var e=0;e<j.length;e++){var h=j[e];var b=this.getPosition(h).y;var a=parseInt(h.offsetHeight,10)/2;if(h.offsetHeight===0){b=this.getPosition(h.firstChild).y;a=parseInt(h.firstChild.offsetHeight,10)/2}if((g>b-a)&&(g<(b+a))){if(h==f){return null}var c=jQuery.tableDnD.currentTable.tableDnDConfig;if(c.onAllowDrop){if(c.onAllowDrop(f,h)){return h}else{return null}}else{var d=jQuery(h).hasClass("nodrop");if(!d){return h}else{return null}}return h}}return null},mouseup:function(c){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var b=jQuery.tableDnD.dragObject;var a=jQuery.tableDnD.currentTable.tableDnDConfig;if(a.onDragClass){jQuery(b).removeClass(a.onDragClass)}else{jQuery(b).css(a.onDropStyle)}jQuery.tableDnD.dragObject=null;if(a.onDrop){a.onDrop(jQuery.tableDnD.currentTable,b)}jQuery.tableDnD.currentTable=null}},serialize:function(){if(jQuery.tableDnD.currentTable){return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable)}else{return"Error: No Table id set, you need to set an id on your table and every row"}},serializeTable:function(d){var a="";var c=d.id;var e=d.rows;for(var b=0;b<e.length;b++){if(a.length>0){a+="&"}var f=e[b].id;if(f&&f&&d.tableDnDConfig&&d.tableDnDConfig.serializeRegexp){f=f.match(d.tableDnDConfig.serializeRegexp)[0]}a+=c+"[]="+f}return a},serializeTables:function(){var a="";this.each(function(){a+=jQuery.tableDnD.serializeTable(this)});return a}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables});function convertToMarkup(h){var d=0,a="",c=0,f=[];function g(k){switch(k){case"<p>":case"</p>":case"\n</p>":case"\n<p>":return"\n";case"<em>":return"''";case"\n<em>":return"\n''";case"\n</em>":return"\n''";case"</em>":return"''";case"<strong>":return"'''";case"\n<strong>":return"\n'''";case"\n</strong>":return"\n'''";case"</strong>":return"'''";case"\n<h1>":return"\n= ";case"</h1>":return" =";case"\n<h2>":return"\n== ";case"</h2>":return" ==";case"\n<h3>":return"\n=== ";case"</h3>":return" ===";case"\n<h4>":return"\n==== ";case"</h4>":return" ====";case"\n<h5>":return"\n===== ";case"</h5>":return" =====";case"\n<h6>":return"\n====== ";case"</h6>":return" ======";case"</a>":case"\n</a>":return"]";case"\n<hr>":return"\n----";case"<hr>":return"----\n";case"\n<ul>":case"<ul>":c++;f[c]="ul";return"";case"\n<ol>":case"<ol>":c++;f[c]="ol";return"";case"\n<br>":return"\n";case"\n</ol>":case"</ol>":case"\n</ul>":case"</ul>":c--;return"";case"\n</li>":case"</li>":return"";case"<br>":case"<code>":return"";case"</pre>":case"</code>":case"\n</code>":return"\n";case"\n<li>":case"<li>":a="";for(var j=0;j<c;j++){a=a+"    "}if(f[c]=="ol"){return"\n"+a+"a. "}else{return"\n"+a+"* "}break;case"\n<pre>":return"\n        ";default:a="";if(k.slice(0,4)=="\n<li"||k.slice(0,4)=="<li "){for(j=0;j<c;j++){a=a+"    "}return"\n"+a+k.split('"')[1]+". "}else{return k}}}function b(i){a=i.slice(1,i.length);return"\n["+a+"|"+a+"]"}function e(i){switch(i){case"</ol><ol>":case"</ol>\n<ol>":return"";case"</ul><ul>":case"</ul>\n<ul>":return"";case"</ul></li></ul>":case"</ul></li></ol>":return"</ul>";case"</ol></li></ol>":case"</ul></li></ol>":return"</ol>";default:return i}}if(h.length>0){h=h.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;");a=h.split(/<a href=\"/);h=a[0];if(a.length>1){for(d=1;d<a.length;d++){a[d]=a[d].replace(/">/,"|");h=h+"["+a[d]}}h=h.replace("<p>","").replace(/<\/strong><\/em><strong>/g,"''").replace(/<\/em><\/strong><em>/g,"'''").replace(/<\/p><.?l>/g,"\n<ol>").replace(/<\/p><ul>/g,"\n<ul>").replace(/\n */g,"\n").replace(/\n?<.*?>/g,g).replace(/ /g," ").replace(/\n\b((ftp|https?):\/\/\S*)/g,b).replace(/\n\n\n/g,"\n\n");while(h.length>0&&h.charAt(h.length-1).match(/\s/)){h=h.slice(0,h.length-1)}}return h}function convertToHTML(h){var v=0;var n=0;var o="";var m=[];var t=0;var z=false;function e(F,E,i){var D=0;while((F.length-4)%4>0){F=F.slice(1,F.length)}if(F.match(/\s{8}[^   ..|\* ..|\d\d?\. ?.]/)!==null){F="<pre><code>"+F.slice(F.length-4,F.length);return F}t=F.split("    ").length-1;var G="";if(F.split("    ")[t].slice(0,1)){if(t==n){if(o=="ol"){G="</ol><ul>"}else{if(o===""){G="<ul>"}}}else{if(t>n){G="<ul>";m[m.length]="ul>";n=t}else{if(t<n){for(D=n;D>t;D--){G=G+"</"+m.pop()}}}}G=G+"<li>"+F.slice(F.length-2);o="ul"}else{if(t==n){if(o=="ul"){G="</ul><ol>"}else{if(o===""){G="<ol>"}}}else{if(t>n){m[m.length]="ol>";G="<ol>";n=t}else{if(t<n){for(D=n;D>t;D--){G=G+"</"+m.pop()}}}}var x=F.slice(F.length-3).split(" ")[1];if(typeof(x)=="undefined"){x=""}G=G+"<li>"+x;o="ol"}return G}function u(y){function i(x){switch(x){case"\n=":case"<p>=":case"=</p>":case"=":return"h1>";case"\n==":case"<p>==":case"==</p>":case"==":return"h2>";case"\n===":case"<p>===":case"===</p>":case"===":return"h3>";case"\n====":case"<p>====":case"====</p>":case"====":return"h4>";case"\n=====":case"<p>=====":case"=====</p>":case"=====":return"h5>";case"\n======":case"<p>======":case"======</p>":case"======":return"h6>"}}var d=y.split(" ");d[0]="<"+i(d[0]);d[(d.length-1)]="</"+i(d[(d.length-1)]);y=d.join("");return y}function c(i){var d=i.slice(0,7);var D=i.slice(7,i.length-4);D=D.replace(/></g,">\n<");switch(d){case"<p><ul>":d="<ul>\n";break;case"<p><ol>":d="<ol>\n";break;case"</ol><p>":d="</ol>";break;case"</ul><p>":d="</ul>";break}d=d+D;return d}function A(d){return d+"\n"}function q(x){var i=x.slice(0,5);i=i+"\n<p>";var d=x.slice(5,x.length-6);var D=x.slice(x.length-1);if(D=="\n"){x=i+d+"</p>"+D}else{x=i+d+"<br>"+D}return x}function f(d){return"\n<p>"+d.slice(5,d.length)}function C(d){return d.slice(0,1)+"<br>\n"}function w(d){return"<hr>\n<p>"+d.slice(9,d.length-4)+"</p>"}function a(d){return"</p>"+d.slice(8,d.length)}function r(d){switch(d){case"<li>\n":return"<li>";case"<p>\n":return"<p>"}}function b(d){return d.slice(0,1)+"\n<li"}if(h.length>0){h=h.replace(/.<li/g,b);var k=h.split("\n");h="";for(v=0;v<k.length;v++){if(k[v].split(/\s{4}\s*..../).length==1){if(z===true){for(var B=m.length;B>0;B--){if(B==1){k[v]="</"+m.shift()+"\n\n"+k[v]}else{k[v]="</"+m.shift()+k[v]}}n=0}}else{k[v]=k[v].replace(/\s{4}\s*..../g,e);z=true}switch(k[v].slice(0,4)){case"<pre":k[v]="\n"+k[v]+"</code></pre>";break;case"<li>":case"<ol>":case"<ul>":case"</ol":case"</ul":case"<li ":k[v]=k[v]+"</li>";break;default:}if(v<k.length-1&&k[v].match(/^[\w|"|']/)!==null&&k[v].match(/^[\w|"|']/)!==null&&k[v].length>0&&k[v+1].length>0){h=h+k[v]+"<br>"}else{if(v<k.length-1&&k[v].match(/>$/)!==null&&k[v].match(/^</)!==null){h=h+k[v]}else{if(k[v].match(/-{4}/)!==null){h=h+"<hr>"}else{h=h+k[v]+"\n"}}}}h=h.replace(/\n\n/g,"</p>\n<p>");h=h.replace(/\n/g,"<br>");h="<p>"+h+"</p>";var l=h.split(/\[/);if(l.length>1){h=l[0];for(v=1;v<l.length;v++){if(l[v].indexOf("|")>-1){var j=l[v].split(/\|/);l[v]='<a href="'+j[0]+'">'+j[1].replace(/\]/,"</a>")}else{l[v]='<a href="'+l[v]+'">'+l[v]+"</a>"}h=h+l[v]}}var p=false;var g=false;for(v=0;v<h.length;v++){if(h.charAt(v)=="'"){if(h.charAt(v+1)=="'"){if(h.charAt(v+2)=="'"){if(p===false){h=h.slice(0,v)+"<strong><X>"+h.slice((v+3));v+=3;p=true}else{h=h.slice(0,v)+"</strong><X>"+h.slice((v+3));v+=3;p=false}}else{if(g===false){h=h.slice(0,v)+"<em><X>"+h.slice((v+2));v+=2;g=true}else{h=h.slice(0,v)+"</em><X>"+h.slice((v+2));v+=2;g=false}}}}}while(h.length>0&&h.charAt(h.length-1).match(/\s/)){h=h.slice(0,h.length-1)}h=h.replace(/<p><\/p>\n<p>/g,"<p>").replace(/<\/h\d>/g,A).replace(/.<br>/g,C).replace(/\n?<X>\n?/g,"").replace(/\n<ol>/g,"<ol>").replace(/\n<ul>/g,"<ul>").replace(/<\/p>\n?<br>/g,"</p>").replace(/<p>\n<hr>/g,"<hr>").replace(/\n<br>.*<\/p>/g,f).replace(/\n<br>/g,"<br>\n").replace(/<hr><br>\n.*<br>/g,w).replace(/<br>\n\n/g,"<br>\n").replace(/<\/p>\n<p><(o|u)l>\n<li>/g,a).replace(/<(li|p)>\n/g,r).replace(/<\/p>\n\n/g,"</p>\n").slice(0,h.length-5).replace(/\n?<p>\n?<br>\n?<pre>\n?/g,"\n<pre>").replace(/\n?<\/pre>\n?<br>\n?<\/ol>\n?(<\/li>)?\n?/g,"</pre>\n").replace(/<\/pre>\n<br>/g,"</pre>").replace(/\=<br>/g,"=\n").replace(/<p>=/g,"=").replace(/\=<\/p>/g,"=").replace(/(<p>={1,6}\s.+=\s{1,6}<\/p>)|(^={1,6}\s.+\s={1,6}$)/gm,u).replace(/<\/p><ul>/g,"</p>\n<ul>").replace(/<\/p><ol>/g,"</p>\n<ol>")}return h};